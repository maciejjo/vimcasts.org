!function(e){function t(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var n=function(e){var t,n,i={};if(""===e)return{};for(t=0;t<e.length;t+=1)n=e[t].split("="),2===n.length&&(i[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")));return i};e.queryParams=function(){return n(window.location.search.substr(1).split("&"))},e.hashParams=function(){return n(window.location.hash.substr(1).split("&"))},window.Swiftype=window.Swiftype||{},Swiftype.root_url=Swiftype.root_url||"https://api.swiftype.com",Swiftype.pingUrl=function(e,t){var n=setTimeout(t,350),i=new Image;return i.onload=i.onerror=function(){clearTimeout(n),t()},i.src=e,!1},Swiftype.pingSearchResultClick=function(t,n,i){var a={t:(new Date).getTime(),engine_key:t,doc_id:n,q:Swiftype.currentQuery},r=Swiftype.root_url+"/api/v1/public/analytics/pc?"+e.param(a);Swiftype.pingUrl(r,i)},e.fn.swiftypeSearch=function(t){var t=e.extend({},e.fn.swiftypeSearch.defaults,t);return this.each(function(){var n=e(this),i=e.meta?e.extend({},t,n.data()):t;n.data("swiftype-config-search",i),n.selectedCallback=function(t){return function(n){var a=e(this);n.preventDefault(),Swiftype.pingSearchResultClick(i.engineKey,t.id,function(){window.location=a.attr("href")})}},n.registerResult=function(t,i){t.data("swiftype-item",i),e("a",t).click(n.selectedCallback(i))},n.getContentCache=function(){return e("#"+o)};var a=e(i.resultContainingElement),r=a.html(),o="st-content-cache",s=n.getContentCache(),c=function(e,t){location.hash="stq="+encodeURIComponent(e)+"&stp="+t},u=function(t,n){function c(e){if(void 0!==e){var t=e;return"function"==typeof t&&(t=t.call()),t}return void 0}n=e.extend({page:1},n);var u={};s.length||(a.after("<div id='"+o+"' style='display: none;'></div>"),s.html(r).hide()),i.loadingFunction(t,a),Swiftype.currentQuery=t,u.q=t,u.engine_key=i.engineKey,u.page=n.page,u.per_page=i.perPage,u.search_fields=c(i.searchFields),u.fetch_fields=c(i.fetchFields),u.facets=c(i.facets),u.filters=c(i.filters),u.document_types=c(i.documentTypes),u.functional_boosts=c(i.functionalBoosts),u.sort_field=c(i.sortField),u.sort_direction=c(i.sortDirection),e.getJSON(Swiftype.root_url+"/api/v1/public/engines/search.json?callback=?",u).success(f)};e(window).hashchange(function(){var t=e.hashParams();if(t.stq)u(t.stq,{page:t.stp});else{var i=n.getContentCache();i.length&&(a.html(i.html()),i.remove())}});var l=n.parents("form");l&&l.bind("submit",function(e){e.preventDefault();var t=n.val();c(t,1)}),e(document).on("click","[data-hash][data-page]",function(t){t.preventDefault();var n=e(this);c(e.hashParams().stq,n.data("page"))});var f=function(e){"function"==typeof i.preRenderFunction&&i.preRenderFunction.call(n,e),i.renderResultsFunction(n.getContext(),e),"function"==typeof i.postRenderFunction&&i.postRenderFunction.call(n,e)};n.getContext=function(){return{config:i,resultContainer:a,registerResult:n.registerResult}},e(window).hashchange()})};var i=function(t,n){var i,r=-1;e.each(n,function(e,t){t.num_pages>r&&(i=e,r=t.num_pages)});var o=n[i].current_page,s=n[i].num_pages;e(a(i,o,s)).appendTo(t.resultContainer)},a=function(e,t,n){var i,a,r='<div class="st-page">';return 1!=t&&(i=t-1,r=r+'<a href="#" class="st-prev" data-hash="true" data-page="'+i+'">&laquo; previous</a>'),n>t&&(a=t+1,r=r+'<a href="#" class="st-next" data-hash="true" data-page="'+a+'">next &raquo;</a>'),r+="</div>"},r=function(t,n){var a=t.resultContainer,r=t.config;a.html(""),e.each(n.records,function(n,i){e.each(i,function(i,o){t.registerResult(e(r.renderFunction(n,o)).appendTo(a),o)})}),i(t,n.info)},o=function(e,n){return'<div class="st-result"><h3 class="title"><a href="'+n.url+'" class="st-search-result-link">'+t(n.title)+"</a></h3></div>"},s=function(e,t){t.html('<p class="st-loading-message">loading...</p>')},c=function(t){var n=0,i=this.getContext().resultContainer;t.info&&e.each(t.info,function(e,t){n+=t.total_result_count}),0===n&&i.html("<div id='st-no-results' class='st-no-results'>No results found.</div>")};e.fn.swiftypeSearch.defaults={attachTo:void 0,documentTypes:void 0,facets:void 0,filters:void 0,engineKey:void 0,searchFields:void 0,functionalBoosts:void 0,sortField:void 0,sortDirection:void 0,fetchFields:void 0,preRenderFunction:void 0,postRenderFunction:c,loadingFunction:s,renderResultsFunction:r,renderFunction:o,perPage:10}}(jQuery);