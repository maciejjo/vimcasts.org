/*
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
!function(){function t(){if(t.is(arguments[0],I)){for(var e=arguments[0],i=Qe[m](t,e.splice(0,3+t.is(e[0],j))),r=i.set(),n=0,s=e[B];s>n;n++){var a=e[n]||{};l[f](a.type)&&r[V](i[a.type]().attr(a))}return r}return Qe[m](t,arguments)}function e(){for(var t=[],e=0;32>e;e++)t[e]=(~~(16*M.random()))[q](16);return t[12]=4,t[16]=(3&t[16]|8)[q](16),"r-"+t[A]("")}function i(t,e,i){function r(){var n=Array[u].slice.call(arguments,0),s=n[A]("►"),a=r.cache=r.cache||{},o=r.count=r.count||[];return a[f](s)?i?i(a[s]):a[s]:(o[B]>=1e3&&delete a[o.shift()],o[V](s),a[s]=t[m](e,n),i?i(a[s]):a[s])}return r}function r(e,i,r,n,s){return s?t.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+s,i,r-2*s,s,-s,n-2*s,2*s-r,2*s-n):t.format("M{0},{1}l{2},0,0,{3},{4},0z",e,i,r,n,-r)}function n(){return this.x+w+this.y}function s(e){return function(i,r,n,s){var a={back:e};return t.is(n,"function")?s=n:a.rot=n,i&&i.constructor==Ve&&(i=i.attrs.path),i&&(a.along=i),this.animate(a,r,s)}}function a(t,e,i,r,n,s){function a(t){return((u*t+c)*t+l)*t}function o(t,e){var i=h(t,e);return((d*i+p)*i+f)*i}function h(t,e){var i,r,n,s,o,h;for(n=t,h=0;8>h;h++){if(s=a(n)-t,G(s)<e)return n;if(o=(3*u*n+2*c)*n+l,G(o)<1e-6)break;n-=s/o}if(i=0,r=1,n=t,i>n)return i;if(n>r)return r;for(;r>i;){if(s=a(n),G(s-t)<e)return n;t>s?i=n:r=n,n=(r-i)/2+i}return n}var l=3*e,c=3*(r-e)-l,u=1-l-c,f=3*i,p=3*(n-i)-f,d=1-f-p;return o(t,1/(200*s))}t.version="1.5.2";var o,h=/[, ]+/,l={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},c=/\{(\d+)\}/g,u="prototype",f="hasOwnProperty",p=document,d=window,v={was:Object[u][f].call(d,"Raphael"),is:d.Raphael},y=function(){this.customAttributes={}},g="appendChild",m="apply",x="concat",b="createTouch"in p,k="",w=" ",N=String,_="split",C="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[_](w),T={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},A="join",B="length",S=N[u].toLowerCase,M=Math,R=M.max,L=M.min,G=M.abs,E=M.pow,O=M.PI,j="number",z="string",I="array",q="toString",F="fill",P=Object[u][q],V="push",D=/^url\(['"]?([^\)]+?)['"]?\)$/i,$=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,H={NaN:1,Infinity:1,"-Infinity":1},W=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Y=M.round,X="setAttribute",U=parseFloat,Q=parseInt,Z=" progid:DXImageTransform.Microsoft",J=N[u].toUpperCase,K={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},te={along:"along",blur:j,"clip-rect":"csv",cx:j,cy:j,fill:"colour","fill-opacity":j,"font-size":j,height:j,opacity:j,path:"path",r:j,rotation:"csv",rx:j,ry:j,scale:"csv",stroke:"colour","stroke-opacity":j,"stroke-width":j,translation:"csv",width:j,x:j,y:j},ee="replace",ie=/^(from|to|\d+%?)$/,re=/\s*,\s*/,ne={hs:1,rg:1},se=/,?([achlmqrstvxz]),?/gi,ae=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,oe=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,he=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,le=function(t,e){return t.key-e.key};if(t.type=d.SVGAngle||p.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ce,ue=p.createElement("div");if(ue.innerHTML='<v:shape adj="1"/>',ce=ue.firstChild,ce.style.behavior="url(#default#VML)",!ce||"object"!=typeof ce.adj)return t.type=null;ue=null}t.svg=!(t.vml="VML"==t.type),y[u]=t[u],o=y[u],t._id=0,t._oid=0,t.fn={},t.is=function(t,e){return e=S.call(e),"finite"==e?!H[f](+t):"null"==e&&null===t||e==typeof t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||P.call(t).slice(8,-1).toLowerCase()==e},t.angle=function(e,i,r,n,s,a){if(null==s){var o=e-r,h=i-n;return o||h?(180*(0>o)+180*M.atan(-h/-o)/O+360)%360:0}return t.angle(e,i,s,a)-t.angle(r,n,s,a)},t.rad=function(t){return t%360*O/180},t.deg=function(t){return 180*t/O%360},t.snapTo=function(e,i,r){if(r=t.is(r,"finite")?r:10,t.is(e,I)){for(var n=e.length;n--;)if(G(e[n]-i)<=r)return e[n]}else{e=+e;var s=i%e;if(r>s)return i-s;if(s>e-r)return i-s+e}return i},t.setWindow=function(t){d=t,p=d.document};var fe=function(t){if(s.vml){var e,r=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),e=n.body}catch(s){e=createPopup().document.body}var a=e.createTextRange();fe=i(function(t){try{e.style.color=N(t)[ee](r,k);var i=a.queryCommandValue("ForeColor");return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i[q](16)).slice(-6)}catch(t){return"none"}})}else{var o=p.createElement("i");o.title="Raphaël Colour Picker",o.style.display="none",p.body[g](o),fe=i(function(t){return o.style.color=t,p.defaultView.getComputedStyle(o,k).getPropertyValue("color")})}return fe(t)},pe=function(){return"hsb("+[this.h,this.s,this.b]+")"},de=function(){return"hsl("+[this.h,this.s,this.l]+")"},ve=function(){return this.hex};t.hsb2rgb=function(e,i,r,n){return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,i=e.s,e=e.h,n=e.o),t.hsl2rgb(e,i,r/2,n)},t.hsl2rgb=function(e,i,r,n){t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,i=e.s,e=e.h),(e>1||i>1||r>1)&&(e/=360,i/=100,r/=100);var s,a,o,h={},l=["r","g","b"];if(i){s=.5>r?r*(1+i):r+i-r*i,a=2*r-s;for(var c=0;3>c;c++)o=e+1/3*-(c-1),0>o&&o++,o>1&&o--,h[l[c]]=1>6*o?a+6*(s-a)*o:1>2*o?s:2>3*o?a+(s-a)*(2/3-o)*6:a}else h={r:r,g:r,b:r};return h.r*=255,h.g*=255,h.b*=255,h.hex="#"+(16777216|h.b|h.g<<8|h.r<<16).toString(16).slice(1),t.is(n,"finite")&&(h.opacity=n),h.toString=ve,h},t.rgb2hsb=function(e,i,r){if(null==i&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,i=e.g,e=e.r),null==i&&t.is(e,z)){var n=t.getRGB(e);e=n.r,i=n.g,r=n.b}(e>1||i>1||r>1)&&(e/=255,i/=255,r/=255);var s,a,o=R(e,i,r),h=L(e,i,r),l=o;if(h==o)return{h:0,s:0,b:o,toString:pe};var c=o-h;return a=c/o,s=e==o?(i-r)/c:i==o?2+(r-e)/c:4+(e-i)/c,s/=6,0>s&&s++,s>1&&s--,{h:s,s:a,b:l,toString:pe}},t.rgb2hsl=function(e,i,r){if(null==i&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,i=e.g,e=e.r),null==i&&t.is(e,z)){var n=t.getRGB(e);e=n.r,i=n.g,r=n.b}(e>1||i>1||r>1)&&(e/=255,i/=255,r/=255);var s,a,o,h=R(e,i,r),l=L(e,i,r),c=(h+l)/2;if(l==h)o={h:0,s:0,l:c};else{var u=h-l;a=.5>c?u/(h+l):u/(2-h-l),s=e==h?(i-r)/u:i==h?2+(r-e)/u:4+(e-i)/u,s/=6,0>s&&s++,s>1&&s--,o={h:s,s:a,l:c}}return o.toString=de,o},t._path2string=function(){return this.join(",")[ee](se,"$1")},t.getRGB=i(function(e){if(!e||(e=N(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none"};!(ne[f](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=fe(e));var i,r,n,s,a,o,h=e.match($);return h?(h[2]&&(n=Q(h[2].substring(5),16),r=Q(h[2].substring(3,5),16),i=Q(h[2].substring(1,3),16)),h[3]&&(n=Q((a=h[3].charAt(3))+a,16),r=Q((a=h[3].charAt(2))+a,16),i=Q((a=h[3].charAt(1))+a,16)),h[4]&&(o=h[4][_](re),i=U(o[0]),"%"==o[0].slice(-1)&&(i*=2.55),r=U(o[1]),"%"==o[1].slice(-1)&&(r*=2.55),n=U(o[2]),"%"==o[2].slice(-1)&&(n*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(s=U(o[3])),o[3]&&"%"==o[3].slice(-1)&&(s/=100)),h[5]?(o=h[5][_](re),i=U(o[0]),"%"==o[0].slice(-1)&&(i*=2.55),r=U(o[1]),"%"==o[1].slice(-1)&&(r*=2.55),n=U(o[2]),"%"==o[2].slice(-1)&&(n*=2.55),("deg"==o[0].slice(-3)||"°"==o[0].slice(-1))&&(i/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(s=U(o[3])),o[3]&&"%"==o[3].slice(-1)&&(s/=100),t.hsb2rgb(i,r,n,s)):h[6]?(o=h[6][_](re),i=U(o[0]),"%"==o[0].slice(-1)&&(i*=2.55),r=U(o[1]),"%"==o[1].slice(-1)&&(r*=2.55),n=U(o[2]),"%"==o[2].slice(-1)&&(n*=2.55),("deg"==o[0].slice(-3)||"°"==o[0].slice(-1))&&(i/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(s=U(o[3])),o[3]&&"%"==o[3].slice(-1)&&(s/=100),t.hsl2rgb(i,r,n,s)):(h={r:i,g:r,b:n},h.hex="#"+(16777216|n|r<<8|i<<16).toString(16).slice(1),t.is(s,"finite")&&(h.opacity=s),h)):{r:-1,g:-1,b:-1,hex:"none",error:1}},t),t.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),i.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=i(function(e){if(!e)return null;var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return t.is(e,I)&&t.is(e[0],I)&&(r=ge(e)),r[B]||N(e)[ee](ae,function(t,e,n){var s=[],a=S.call(e);for(n[ee](oe,function(t,e){e&&s[V](+e)}),"m"==a&&s[B]>2&&(r[V]([e][x](s.splice(0,2))),a="l",e="m"==e?"l":"L");s[B]>=i[a]&&(r[V]([e][x](s.splice(0,i[a]))),i[a]););}),r[q]=t._path2string,r}),t.findDotsAtSegment=function(t,e,i,r,n,s,a,o,h){var l=1-h,c=E(l,3)*t+3*E(l,2)*h*i+3*l*h*h*n+E(h,3)*a,u=E(l,3)*e+3*E(l,2)*h*r+3*l*h*h*s+E(h,3)*o,f=t+2*h*(i-t)+h*h*(n-2*i+t),p=e+2*h*(r-e)+h*h*(s-2*r+e),d=i+2*h*(n-i)+h*h*(a-2*n+i),v=r+2*h*(s-r)+h*h*(o-2*s+r),y=(1-h)*t+h*i,g=(1-h)*e+h*r,m=(1-h)*n+h*a,x=(1-h)*s+h*o,b=90-180*M.atan((f-d)/(p-v))/O;return(f>d||v>p)&&(b+=180),{x:c,y:u,m:{x:f,y:p},n:{x:d,y:v},start:{x:y,y:g},end:{x:m,y:x},alpha:b}};var ye=i(function(t){if(!t)return{x:0,y:0,width:0,height:0};t=Ce(t);for(var e,i=0,r=0,n=[],s=[],a=0,o=t[B];o>a;a++)if(e=t[a],"M"==e[0])i=e[1],r=e[2],n[V](i),s[V](r);else{var h=_e(i,r,e[1],e[2],e[3],e[4],e[5],e[6]);n=n[x](h.min.x,h.max.x),s=s[x](h.min.y,h.max.y),i=e[5],r=e[6]}var l=L[m](0,n),c=L[m](0,s);return{x:l,y:c,width:R[m](0,n)-l,height:R[m](0,s)-c}}),ge=function(e){var i=[];t.is(e,I)&&t.is(e&&e[0],I)||(e=t.parsePathString(e));for(var r=0,n=e[B];n>r;r++){i[r]=[];for(var s=0,a=e[r][B];a>s;s++)i[r][s]=e[r][s]}return i[q]=t._path2string,i},me=i(function(e){t.is(e,I)&&t.is(e&&e[0],I)||(e=t.parsePathString(e));var i=[],r=0,n=0,s=0,a=0,o=0;"M"==e[0][0]&&(r=e[0][1],n=e[0][2],s=r,a=n,o++,i[V](["M",r,n]));for(var h=o,l=e[B];l>h;h++){var c=i[h]=[],u=e[h];if(u[0]!=S.call(u[0]))switch(c[0]=S.call(u[0]),c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-r).toFixed(3),c[7]=+(u[7]-n).toFixed(3);break;case"v":c[1]=+(u[1]-n).toFixed(3);break;case"m":s=u[1],a=u[2];default:for(var f=1,p=u[B];p>f;f++)c[f]=+(u[f]-(f%2?r:n)).toFixed(3)}else{c=i[h]=[],"m"==u[0]&&(s=u[1]+r,a=u[2]+n);for(var d=0,v=u[B];v>d;d++)i[h][d]=u[d]}var y=i[h][B];switch(i[h][0]){case"z":r=s,n=a;break;case"h":r+=+i[h][y-1];break;case"v":n+=+i[h][y-1];break;default:r+=+i[h][y-2],n+=+i[h][y-1]}}return i[q]=t._path2string,i},0,ge),xe=i(function(e){t.is(e,I)&&t.is(e&&e[0],I)||(e=t.parsePathString(e));var i=[],r=0,n=0,s=0,a=0,o=0;"M"==e[0][0]&&(r=+e[0][1],n=+e[0][2],s=r,a=n,o++,i[0]=["M",r,n]);for(var h=o,l=e[B];l>h;h++){var c=i[h]=[],u=e[h];if(u[0]!=J.call(u[0]))switch(c[0]=J.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+r),c[7]=+(u[7]+n);break;case"V":c[1]=+u[1]+n;break;case"H":c[1]=+u[1]+r;break;case"M":s=+u[1]+r,a=+u[2]+n;default:for(var f=1,p=u[B];p>f;f++)c[f]=+u[f]+(f%2?r:n)}else for(var d=0,v=u[B];v>d;d++)i[h][d]=u[d];switch(c[0]){case"Z":r=s,n=a;break;case"H":r=c[1];break;case"V":n=c[1];break;case"M":s=i[h][i[h][B]-2],a=i[h][i[h][B]-1];default:r=i[h][i[h][B]-2],n=i[h][i[h][B]-1]}}return i[q]=t._path2string,i},null,ge),be=function(t,e,i,r){return[t,e,i,r,i,r]},ke=function(t,e,i,r,n,s){var a=1/3,o=2/3;return[a*t+o*i,a*e+o*r,a*n+o*i,a*s+o*r,n,s]},we=function(t,e,r,n,s,a,o,h,l,c){var u,f=120*O/180,p=O/180*(+s||0),d=[],v=i(function(t,e,i){var r=t*M.cos(i)-e*M.sin(i),n=t*M.sin(i)+e*M.cos(i);return{x:r,y:n}});if(c)T=c[0],S=c[1],N=c[2],C=c[3];else{u=v(t,e,-p),t=u.x,e=u.y,u=v(h,l,-p),h=u.x,l=u.y;var y=(M.cos(O/180*s),M.sin(O/180*s),(t-h)/2),g=(e-l)/2,m=y*y/(r*r)+g*g/(n*n);m>1&&(m=M.sqrt(m),r=m*r,n=m*n);var b=r*r,k=n*n,w=(a==o?-1:1)*M.sqrt(G((b*k-b*g*g-k*y*y)/(b*g*g+k*y*y))),N=w*r*g/n+(t+h)/2,C=w*-n*y/r+(e+l)/2,T=M.asin(((e-C)/n).toFixed(9)),S=M.asin(((l-C)/n).toFixed(9));T=N>t?O-T:T,S=N>h?O-S:S,0>T&&(T=2*O+T),0>S&&(S=2*O+S),o&&T>S&&(T-=2*O),!o&&S>T&&(S-=2*O)}var R=S-T;if(G(R)>f){var L=S,E=h,j=l;S=T+f*(o&&S>T?1:-1),h=N+r*M.cos(S),l=C+n*M.sin(S),d=we(h,l,r,n,s,0,o,E,j,[S,L,N,C])}R=S-T;var z=M.cos(T),I=M.sin(T),q=M.cos(S),F=M.sin(S),P=M.tan(R/4),V=4/3*r*P,D=4/3*n*P,$=[t,e],H=[t+V*I,e-D*z],W=[h+V*F,l-D*q],Y=[h,l];if(H[0]=2*$[0]-H[0],H[1]=2*$[1]-H[1],c)return[H,W,Y][x](d);d=[H,W,Y][x](d)[A]()[_](",");for(var X=[],U=0,Q=d[B];Q>U;U++)X[U]=U%2?v(d[U-1],d[U],p).y:v(d[U],d[U+1],p).x;return X},Ne=function(t,e,i,r,n,s,a,o,h){var l=1-h;return{x:E(l,3)*t+3*E(l,2)*h*i+3*l*h*h*n+E(h,3)*a,y:E(l,3)*e+3*E(l,2)*h*r+3*l*h*h*s+E(h,3)*o}},_e=i(function(t,e,i,r,n,s,a,o){var h,l=n-2*i+t-(a-2*n+i),c=2*(i-t)-2*(n-i),u=t-i,f=(-c+M.sqrt(c*c-4*l*u))/2/l,p=(-c-M.sqrt(c*c-4*l*u))/2/l,d=[e,o],v=[t,a];return G(f)>"1e12"&&(f=.5),G(p)>"1e12"&&(p=.5),f>0&&1>f&&(h=Ne(t,e,i,r,n,s,a,o,f),v[V](h.x),d[V](h.y)),p>0&&1>p&&(h=Ne(t,e,i,r,n,s,a,o,p),v[V](h.x),d[V](h.y)),l=s-2*r+e-(o-2*s+r),c=2*(r-e)-2*(s-r),u=e-r,f=(-c+M.sqrt(c*c-4*l*u))/2/l,p=(-c-M.sqrt(c*c-4*l*u))/2/l,G(f)>"1e12"&&(f=.5),G(p)>"1e12"&&(p=.5),f>0&&1>f&&(h=Ne(t,e,i,r,n,s,a,o,f),v[V](h.x),d[V](h.y)),p>0&&1>p&&(h=Ne(t,e,i,r,n,s,a,o,p),v[V](h.x),d[V](h.y)),{min:{x:L[m](0,v),y:L[m](0,d)},max:{x:R[m](0,v),y:R[m](0,d)}}}),Ce=i(function(t,e){for(var i=xe(t),r=e&&xe(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(t,e){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][x](we[m](0,[e.x,e.y][x](t.slice(1))));break;case"S":i=e.x+(e.x-(e.bx||e.x)),r=e.y+(e.y-(e.by||e.y)),t=["C",i,r][x](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][x](ke(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][x](ke(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][x](be(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][x](be(e.x,e.y,t[1],e.y));break;case"V":t=["C"][x](be(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][x](be(e.x,e.y,e.X,e.Y))}return t}),o=function(t,e){if(t[e][B]>7){t[e].shift();for(var n=t[e];n[B];)t.splice(e++,0,["C"][x](n.splice(0,6)));t.splice(e,1),c=R(i[B],r&&r[B]||0)}},h=function(t,e,n,s,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=t[a][1],n.y=t[a][2],c=R(i[B],r&&r[B]||0))},l=0,c=R(i[B],r&&r[B]||0);c>l;l++){i[l]=a(i[l],n),o(i,l),r&&(r[l]=a(r[l],s)),r&&o(r,l),h(i,r,n,s,l),h(r,i,s,n,l);var u=i[l],f=r&&r[l],p=u[B],d=r&&f[B];n.x=u[p-2],n.y=u[p-1],n.bx=U(u[p-4])||n.x,n.by=U(u[p-3])||n.y,s.bx=r&&(U(f[d-4])||s.x),s.by=r&&(U(f[d-3])||s.y),s.x=r&&f[d-2],s.y=r&&f[d-1]}return r?[i,r]:i},null,ge),Te=i(function(e){for(var i=[],r=0,n=e[B];n>r;r++){var s={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(s.color=t.getRGB(a[1]),s.color.error)return null;s.color=s.color.hex,a[2]&&(s.offset=a[2]+"%"),i[V](s)}for(r=1,n=i[B]-1;n>r;r++)if(!i[r].offset){for(var o=U(i[r-1].offset||0),h=0,l=r+1;n>l;l++)if(i[l].offset){h=i[l].offset;break}h||(h=100,l=n),h=U(h);for(var c=(h-o)/(l-r+1);l>r;r++)o+=c,i[r].offset=o+"%"}return i}),Ae=function(e,i,r,n){var s;return t.is(e,z)||t.is(e,"object")?(s=t.is(e,z)?p.getElementById(e):e,s.tagName?null==i?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:i,height:r}:void 0):{container:1,x:e,y:i,width:r,height:n}},Be=function(t,e){var i=this;for(var r in e)if(e[f](r)&&!(r in t))switch(typeof e[r]){case"function":!function(e){t[r]=t===i?e:function(){return e[m](i,arguments)}}(e[r]);break;case"object":t[r]=t[r]||{},Be.call(this,t[r],e[r]);break;default:t[r]=e[r]}},Se=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},Me=function(t,e){e.top!==t&&(Se(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},Re=function(t,e){e.bottom!==t&&(Se(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},Le=function(t,e,i){Se(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},Ge=function(t,e,i){Se(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},Ee=function(t){return function(){throw new Error("Raphaël: you are calling to method “"+t+"” of removed object")}};if(t.pathToRelative=me,t.svg){o.svgns="http://www.w3.org/2000/svg",o.xlink="http://www.w3.org/1999/xlink",Y=function(t){return+t+.5*(~~t===t)};var Oe=function(t,e){if(!e)return t=p.createElementNS(o.svgns,t),t.style.webkitTapHighlightColor="rgba(0,0,0,0)",t;for(var i in e)e[f](i)&&t[X](i,N(e[i]))};t[q]=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var je=function(t,e){var i=Oe("path");e.canvas&&e.canvas[g](i);var r=new Ve(i,e);return r.type="path",qe(r,{fill:"none",stroke:"#000",path:t}),r},ze=function(t,i,r){var n="linear",s=.5,a=.5,o=t.style;if(i=N(i)[ee](he,function(t,e,i){if(n="radial",e&&i){s=U(e),a=U(i);var r=2*(a>.5)-1;E(s-.5,2)+E(a-.5,2)>.25&&(a=M.sqrt(.25-E(s-.5,2))*r+.5)&&.5!=a&&(a=a.toFixed(5)-1e-5*r)}return k}),i=i[_](/\s*\-\s*/),"linear"==n){var h=i.shift();if(h=-U(h),isNaN(h))return null;var l=[0,0,M.cos(h*O/180),M.sin(h*O/180)],c=1/(R(G(l[2]),G(l[3]))||1);l[2]*=c,l[3]*=c,l[2]<0&&(l[0]=-l[2],l[2]=0),l[3]<0&&(l[1]=-l[3],l[3]=0)}var u=Te(i);if(!u)return null;var f=t.getAttribute(F);f=f.match(/^url\(#(.*)\)$/),f&&r.defs.removeChild(p.getElementById(f[1]));var d=Oe(n+"Gradient");d.id=e(),Oe(d,"radial"==n?{fx:s,fy:a}:{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),r.defs[g](d);for(var v=0,y=u[B];y>v;v++){var m=Oe("stop");Oe(m,{offset:u[v].offset?u[v].offset:v?"100%":"0%","stop-color":u[v].color||"#fff"}),d[g](m)}return Oe(t,{fill:"url(#"+d.id+")",opacity:1,"fill-opacity":1}),o.fill=k,o.opacity=1,o.fillOpacity=1,1},Ie=function(e){var i=e.getBBox();Oe(e.pattern,{patternTransform:t.format("translate({0},{1})",i.x,i.y)})},qe=function(i,r){var n={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},s=i.node,a=i.attrs,o=i.rotate(),l=function(t,e){if(e=n[S.call(e)]){for(var i=t.attrs["stroke-width"]||"1",a={round:i,square:i,butt:0}[t.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],h=e[B];h--;)o[h]=e[h]*i+(h%2?1:-1)*a;Oe(s,{"stroke-dasharray":o[A](",")})}};r[f]("rotation")&&(o=r.rotation);var c=N(o)[_](h);c.length-1?(c[1]=+c[1],c[2]=+c[2]):c=null,U(o)&&i.rotate(0,!0);for(var u in r)if(r[f](u)){if(!K[f](u))continue;var d=r[u];switch(a[u]=d,u){case"blur":i.blur(d);break;case"rotation":i.rotate(d,!0);break;case"href":case"title":case"target":var v=s.parentNode;if("a"!=S.call(v.tagName)){var y=Oe("a");v.insertBefore(y,s),y[g](s),v=y}"target"==u&&"blank"==d?v.setAttributeNS(i.paper.xlink,"show","new"):v.setAttributeNS(i.paper.xlink,u,d);break;case"cursor":s.style.cursor=d;break;case"clip-rect":var m=N(d)[_](h);if(4==m[B]){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var x=Oe("clipPath"),b=Oe("rect");x.id=e(),Oe(b,{x:m[0],y:m[1],width:m[2],height:m[3]}),x[g](b),i.paper.defs[g](x),Oe(s,{"clip-path":"url(#"+x.id+")"}),i.clip=b}if(!d){var C=p.getElementById(s.getAttribute("clip-path")[ee](/(^url\(#|\)$)/g,k));C&&C.parentNode.removeChild(C),Oe(s,{"clip-path":k}),delete i.clip}break;case"path":"path"==i.type&&Oe(s,{d:d?a.path=xe(d):"M0,0"});break;case"width":if(s[X](u,d),!a.fx)break;u="x",d=a.x;case"x":a.fx&&(d=-a.x-(a.width||0));case"rx":if("rx"==u&&"rect"==i.type)break;case"cx":c&&("x"==u||"cx"==u)&&(c[1]+=d-a[u]),s[X](u,d),i.pattern&&Ie(i);break;case"height":if(s[X](u,d),!a.fy)break;u="y",d=a.y;case"y":a.fy&&(d=-a.y-(a.height||0));case"ry":if("ry"==u&&"rect"==i.type)break;case"cy":c&&("y"==u||"cy"==u)&&(c[2]+=d-a[u]),s[X](u,d),i.pattern&&Ie(i);break;case"r":"rect"==i.type?Oe(s,{rx:d,ry:d}):s[X](u,d);break;case"src":"image"==i.type&&s.setAttributeNS(i.paper.xlink,"href",d);break;case"stroke-width":s.style.strokeWidth=d,s[X](u,d),a["stroke-dasharray"]&&l(i,a["stroke-dasharray"]);break;case"stroke-dasharray":l(i,d);break;case"translation":var T=N(d)[_](h);T[0]=+T[0]||0,T[1]=+T[1]||0,c&&(c[1]+=T[0],c[2]+=T[1]),Ai.call(i,T[0],T[1]);break;case"scale":T=N(d)[_](h),i.scale(+T[0]||1,+T[1]||+T[0]||1,isNaN(U(T[2]))?null:+T[2],isNaN(U(T[3]))?null:+T[3]);break;case F:var M=N(d).match(D);if(M){x=Oe("pattern");var R=Oe("image");x.id=e(),Oe(x,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Oe(R,{x:0,y:0}),R.setAttributeNS(i.paper.xlink,"href",M[1]),x[g](R);var L=p.createElement("img");L.style.cssText="position:absolute;left:-9999em;top-9999em",L.onload=function(){Oe(x,{width:this.offsetWidth,height:this.offsetHeight}),Oe(R,{width:this.offsetWidth,height:this.offsetHeight}),p.body.removeChild(this),i.paper.safari()},p.body[g](L),L.src=M[1],i.paper.defs[g](x),s.style.fill="url(#"+x.id+")",Oe(s,{fill:"url(#"+x.id+")"}),i.pattern=x,i.pattern&&Ie(i);break}var G=t.getRGB(d);if(G.error){if(({circle:1,ellipse:1}[f](i.type)||"r"!=N(d).charAt())&&ze(s,d,i.paper)){a.gradient=d,a.fill="none";break}delete r.gradient,delete a.gradient,!t.is(a.opacity,"undefined")&&t.is(r.opacity,"undefined")&&Oe(s,{opacity:a.opacity}),!t.is(a["fill-opacity"],"undefined")&&t.is(r["fill-opacity"],"undefined")&&Oe(s,{"fill-opacity":a["fill-opacity"]})}G[f]("opacity")&&Oe(s,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=t.getRGB(d),s[X](u,G.hex),"stroke"==u&&G[f]("opacity")&&Oe(s,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity});break;case"gradient":(({circle:1,ellipse:1})[f](i.type)||"r"!=N(d).charAt())&&ze(s,d,i.paper);break;case"opacity":a.gradient&&!a[f]("stroke-opacity")&&Oe(s,{"stroke-opacity":d>1?d/100:d});case"fill-opacity":if(a.gradient){var E=p.getElementById(s.getAttribute(F)[ee](/^url\(#|\)$/g,k));if(E){var O=E.getElementsByTagName("stop");O[O[B]-1][X]("stop-opacity",d)}break}default:"font-size"==u&&(d=Q(d,10)+"px");var j=u[ee](/(\-.)/g,function(t){return J.call(t.substring(1))});s.style[j]=d,s[X](u,d)}}Pe(i,r),c?i.rotate(c.join(w)):U(o)&&i.rotate(o,!0)},Fe=1.2,Pe=function(e,i){if("text"==e.type&&(i[f]("text")||i[f]("font")||i[f]("font-size")||i[f]("x")||i[f]("y"))){var r=e.attrs,n=e.node,s=n.firstChild?Q(p.defaultView.getComputedStyle(n.firstChild,k).getPropertyValue("font-size"),10):10;if(i[f]("text")){for(r.text=i.text;n.firstChild;)n.removeChild(n.firstChild);for(var a=N(i.text)[_]("\n"),o=0,h=a[B];h>o;o++)if(a[o]){var l=Oe("tspan");o&&Oe(l,{dy:s*Fe,x:r.x}),l[g](p.createTextNode(a[o])),n[g](l)}}else for(a=n.getElementsByTagName("tspan"),o=0,h=a[B];h>o;o++)o&&Oe(a[o],{dy:s*Fe,x:r.x});Oe(n,{y:r.y});var c=e.getBBox(),u=r.y-(c.y+c.height/2);u&&t.is(u,"finite")&&Oe(n,{y:r.y+u})}},Ve=function(e,i){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.paper=i,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},De=Ve[u];Ve[u].rotate=function(e,i,r){if(this.removed)return this;if(null==e)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][A](w):this._.rt.deg;var n=this.getBBox();return e=N(e)[_](h),e[B]-1&&(i=U(e[1]),r=U(e[2])),e=U(e[0]),null!=i&&i!==!1?this._.rt.deg=e:this._.rt.deg+=e,null==r&&(i=null),this._.rt.cx=i,this._.rt.cy=r,i=null==i?n.x+n.width/2:i,r=null==r?n.y+n.height/2:r,this._.rt.deg?(this.transformations[0]=t.format("rotate({0} {1} {2})",this._.rt.deg,i,r),this.clip&&Oe(this.clip,{transform:t.format("rotate({0} {1} {2})",-this._.rt.deg,i,r)})):(this.transformations[0]=k,this.clip&&Oe(this.clip,{transform:k})),Oe(this.node,{transform:this.transformations[A](w)}),this},Ve[u].hide=function(){return!this.removed&&(this.node.style.display="none"),this},Ve[u].show=function(){return!this.removed&&(this.node.style.display=""),this},Ve[u].remove=function(){if(!this.removed){Se(this,this.paper),this.node.parentNode.removeChild(this.node);for(var t in this)delete this[t];this.removed=!0}},Ve[u].getBBox=function(){if(this.removed)return this;if("path"==this.type)return ye(this.attrs.path);if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}if("text"==this.type){e={x:e.x,y:1/0,width:0,height:0};for(var i=0,r=this.node.getNumberOfChars();r>i;i++){var n=this.node.getExtentOfChar(i);n.y<e.y&&(e.y=n.y),n.y+n.height-e.y>e.height&&(e.height=n.y+n.height-e.y),n.x+n.width-e.x>e.width&&(e.width=n.x+n.width-e.x)}}return t&&this.hide(),e},Ve[u].attr=function(e,i){if(this.removed)return this;if(null==e){var r={};for(var n in this.attrs)this.attrs[f](n)&&(r[n]=this.attrs[n]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==i&&t.is(e,z))return"translation"==e?Ai.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==F&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(null==i&&t.is(e,I)){for(var s={},a=0,o=e.length;o>a;a++)s[e[a]]=this.attr(e[a]);return s}if(null!=i){var h={};h[e]=i}else null!=e&&t.is(e,"object")&&(h=e);for(var l in this.paper.customAttributes)if(this.paper.customAttributes[f](l)&&h[f](l)&&t.is(this.paper.customAttributes[l],"function")){var c=this.paper.customAttributes[l].apply(this,[][x](h[l]));this.attrs[l]=h[l];for(var u in c)c[f](u)&&(h[u]=c[u])}return qe(this,h),this},Ve[u].toFront=function(){if(this.removed)return this;this.node.parentNode[g](this.node);var t=this.paper;return t.top!=this&&Me(this,t),this},Ve[u].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Re(this,this.paper);{this.paper}}return this},Ve[u].insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode[g](this.node),Le(this,t,this.paper),this},Ve[u].insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),Ge(this,t,this.paper),this},Ve[u].blur=function(t){var i=this;if(0!==+t){var r=Oe("filter"),n=Oe("feGaussianBlur");i.attrs.blur=t,r.id=e(),Oe(n,{stdDeviation:+t||1.5}),r.appendChild(n),i.paper.defs.appendChild(r),i._blur=r,Oe(i.node,{filter:"url(#"+r.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter")};var $e=function(t,e,i,r){var n=Oe("circle");t.canvas&&t.canvas[g](n);var s=new Ve(n,t);return s.attrs={cx:e,cy:i,r:r,fill:"none",stroke:"#000"},s.type="circle",Oe(n,s.attrs),s},He=function(t,e,i,r,n,s){var a=Oe("rect");t.canvas&&t.canvas[g](a);var o=new Ve(a,t);return o.attrs={x:e,y:i,width:r,height:n,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},o.type="rect",Oe(a,o.attrs),o},We=function(t,e,i,r,n){var s=Oe("ellipse");t.canvas&&t.canvas[g](s);var a=new Ve(s,t);return a.attrs={cx:e,cy:i,rx:r,ry:n,fill:"none",stroke:"#000"},a.type="ellipse",Oe(s,a.attrs),a},Ye=function(t,e,i,r,n,s){var a=Oe("image");Oe(a,{x:i,y:r,width:n,height:s,preserveAspectRatio:"none"}),a.setAttributeNS(t.xlink,"href",e),t.canvas&&t.canvas[g](a);var o=new Ve(a,t);return o.attrs={x:i,y:r,width:n,height:s,src:e},o.type="image",o},Xe=function(t,e,i,r){var n=Oe("text");Oe(n,{x:e,y:i,"text-anchor":"middle"}),t.canvas&&t.canvas[g](n);var s=new Ve(n,t);return s.attrs={x:e,y:i,"text-anchor":"middle",text:r,font:K.font,stroke:"none",fill:"#000"},s.type="text",qe(s,s.attrs),s},Ue=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas[X]("width",this.width),this.canvas[X]("height",this.height),this},Qe=function(){var e=Ae[m](0,arguments),i=e&&e.container,r=e.x,n=e.y,s=e.width,a=e.height;if(!i)throw new Error("SVG container not found.");var o=Oe("svg");return r=r||0,n=n||0,s=s||512,a=a||342,Oe(o,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:s,height:a}),1==i?(o.style.cssText="position:absolute;left:"+r+"px;top:"+n+"px",p.body[g](o)):i.firstChild?i.insertBefore(o,i.firstChild):i[g](o),i=new y,i.width=s,i.height=a,i.canvas=o,Be.call(i,i,t.fn),i.clear(),i};o.clear=function(){for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=Oe("desc"))[g](p.createTextNode("Created with Raphaël")),t[g](this.desc),t[g](this.defs=Oe("defs"))},o.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=Ee(t)}}if(t.vml){var Ze={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Je=/([clmz]),?([^clmz]*)/gi,Ke=/ progid:\S+Blur\([^\)]+\)/g,ti=/-?[^,\s-]+/g,ei=1e3+w+1e3,ri=10,ni={path:1,rect:1},si=function(t){var e=/[ahqstv]/gi,i=xe;if(N(t).match(e)&&(i=Ce),e=/[clmz]/g,i==xe&&!N(t).match(e)){var r=N(t)[ee](Je,function(t,e,i){var r=[],n="m"==S.call(e),s=Ze[e];return i[ee](ti,function(t){n&&2==r[B]&&(s+=r+Ze["m"==e?"l":"L"],r=[]),r[V](Y(t*ri))}),s+r});return r}var n,s,a=i(t);r=[];for(var o=0,h=a[B];h>o;o++){n=a[o],s=S.call(a[o][0]),"z"==s&&(s="x");for(var l=1,c=n[B];c>l;l++)s+=Y(n[l]*ri)+(l!=c-1?",":k);r[V](s)}return r[A](w)};t[q]=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},je=function(t,e){var i=ai("group");i.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",i.coordsize=e.coordsize,i.coordorigin=e.coordorigin;var r=ai("shape"),n=r.style;n.width=e.width+"px",n.height=e.height+"px",r.coordsize=ei,r.coordorigin=e.coordorigin,i[g](r);var s=new Ve(r,i,e),a={fill:"none",stroke:"#000"};return t&&(a.path=t),s.type="path",s.path=[],s.Path=k,qe(s,a),e.canvas[g](i),s},qe=function(e,i){e.attrs=e.attrs||{};var n,s=e.node,a=e.attrs,o=s.style,l=(i.x!=a.x||i.y!=a.y||i.width!=a.width||i.height!=a.height||i.r!=a.r)&&"rect"==e.type,c=e;for(var u in i)i[f](u)&&(a[u]=i[u]);if(l&&(a.path=r(a.x,a.y,a.width,a.height,a.r),e.X=a.x,e.Y=a.y,e.W=a.width,e.H=a.height),i.href&&(s.href=i.href),i.title&&(s.title=i.title),i.target&&(s.target=i.target),i.cursor&&(o.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||l)&&(s.path=si(a.path)),null!=i.rotation&&e.rotate(i.rotation,!0),i.translation&&(n=N(i.translation)[_](h),Ai.call(e,n[0],n[1]),null!=e._.rt.cx&&(e._.rt.cx+=+n[0],e._.rt.cy+=+n[1],e.setBox(e.attrs,n[0],n[1]))),i.scale&&(n=N(i.scale)[_](h),e.scale(+n[0]||1,+n[1]||+n[0]||1,+n[2]||null,+n[3]||null)),"clip-rect"in i){var d=N(i["clip-rect"])[_](h);if(4==d[B]){d[2]=+d[2]+ +d[0],d[3]=+d[3]+ +d[1];var v=s.clipRect||p.createElement("div"),y=v.style,m=s.parentNode;y.clip=t.format("rect({1}px {2}px {3}px {0}px)",d),s.clipRect||(y.position="absolute",y.top=0,y.left=0,y.width=e.paper.width+"px",y.height=e.paper.height+"px",m.parentNode.insertBefore(v,m),v[g](m),s.clipRect=v)}i["clip-rect"]||s.clipRect&&(s.clipRect.style.clip=k)}if("image"==e.type&&i.src&&(s.src=i.src),"image"==e.type&&i.opacity&&(s.filterOpacity=Z+".Alpha(opacity="+100*i.opacity+")",o.filter=(s.filterMatrix||k)+(s.filterOpacity||k)),i.font&&(o.font=i.font),i["font-family"]&&(o.fontFamily='"'+i["font-family"][_](",")[0][ee](/^['"]+|['"]+$/g,k)+'"'),i["font-size"]&&(o.fontSize=i["font-size"]),i["font-weight"]&&(o.fontWeight=i["font-weight"]),i["font-style"]&&(o.fontStyle=i["font-style"]),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){s=e.shape||s;var x=s.getElementsByTagName(F)&&s.getElementsByTagName(F)[0],b=!1;if(!x&&(b=x=ai(F)),"fill-opacity"in i||"opacity"in i){var w=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+t.getRGB(i.fill).o+1||2)-1);w=L(R(w,0),1),x.opacity=w}if(i.fill&&(x.on=!0),(null==x.on||"none"==i.fill)&&(x.on=!1),x.on&&i.fill){var C=i.fill.match(D);C?(x.src=C[1],x.type="tile"):(x.color=t.getRGB(i.fill).hex,x.src=k,x.type="solid",t.getRGB(i.fill).error&&(c.type in{circle:1,ellipse:1}||"r"!=N(i.fill).charAt())&&ze(c,i.fill)&&(a.fill="none",a.gradient=i.fill))}b&&s[g](x);var T=s.getElementsByTagName("stroke")&&s.getElementsByTagName("stroke")[0],A=!1;!T&&(A=T=ai("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(T.on=!0),("none"==i.stroke||null==T.on||0==i.stroke||0==i["stroke-width"])&&(T.on=!1);
var S=t.getRGB(i.stroke);T.on&&i.stroke&&(T.color=S.hex),w=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+S.o+1||2)-1);var M=.75*(U(i["stroke-width"])||1);if(w=L(R(w,0),1),null==i["stroke-width"]&&(M=a["stroke-width"]),i["stroke-width"]&&(T.weight=M),M&&1>M&&(w*=M)&&(T.weight=1),T.opacity=w,i["stroke-linejoin"]&&(T.joinstyle=i["stroke-linejoin"]||"miter"),T.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(T.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),i["stroke-dasharray"]){var G={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};T.dashstyle=G[f](i["stroke-dasharray"])?G[i["stroke-dasharray"]]:k}A&&s[g](T)}if("text"==c.type)switch(o=c.paper.span.style,a.font&&(o.font=a.font),a["font-family"]&&(o.fontFamily=a["font-family"]),a["font-size"]&&(o.fontSize=a["font-size"]),a["font-weight"]&&(o.fontWeight=a["font-weight"]),a["font-style"]&&(o.fontStyle=a["font-style"]),c.node.string&&(c.paper.span.innerHTML=N(c.node.string)[ee](/</g,"&#60;")[ee](/&/g,"&#38;")[ee](/\n/g,"<br>")),c.W=a.w=c.paper.span.offsetWidth,c.H=a.h=c.paper.span.offsetHeight,c.X=a.x,c.Y=a.y+Y(c.H/2),a["text-anchor"]){case"start":c.node.style["v-text-align"]="left",c.bbx=Y(c.W/2);break;case"end":c.node.style["v-text-align"]="right",c.bbx=-Y(c.W/2);break;default:c.node.style["v-text-align"]="center"}},ze=function(t,e){t.attrs=t.attrs||{};var i,r=(t.attrs,"linear"),n=".5 .5";if(t.attrs.gradient=e,e=N(e)[ee](he,function(t,e,i){return r="radial",e&&i&&(e=U(e),i=U(i),E(e-.5,2)+E(i-.5,2)>.25&&(i=M.sqrt(.25-E(e-.5,2))*(2*(i>.5)-1)+.5),n=e+w+i),k}),e=e[_](/\s*\-\s*/),"linear"==r){var s=e.shift();if(s=-U(s),isNaN(s))return null}var a=Te(e);if(!a)return null;if(t=t.shape||t.node,i=t.getElementsByTagName(F)[0]||ai(F),!i.parentNode&&t.appendChild(i),a[B]){i.on=!0,i.method="none",i.color=a[0].color,i.color2=a[a[B]-1].color;for(var o=[],h=0,l=a[B];l>h;h++)a[h].offset&&o[V](a[h].offset+w+a[h].color);i.colors&&(i.colors.value=o[B]?o[A]():"0% "+i.color),"radial"==r?(i.type="gradientradial",i.focus="100%",i.focussize=n,i.focusposition=n):(i.type="gradient",i.angle=(270-s)%360)}return 1},Ve=function(e,i,r){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=i,this.paper=r,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},De=Ve[u],De.rotate=function(t,e,i){return this.removed?this:null==t?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][A](w):this._.rt.deg:(t=N(t)[_](h),t[B]-1&&(e=U(t[1]),i=U(t[2])),t=U(t[0]),null!=e?this._.rt.deg=t:this._.rt.deg+=t,null==i&&(e=null),this._.rt.cx=e,this._.rt.cy=i,this.setBox(this.attrs,e,i),this.Group.style.rotation=this._.rt.deg,this)},De.setBox=function(t,e,i){if(this.removed)return this;var r=this.Group.style,n=this.shape&&this.shape.style||this.node.style;t=t||{};for(var s in t)t[f](s)&&(this.attrs[s]=t[s]);e=e||this._.rt.cx,i=i||this._.rt.cy;var a,o,h,l,c=this.attrs;switch(this.type){case"circle":a=c.cx-c.r,o=c.cy-c.r,h=l=2*c.r;break;case"ellipse":a=c.cx-c.rx,o=c.cy-c.ry,h=2*c.rx,l=2*c.ry;break;case"image":a=+c.x,o=+c.y,h=c.width||0,l=c.height||0;break;case"text":this.textpath.v=["m",Y(c.x),", ",Y(c.y-2),"l",Y(c.x)+1,", ",Y(c.y-2)][A](k),a=c.x-Y(this.W/2),o=c.y-this.H/2,h=this.W,l=this.H;break;case"rect":case"path":if(this.attrs.path){var u=ye(this.attrs.path);a=u.x,o=u.y,h=u.width,l=u.height}else a=0,o=0,h=this.paper.width,l=this.paper.height;break;default:a=0,o=0,h=this.paper.width,l=this.paper.height}e=null==e?a+h/2:e,i=null==i?o+l/2:i;var p,d=e-this.paper.width/2,v=i-this.paper.height/2;r.left!=(p=d+"px")&&(r.left=p),r.top!=(p=v+"px")&&(r.top=p),this.X=ni[f](this.type)?-d:a,this.Y=ni[f](this.type)?-v:o,this.W=h,this.H=l,ni[f](this.type)?(n.left!=(p=-d*ri+"px")&&(n.left=p),n.top!=(p=-v*ri+"px")&&(n.top=p)):"text"==this.type?(n.left!=(p=-d+"px")&&(n.left=p),n.top!=(p=-v+"px")&&(n.top=p)):(r.width!=(p=this.paper.width+"px")&&(r.width=p),r.height!=(p=this.paper.height+"px")&&(r.height=p),n.left!=(p=a-d+"px")&&(n.left=p),n.top!=(p=o-v+"px")&&(n.top=p),n.width!=(p=h+"px")&&(n.width=p),n.height!=(p=l+"px")&&(n.height=p))},De.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},De.show=function(){return!this.removed&&(this.Group.style.display="block"),this},De.getBBox=function(){return this.removed?this:ni[f](this.type)?ye(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},De.remove=function(){if(!this.removed){Se(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)delete this[t];this.removed=!0}},De.attr=function(e,i){if(this.removed)return this;if(null==e){var r={};for(var n in this.attrs)this.attrs[f](n)&&(r[n]=this.attrs[n]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==i&&t.is(e,"string"))return"translation"==e?Ai.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==F&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&null==i&&t.is(e,I)){var s,a={};for(n=0,s=e[B];s>n;n++)a[e[n]]=this.attr(e[n]);return a}var o;if(null!=i&&(o={},o[e]=i),null==i&&t.is(e,"object")&&(o=e),o){for(var h in this.paper.customAttributes)if(this.paper.customAttributes[f](h)&&o[f](h)&&t.is(this.paper.customAttributes[h],"function")){var l=this.paper.customAttributes[h].apply(this,[][x](o[h]));this.attrs[h]=o[h];for(var c in l)l[f](c)&&(o[c]=l[c])}o.text&&"text"==this.type&&(this.node.string=o.text),qe(this,o),o.gradient&&({circle:1,ellipse:1}[f](this.type)||"r"!=N(o.gradient).charAt())&&ze(this,o.gradient),(!ni[f](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},De.toFront=function(){return!this.removed&&this.Group.parentNode[g](this.Group),this.paper.top!=this&&Me(this,this.paper),this},De.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Re(this,this.paper)),this)},De.insertAfter=function(t){return this.removed?this:(t.constructor==Bi&&(t=t[t.length-1]),t.Group.nextSibling?t.Group.parentNode.insertBefore(this.Group,t.Group.nextSibling):t.Group.parentNode[g](this.Group),Le(this,t,this.paper),this)},De.insertBefore=function(t){return this.removed?this:(t.constructor==Bi&&(t=t[0]),t.Group.parentNode.insertBefore(this.Group,t.Group),Ge(this,t,this.paper),this)},De.blur=function(e){var i=this.node.runtimeStyle,r=i.filter;r=r.replace(Ke,k),0!==+e?(this.attrs.blur=e,i.filter=r+w+Z+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",Y(+e||1.5))):(i.filter=r,i.margin=0,delete this.attrs.blur)},$e=function(t,e,i,r){{var n=ai("group"),s=ai("oval");s.style}n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=ei,n.coordorigin=t.coordorigin,n[g](s);var a=new Ve(s,n,t);return a.type="circle",qe(a,{stroke:"#000",fill:"none"}),a.attrs.cx=e,a.attrs.cy=i,a.attrs.r=r,a.setBox({x:e-r,y:i-r,width:2*r,height:2*r}),t.canvas[g](n),a},He=function(t,e,i,n,s,a){var o=r(e,i,n,s,a),h=t.path(o),l=h.attrs;return h.X=l.x=e,h.Y=l.y=i,h.W=l.width=n,h.H=l.height=s,l.r=a,l.path=o,h.type="rect",h},We=function(t,e,i,r,n){{var s=ai("group"),a=ai("oval");a.style}s.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",s.coordsize=ei,s.coordorigin=t.coordorigin,s[g](a);var o=new Ve(a,s,t);return o.type="ellipse",qe(o,{stroke:"#000"}),o.attrs.cx=e,o.attrs.cy=i,o.attrs.rx=r,o.attrs.ry=n,o.setBox({x:e-r,y:i-n,width:2*r,height:2*n}),t.canvas[g](s),o},Ye=function(t,e,i,r,n,s){var a=ai("group"),o=ai("image");a.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",a.coordsize=ei,a.coordorigin=t.coordorigin,o.src=e,a[g](o);var h=new Ve(o,a,t);return h.type="image",h.attrs.src=e,h.attrs.x=i,h.attrs.y=r,h.attrs.w=n,h.attrs.h=s,h.setBox({x:i,y:r,width:n,height:s}),t.canvas[g](a),h},Xe=function(e,i,r,n){var s=ai("group"),a=ai("shape"),o=a.style,h=ai("path"),l=(h.style,ai("textpath"));s.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",s.coordsize=ei,s.coordorigin=e.coordorigin,h.v=t.format("m{0},{1}l{2},{1}",Y(10*i),Y(10*r),Y(10*i)+1),h.textpathok=!0,o.width=e.width,o.height=e.height,l.string=N(n),l.on=!0,a[g](l),a[g](h),s[g](a);var c=new Ve(l,s,e);return c.shape=a,c.textpath=h,c.type="text",c.attrs.text=n,c.attrs.x=i,c.attrs.y=r,c.attrs.w=1,c.attrs.h=1,qe(c,{font:K.font,stroke:"none",fill:"#000"}),c.setBox(),e.canvas[g](s),c},Ue=function(t,e){var i=this.canvas.style;return t==+t&&(t+="px"),e==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this};var ai;p.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!p.namespaces.rvml&&p.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ai=function(t){return p.createElement("<rvml:"+t+' class="rvml">')}}catch(t){ai=function(t){return p.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Qe=function(){var e=Ae[m](0,arguments),i=e.container,r=e.height,n=e.width,s=e.x,a=e.y;if(!i)throw new Error("VML container not found.");var o=new y,h=o.canvas=p.createElement("div"),l=h.style;return s=s||0,a=a||0,n=n||512,r=r||342,n==+n&&(n+="px"),r==+r&&(r+="px"),o.width=1e3,o.height=1e3,o.coordsize=1e3*ri+w+1e3*ri,o.coordorigin="0 0",o.span=p.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",h[g](o.span),l.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",n,r),1==i?(p.body[g](h),l.left=s+"px",l.top=a+"px",l.position="absolute"):i.firstChild?i.insertBefore(h,i.firstChild):i[g](h),Be.call(o,o,t.fn),o},o.clear=function(){this.canvas.innerHTML=k,this.span=p.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[g](this.span),this.bottom=this.top=null},o.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=Ee(t);return!0}}var oi=navigator.userAgent.match(/Version\\x2f(.*?)\s/);o.safari="Apple Computer, Inc."==navigator.vendor&&(oi&&oi[1]<4||"iP"==navigator.platform.slice(0,2))?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});d.setTimeout(function(){t.remove()})}:function(){};for(var hi=function(){this.returnValue=!1},li=function(){return this.originalEvent.preventDefault()},ci=function(){this.cancelBubble=!0},ui=function(){return this.originalEvent.stopPropagation()},fi=function(){return p.addEventListener?function(t,e,i,r){var n=b&&T[e]?T[e]:e,s=function(n){if(b&&T[f](e))for(var s=0,a=n.targetTouches&&n.targetTouches.length;a>s;s++)if(n.targetTouches[s].target==t){var o=n;n=n.targetTouches[s],n.originalEvent=o,n.preventDefault=li,n.stopPropagation=ui;break}return i.call(r,n)};return t.addEventListener(n,s,!1),function(){return t.removeEventListener(n,s,!1),!0}}:p.attachEvent?function(t,e,i,r){var n=function(t){return t=t||d.event,t.preventDefault=t.preventDefault||hi,t.stopPropagation=t.stopPropagation||ci,i.call(r,t)};t.attachEvent("on"+e,n);var s=function(){return t.detachEvent("on"+e,n),!0};return s}:void 0}(),pi=[],di=function(t){for(var e,i=t.clientX,r=t.clientY,n=p.documentElement.scrollTop||p.body.scrollTop,s=p.documentElement.scrollLeft||p.body.scrollLeft,a=pi.length;a--;){if(e=pi[a],b){for(var o,h=t.touches.length;h--;)if(o=t.touches[h],o.identifier==e.el._drag.id){i=o.clientX,r=o.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();i+=s,r+=n,e.move&&e.move.call(e.move_scope||e.el,i-e.el._drag.x,r-e.el._drag.y,i,r,t)}},vi=function(e){t.unmousemove(di).unmouseup(vi);for(var i,r=pi.length;r--;)i=pi[r],i.el._drag={},i.end&&i.end.call(i.end_scope||i.start_scope||i.move_scope||i.el,e);pi=[]},yi=C[B];yi--;)(function(e){t[e]=Ve[u][e]=function(i,r){return t.is(i,"function")&&(this.events=this.events||[],this.events.push({name:e,f:i,unbind:fi(this.shape||this.node||p,e,i,r||this)})),this},t["un"+e]=Ve[u]["un"+e]=function(t){for(var i=this.events,r=i[B];r--;)if(i[r].name==e&&i[r].f==t)return i[r].unbind(),i.splice(r,1),!i.length&&delete this.events,this;return this}})(C[yi]);De.hover=function(t,e,i,r){return this.mouseover(t,i).mouseout(e,r||i)},De.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)},De.drag=function(e,i,r,n,s,a){return this._drag={},this.mousedown(function(o){(o.originalEvent||o).preventDefault();var h=p.documentElement.scrollTop||p.body.scrollTop,l=p.documentElement.scrollLeft||p.body.scrollLeft;this._drag.x=o.clientX+l,this._drag.y=o.clientY+h,this._drag.id=o.identifier,i&&i.call(s||n||this,o.clientX+l,o.clientY+h,o),!pi.length&&t.mousemove(di).mouseup(vi),pi.push({el:this,move:e,end:r,move_scope:n,start_scope:s,end_scope:a})}),this},De.undrag=function(e,i,r){for(var n=pi.length;n--;)pi[n].el==this&&pi[n].move==e&&pi[n].end==r&&pi.splice(n++,1);!pi.length&&t.unmousemove(di).unmouseup(vi)},o.circle=function(t,e,i){return $e(this,t||0,e||0,i||0)},o.rect=function(t,e,i,r,n){return He(this,t||0,e||0,i||0,r||0,n||0)},o.ellipse=function(t,e,i,r){return We(this,t||0,e||0,i||0,r||0)},o.path=function(e){return e&&!t.is(e,z)&&!t.is(e[0],I)&&(e+=k),je(t.format[m](t,arguments),this)},o.image=function(t,e,i,r,n){return Ye(this,t||"about:blank",e||0,i||0,r||0,n||0)},o.text=function(t,e,i){return Xe(this,t||0,e||0,N(i))},o.set=function(t){return arguments[B]>1&&(t=Array[u].splice.call(arguments,0,arguments[B])),new Bi(t)},o.setSize=Ue,o.top=o.bottom=null,o.raphael=t,De.resetScale=function(){return this.removed?this:(this._.sx=1,this._.sy=1,this.attrs.scale="1 1",void 0)},De.scale=function(t,e,i,r){if(this.removed)return this;if(null==t&&null==e)return{x:this._.sx,y:this._.sy,toString:n};e=e||t,!+e&&(e=t);var s,a,o=this.attrs;if(0!=t){var h=this.getBBox(),l=h.x+h.width/2,c=h.y+h.height/2,u=G(t/this._.sx),f=G(e/this._.sy);i=+i||0==i?i:l,r=+r||0==r?r:c;var p=this._.sx>0,d=this._.sy>0,v=~~(t/G(t)),y=~~(e/G(e)),g=u*v,m=f*y,b=this.node.style,N=i+G(l-i)*g*(l>i==p?1:-1),_=r+G(c-r)*m*(c>r==d?1:-1),C=t*v>e*y?f:u;switch(this.type){case"rect":case"image":var T=o.width*u,S=o.height*f;this.attr({height:S,r:o.r*C,width:T,x:N-T/2,y:_-S/2});break;case"circle":case"ellipse":this.attr({rx:o.rx*u,ry:o.ry*f,r:o.r*C,cx:N,cy:_});break;case"text":this.attr({x:N,y:_});break;case"path":for(var M=me(o.path),R=!0,L=p?g:u,E=d?m:f,O=0,j=M[B];j>O;O++){var z=M[O],I=J.call(z[0]);if("M"!=I||!R)if(R=!1,"A"==I)z[M[O][B]-2]*=L,z[M[O][B]-1]*=E,z[1]*=u,z[2]*=f,z[5]=+(v+y?!!+z[5]:!+z[5]);else if("H"==I)for(var q=1,F=z[B];F>q;q++)z[q]*=L;else if("V"==I)for(q=1,F=z[B];F>q;q++)z[q]*=E;else for(q=1,F=z[B];F>q;q++)z[q]*=q%2?L:E}var P=ye(M);s=N-P.x-P.width/2,a=_-P.y-P.height/2,M[0][1]+=s,M[0][2]+=a,this.attr({path:M})}this.type in{text:1,image:1}&&(1!=v||1!=y)?this.transformations?(this.transformations[2]="scale("[x](v,",",y,")"),this.node[X]("transform",this.transformations[A](w)),s=-1==v?-o.x-(T||0):o.x,a=-1==y?-o.y-(S||0):o.y,this.attr({x:s,y:a}),o.fx=v-1,o.fy=y-1):(this.node.filterMatrix=Z+".Matrix(M11="[x](v,", M12=0, M21=0, M22=",y,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),b.filter=(this.node.filterMatrix||k)+(this.node.filterOpacity||k)):this.transformations?(this.transformations[2]=k,this.node[X]("transform",this.transformations[A](w)),o.fx=0,o.fy=0):(this.node.filterMatrix=k,b.filter=(this.node.filterMatrix||k)+(this.node.filterOpacity||k)),o.scale=[t,e,i,r][A](w),this._.sx=t,this._.sy=e}return this},De.clone=function(){if(this.removed)return null;var t=this.attr();return delete t.scale,delete t.translation,this.paper[this.type]().attr(t)};var gi={},mi=function(e,i,r,n,s,a,o,h,l){var c,u,f=0,p=100,d=[e,i,r,n,s,a,o,h].join(),v=gi[d];if(!v&&(gi[d]=v={data:[]}),v.timer&&clearTimeout(v.timer),v.timer=setTimeout(function(){delete gi[d]},2e3),null!=l){var y=mi(e,i,r,n,s,a,o,h);p=10*~~y}for(var g=0;p+1>g;g++){if(v.data[l]>g?u=v.data[g*p]:(u=t.findDotsAtSegment(e,i,r,n,s,a,o,h,g/p),v.data[g]=u),g&&(f+=E(E(c.x-u.x,2)+E(c.y-u.y,2),.5)),null!=l&&f>=l)return u;c=u}return null==l?f:void 0},xi=function(e,i){return function(r,n,s){r=Ce(r);for(var a,o,h,l,c,u="",f={},p=0,d=0,v=r.length;v>d;d++){if(h=r[d],"M"==h[0])a=+h[1],o=+h[2];else{if(l=mi(a,o,h[1],h[2],h[3],h[4],h[5],h[6]),p+l>n){if(i&&!f.start){if(c=mi(a,o,h[1],h[2],h[3],h[4],h[5],h[6],n-p),u+=["C",c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],s)return u;f.start=u,u=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,h[5],h[6]][A](),p+=l,a=+h[5],o=+h[6];continue}if(!e&&!i)return c=mi(a,o,h[1],h[2],h[3],h[4],h[5],h[6],n-p),{x:c.x,y:c.y,alpha:c.alpha}}p+=l,a=+h[5],o=+h[6]}u+=h}return f.end=u,c=e?p:i?f:t.findDotsAtSegment(a,o,h[1],h[2],h[3],h[4],h[5],h[6],1),c.alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},bi=xi(1),ki=xi(),wi=xi(0,1);De.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():bi(this.attrs.path):void 0},De.getPointAtLength=function(t){return"path"==this.type?ki(this.attrs.path,t):void 0},De.getSubpath=function(t,e){if("path"==this.type){if(G(this.getTotalLength()-e)<"1e-6")return wi(this.attrs.path,t).end;var i=wi(this.attrs.path,e,1);return t?wi(i,t).end:i}},t.easing_formulas={linear:function(t){return t},"<":function(t){return E(t,3)},">":function(t){return E(t-1,3)+1},"<>":function(t){return t=2*t,1>t?E(t,3)/2:(t-=2,(E(t,3)+2)/2)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){if(0==t||1==t)return t;var e=.3,i=e/4;return E(2,-10*t)*M.sin(2*(t-i)*O/e)+1},bounce:function(t){var e,i=7.5625,r=2.75;return 1/r>t?e=i*t*t:2/r>t?(t-=1.5/r,e=i*t*t+.75):2.5/r>t?(t-=2.25/r,e=i*t*t+.9375):(t-=2.625/r,e=i*t*t+.984375),e}};var Ni=[],_i=function(){for(var e=+new Date,i=0;i<Ni[B];i++){var r=Ni[i];if(!r.stop&&!r.el.removed){var n,s=e-r.start,a=r.ms,o=r.easing,h=r.from,l=r.diff,c=r.to,u=r.t,p=r.el,d={};if(a>s){var v=o(s/a);for(var y in h)if(h[f](y)){switch(te[y]){case"along":n=v*a*l[y],c.back&&(n=c.len-n);var g=ki(c[y],n);p.translate(l.sx-l.x||0,l.sy-l.y||0),l.x=g.x,l.y=g.y,p.translate(g.x-l.sx,g.y-l.sy),c.rot&&p.rotate(l.r+g.alpha,g.x,g.y);break;case j:n=+h[y]+v*a*l[y];break;case"colour":n="rgb("+[Ti(Y(h[y].r+v*a*l[y].r)),Ti(Y(h[y].g+v*a*l[y].g)),Ti(Y(h[y].b+v*a*l[y].b))][A](",")+")";break;case"path":n=[];for(var m=0,x=h[y][B];x>m;m++){n[m]=[h[y][m][0]];for(var b=1,N=h[y][m][B];N>b;b++)n[m][b]=+h[y][m][b]+v*a*l[y][m][b];n[m]=n[m][A](w)}n=n[A](w);break;case"csv":switch(y){case"translation":var _=v*a*l[y][0]-u.x,C=v*a*l[y][1]-u.y;u.x+=_,u.y+=C,n=_+w+C;break;case"rotation":n=+h[y][0]+v*a*l[y][0],h[y][1]&&(n+=","+h[y][1]+","+h[y][2]);break;case"scale":n=[+h[y][0]+v*a*l[y][0],+h[y][1]+v*a*l[y][1],2 in c[y]?c[y][2]:k,3 in c[y]?c[y][3]:k][A](w);break;case"clip-rect":for(n=[],m=4;m--;)n[m]=+h[y][m]+v*a*l[y][m]}break;default:var T=[].concat(h[y]);for(n=[],m=p.paper.customAttributes[y].length;m--;)n[m]=+T[m]+v*a*l[y][m]}d[y]=n}p.attr(d),p._run&&p._run.call(p)}else c.along&&(g=ki(c.along,c.len*!c.back),p.translate(l.sx-(l.x||0)+g.x-l.sx,l.sy-(l.y||0)+g.y-l.sy),c.rot&&p.rotate(l.r+g.alpha,g.x,g.y)),(u.x||u.y)&&p.translate(-u.x,-u.y),c.scale&&(c.scale+=k),p.attr(c),Ni.splice(i--,1)}}t.svg&&p&&p.paper&&p.paper.safari(),Ni[B]&&setTimeout(_i)},Ci=function(e,i,r,n,s){var a=r-n;i.timeouts.push(setTimeout(function(){t.is(s,"function")&&s.call(i),i.animate(e,a,e.easing)},n))},Ti=function(t){return R(L(t,255),0)},Ai=function(t,e){if(null==t)return{x:this._.tx,y:this._.ty,toString:n};switch(this._.tx+=+t,this._.ty+=+e,this.type){case"circle":case"ellipse":this.attr({cx:+t+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+t+this.attrs.x,y:+e+this.attrs.y});break;case"path":var i=me(this.attrs.path);i[0][1]+=+t,i[0][2]+=+e,this.attr({path:i})}return this};De.animateWith=function(t,e,i,r,n){for(var s=0,a=Ni.length;a>s;s++)Ni[s].el.id==t.id&&(e.start=Ni[s].start);return this.animate(e,i,r,n)},De.animateAlong=s(),De.animateAlongBack=s(1),De.onAnimation=function(t){return this._run=t||0,this},De.animate=function(e,i,r,n){var s=this;if(s.timeouts=s.timeouts||[],(t.is(r,"function")||!r)&&(n=r||null),s.removed)return n&&n.call(s),s;var o={},l={},c=!1,u={};for(var p in e)if(e[f](p)&&(te[f](p)||s.paper.customAttributes[f](p)))switch(c=!0,o[p]=s.attr(p),null==o[p]&&(o[p]=K[p]),l[p]=e[p],te[p]){case"along":var d=bi(e[p]),v=ki(e[p],d*!!e.back),y=s.getBBox();u[p]=d/i,u.tx=y.x,u.ty=y.y,u.sx=v.x,u.sy=v.y,l.rot=e.rot,l.back=e.back,l.len=d,e.rot&&(u.r=U(s.rotate())||0);break;case j:u[p]=(l[p]-o[p])/i;break;case"colour":o[p]=t.getRGB(o[p]);var g=t.getRGB(l[p]);u[p]={r:(g.r-o[p].r)/i,g:(g.g-o[p].g)/i,b:(g.b-o[p].b)/i};break;case"path":var m=Ce(o[p],l[p]);o[p]=m[0];var x=m[1];u[p]=[];for(var b=0,k=o[p][B];k>b;b++){u[p][b]=[0];for(var w=1,C=o[p][b][B];C>w;w++)u[p][b][w]=(x[b][w]-o[p][b][w])/i}break;case"csv":var T=N(e[p])[_](h),A=N(o[p])[_](h);switch(p){case"translation":o[p]=[0,0],u[p]=[T[0]/i,T[1]/i];break;case"rotation":o[p]=A[1]==T[1]&&A[2]==T[2]?A:[0,T[1],T[2]],u[p]=[(T[0]-o[p][0])/i,0,0];break;case"scale":e[p]=T,o[p]=N(o[p])[_](h),u[p]=[(T[0]-o[p][0])/i,(T[1]-o[p][1])/i,0,0];break;case"clip-rect":for(o[p]=N(o[p])[_](h),u[p]=[],b=4;b--;)u[p][b]=(T[b]-o[p][b])/i}l[p]=T;break;default:for(T=[].concat(e[p]),A=[].concat(o[p]),u[p]=[],b=s.paper.customAttributes[p][B];b--;)u[p][b]=((T[b]||0)-(A[b]||0))/i}if(c){var S=t.easing_formulas[r];if(!S)if(S=N(r).match(W),S&&5==S[B]){var M=S;S=function(t){return a(t,+M[1],+M[2],+M[3],+M[4],i)}}else S=function(t){return t};Ni.push({start:e.start||+new Date,ms:i,easing:S,from:o,diff:u,to:l,el:s,t:{x:0,y:0}}),t.is(n,"function")&&(s._ac=setTimeout(function(){n.call(s)},i)),1==Ni[B]&&setTimeout(_i)}else{var R,L=[];for(var G in e)e[f](G)&&ie.test(G)&&(p={value:e[G]},"from"==G&&(G=0),"to"==G&&(G=100),p.key=Q(G,10),L.push(p));for(L.sort(le),L[0].key&&L.unshift({key:0,value:s.attrs}),b=0,k=L[B];k>b;b++)Ci(L[b].value,s,i/100*L[b].key,i/100*(L[b-1]&&L[b-1].key||0),L[b-1]&&L[b-1].value.callback);R=L[L[B]-1].value.callback,R&&s.timeouts.push(setTimeout(function(){R.call(s)},i))}return this},De.stop=function(){for(var t=0;t<Ni.length;t++)Ni[t].el.id==this.id&&Ni.splice(t--,1);for(t=0,ii=this.timeouts&&this.timeouts.length;ii>t;t++)clearTimeout(this.timeouts[t]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},De.translate=function(t,e){return this.attr({translation:t+" "+e})},De[q]=function(){return"Raphaël’s object"},t.ae=Ni;var Bi=function(t){if(this.items=[],this[B]=0,this.type="set",t)for(var e=0,i=t[B];i>e;e++)!t[e]||t[e].constructor!=Ve&&t[e].constructor!=Bi||(this[this.items[B]]=this.items[this.items[B]]=t[e],this[B]++)};Bi[u][V]=function(){for(var t,e,i=0,r=arguments[B];r>i;i++)t=arguments[i],!t||t.constructor!=Ve&&t.constructor!=Bi||(e=this.items[B],this[e]=this.items[e]=t,this[B]++);return this},Bi[u].pop=function(){return delete this[this[B]--],this.items.pop()};for(var Si in De)De[f](Si)&&(Bi[u][Si]=function(t){return function(){for(var e=0,i=this.items[B];i>e;e++)this.items[e][t][m](this.items[e],arguments);return this}}(Si));Bi[u].attr=function(e,i){if(e&&t.is(e,I)&&t.is(e[0],"object"))for(var r=0,n=e[B];n>r;r++)this.items[r].attr(e[r]);else for(var s=0,a=this.items[B];a>s;s++)this.items[s].attr(e,i);return this},Bi[u].animate=function(e,i,r,n){(t.is(r,"function")||!r)&&(n=r||null);var s,a,o=this.items[B],h=o,l=this;for(n&&(a=function(){!--o&&n.call(l)}),r=t.is(r,z)?r:a,s=this.items[--h].animate(e,i,r,a);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(s,e,i,r,a);return this},Bi[u].insertAfter=function(t){for(var e=this.items[B];e--;)this.items[e].insertAfter(t);return this},Bi[u].getBBox=function(){for(var t=[],e=[],i=[],r=[],n=this.items[B];n--;){var s=this.items[n].getBBox();t[V](s.x),e[V](s.y),i[V](s.x+s.width),r[V](s.y+s.height)}return t=L[m](0,t),e=L[m](0,e),{x:t,y:e,width:R[m](0,i)-t,height:R[m](0,r)-e}},Bi[u].clone=function(t){t=new Bi;for(var e=0,i=this.items[B];i>e;e++)t[V](this.items[e].clone());return t},t.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var r in t.face)t.face[f](r)&&(e.face[r]=t.face[r]);if(this.fonts[i]?this.fonts[i][V](e):this.fonts[i]=[e],!t.svg){e.face["units-per-em"]=Q(t.face["units-per-em"],10);for(var n in t.glyphs)if(t.glyphs[f](n)){var s=t.glyphs[n];if(e.glyphs[n]={w:s.w,k:{},d:s.d&&"M"+s.d[ee](/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},s.k)for(var a in s.k)s[f](a)&&(e.glyphs[n].k[a]=s.k[a])}}return t},o.getFont=function(e,i,r,n){if(n=n||"normal",r=r||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,t.fonts){var s=t.fonts[e];if(!s){var a=new RegExp("(^|\\s)"+e[ee](/[^\w\d\s+!~.:_-]/g,k)+"(\\s|$)","i");for(var o in t.fonts)if(t.fonts[f](o)&&a.test(o)){s=t.fonts[o];break}}var h;if(s)for(var l=0,c=s[B];c>l&&(h=s[l],h.face["font-weight"]!=i||h.face["font-style"]!=r&&h.face["font-style"]||h.face["font-stretch"]!=n);l++);return h}},o.print=function(e,i,r,n,s,a,o){a=a||"middle",o=R(L(o||0,1),-1);var l,c=this.set(),u=N(r)[_](k),f=0;if(t.is(n,r)&&(n=this.getFont(n)),n){l=(s||16)/n.face["units-per-em"];for(var p=n.face.bbox.split(h),d=+p[0],v=+p[1]+("baseline"==a?p[3]-p[1]+ +n.face.descent:(p[3]-p[1])/2),y=0,g=u[B];g>y;y++){var m=y&&n.glyphs[u[y-1]]||{},x=n.glyphs[u[y]];f+=y?(m.w||n.w)+(m.k&&m.k[u[y]]||0)+n.w*o:0,x&&x.d&&c[V](this.path(x.d).attr({fill:"#000",stroke:"none",translation:[f,0]}))}c.scale(l,l,d,v).translate(e-d,i-v)}return c},t.format=function(e,i){var r=t.is(i,I)?[0][x](i):arguments;return e&&t.is(e,z)&&r[B]-1&&(e=e[ee](c,function(t,e){return null==r[++e]?k:r[e]})),e||k},t.ninja=function(){return v.was?d.Raphael=v.is:delete Raphael,t},t.el=De,t.st=Bi[u],v.was?d.Raphael=t:Raphael=t}(),function(){var t,e,i,r,n,s,a,o,h,l,c,u,f,p,d,v,y,g,m,x,b,k,w,N,_,C,T,A,B,S=Array.prototype.slice;e=function(){function t(e){var i,r,n,s;for(this.timelineOriginal=e.timelineOriginal.points.split(","),this.timelineRevised=e.timelineRevised.points.split(","),this.activeTrack=e.timelineRevised.active?"timelineRevised":"timelineOriginal",this.nodes=[],s=e.nodes||[{position:"s1"}],r=0,n=s.length;n>r;r++)i=s[r],e={state:i.state,position:i.position},this.nodes.push(e),"on"===i.state&&(this.activeNode=e);t.states.push(this)}return t.prototype.activeNodeIndex=function(){return this.nodes.indexOf(this.activeNode)},t.prototype.hasPredecessor=function(){return t.states.indexOf(this)>0},t.prototype.hasSuccessor=function(){return t.states.indexOf(this)<t.states.length-1},t.states=[],t.position=0,t.lastPosition=0,t.active=function(){return this.states[this.position]},t.previous=function(){return this.states[this.lastPosition]},t.reverse=function(){return this.position>0?(this.lastPosition=this.position,this.position--):void 0},t.advance=function(){return this.position<this.states.length-1?(this.lastPosition=this.position,this.position++):void 0},t.reset=function(){return this.lastPosition=this.position=0,this.states=[]},t}(),window.DocumentState=e,t=function(){function t(e){this.coordinates=e.coordinates,t.instances.push(this)}return t.prototype.myIndex=function(){return t.instances.indexOf(this)},t.prototype.next=function(){return t.instances[this.myIndex()+1]},t.prototype.prev=function(){return t.instances[this.myIndex()-1]},t.prototype.activate=function(){return t.activeChronologIndex=this.myIndex()},t.prototype.isActive=function(){return t.activeChronologIndex===this.myIndex()},t.instances=[],t.activeChronologIndex=0,t.active=function(){return this.instances[this.activeChronologIndex]},t.reverse=function(){return 0!==this.activeChronologIndex?this.activeChronologIndex--:void 0},t.advance=function(){return this.activeChronologIndex!==this.instances.length-1?this.activeChronologIndex++:void 0},t.reset=function(){return this.instances=[]},t}(),window.Chronolog=t,i=function(){function i(t){this.chronologs=t.chronologs,this.coordinates=t.coordinates.split(","),i.instances.push(this)}return i.prototype.activeChronologIndex=function(){return this.chronologs.indexOf(t.active())},i.prototype.activate=function(){var t;return t=i.instances.indexOf(this),i.currentTrackIndex=t},i.prototype.next=function(){return this.chronologs[this.activeChronologIndex()+1]},i.prototype.prev=function(){return this.chronologs[this.activeChronologIndex()-1]},i.instances=[],i.currentTrackIndex=0,i.currentTrack=function(){return this.instances[this.currentTrackIndex]},i.currentChronolog=function(){return t.active()},i.advanceAndUpdateState=function(t){return e.reset(),new e(i.asDocumentState()),this.advance(t),new e(i.asDocumentState())},i.reverseAndUpdateState=function(t){return e.reset(),new e(i.asDocumentState()),this.reverse(t),new e(i.asDocumentState())},i.advance=function(e){var r;if(r=i.currentTrack(),"track"===e){if(r=r.next(),null!=r)return r.activate()}else if("chronological"===e)return e=t.active(),r.chronologs.indexOf(e.next())<0&&i.switchTracks(),t.advance()},i.reverse=function(e){var r;if(r=i.currentTrack(),"track"===e){if(r=r.prev(),null!=r)return r.activate()}else if("chronological"===e)return e=t.active(),r.chronologs.indexOf(e.prev())<0&&i.switchTracks(),t.reverse()},i.atStart=function(){var e;return e=t.active(),t.instances[0]===e},i.atFinish=function(e){var r;return r=t.active(),"track"===e?(e=i.currentTrack(),e.chronologs[e.chronologs.length-1]===r):"chronological"===e?t.instances[t.instances.length-1]===r:void 0},i.switchTracks=function(){return this.currentTrackIndex=0===this.currentTrackIndex?1:0},i.asDocumentState=function(){var e,r,n,s,a;for(e={timelineOriginal:{points:this.instances[0].coordinates.join(",")},timelineRevised:{points:this.instances[1].coordinates.join(",")},nodes:[]},a=t.instances,n=0,s=a.length;s>n;n++)r=a[n],e.nodes.push({position:r.coordinates,state:r.isActive()?"on":"off"});return 0===i.currentTrackIndex?e.timelineOriginal.active=!0:e.timelineRevised.active=!0,e},i.reset=function(){return this.instances=[]},i}(),window.Timeline=i,m=new t({coordinates:"s1"}),A=new t({coordinates:"s2"}),k=new t({coordinates:"b3"}),d=new t({coordinates:"b4"}),n=new t({coordinates:"t5"}),b=new t({coordinates:"t6"}),new i({chronologs:[m,A,k,d],coordinates:"s1,s2,b3,b4"}),new i({chronologs:[m,A,n,b],coordinates:"s1,s2,t3,t5,t6"}).activate(),b.activate(),new e(i.asDocumentState()),d=Math.PI/6,n={black:"#444",darkgrey:"#888",white:"#fff"},x=null,s={},s.s1={x:90,y:150},s.s2={x:182,y:150},s.s3={x:274,y:150},s.s4={x:366,y:150},s.s5={x:458,y:150},s.s6={x:550,y:150},s.b3={x:s.s2.x+92*Math.cos(d),y:s.s2.y+92*Math.sin(d)},s.b4={x:s.b3.x+92,y:s.b3.y},s.t3={x:s.s2.x+92*Math.cos(d),y:s.s2.y-92*Math.sin(d)},s.t4={x:s.t3.x+92,y:s.t3.y},s.t5={x:s.t3.x+184,y:s.t3.y},s.t6={x:s.t3.x+276,y:s.t3.y},y={timelineOriginalThick:null,timelineOriginalThin:null,timelineRevisedThick:null,timelineRevisedThin:null,activeTimeline:null,activeNode:null,nodes:[],nodeNumbers:[],thickLineAttributes:{stroke:n.darkgrey,"stroke-width":8,"stroke-linecap":"butt","stroke-linejoin":"miter"},thinLineAttributes:{stroke:n.white,"stroke-width":7,"stroke-linecap":"butt","stroke-linejoin":"miter"},offNodeAttributes:{fill:n.white,stroke:n.black},onNodeAttributes:{fill:n.darkgrey,stroke:n.black}},r=["1955, November 12th\n    Lightning strikes the clocktower at 10.04pm","1955, November 5th\n    George McFly falls out of a tree and is hit by a car.\n\n1955, November 12th\n    Lightning strikes the clocktower at 10.04pm","1955, November 5th\n    George McFly falls out of a tree and is hit by a car.\n    Lorraine Baines nurses George, and thinks he's cute.\n\n1955, November 12th\n    Lightning strikes the clocktower at 10.04pm","1955, November 5th\n    George McFly falls out of a tree and is hit by a car.\n    Lorraine Baines nurses George, and thinks he's cute.\n\n1955, November 12th\n    George McFly takes Lorraine Baines to the dance, and they kiss.\n    Lighting strikes the clocktower at 10.04pm","1955, November 5th\n    Marty McFly is hit by a car.\n    Lorraine Baines nurses Marty, and thinks he's cute.\n\n1955, November 12th\n    Lighting strikes the clocktower at 10.04pm","1955, November 5th\n    Marty McFly is hit by a car.\n    Lorraine Baines nurses Marty, and thinks he's cute.\n\n1955, November 12th\n    Marty Mcfly takes Lorraine Baines to the dance, and they kiss (yuk).\n    Marty McFly invents Rock and Roll\n    George McFly and Loraine Baines kiss.\n    Lightning strikes the clocktower at 10.04pm"],v=function(){var t,e,i,r,n;
for(e=arguments[0],t=2<=arguments.length?S.call(arguments,1):[],i=["M "+s[e].x+" "+s[e].y],r=0,n=t.length;n>r;r++)e=t[r],i.push("L "+s[e].x+" "+s[e].y);return i.join("")},p=function(t){return y.timelineOriginalThick=x.path(v.apply(null,t.timelineOriginal)).attr(y.thickLineAttributes),y.timelineOriginalThin=x.path(v.apply(null,t.timelineOriginal)).attr(y.thinLineAttributes),y.timelineRevisedThick=x.path(v.apply(null,t.timelineRevised)).attr(y.thickLineAttributes),y.timelineRevisedThin=x.path(v.apply(null,t.timelineRevised)).attr(y.thinLineAttributes)},l=function(t,e){return null==e&&(e=t.activeTrack),y.activeTimeline=x.path(v.apply(null,t[e])).attr(y.thickLineAttributes)},c=function(t){var e,i,r,n;for(y.nodes=[],y.nodeNumbers=[],n=[],r=0;5>=r;r+=1)i=t.nodes[r],n.push(null!=i.state?(e=x.circle(s[i.position].x,s[i.position].y,15).attr(y.offNodeAttributes),y.nodes.push(e),u(i,r)):void 0);return n},u=function(t,e){var i;return i=x.text(s[t.position].x,s[t.position].y+30,e+1),y.nodeNumbers.push(i)},o=function(t){return y.activeNode=x.circle(s[t.activeNode.position].x,s[t.activeNode.position].y,15).attr(y.onNodeAttributes)},f=function(){var t;return t=e.active(),p(t),l(t),c(t),o(t),B()},T=function(t,e){return p(e),y.timelineOriginalThick.animate({path:v.apply(null,t.timelineOriginal)},250,"<>"),y.timelineOriginalThin.animate({path:v.apply(null,t.timelineOriginal)},250,"<>"),y.timelineRevisedThick.animate({path:v.apply(null,t.timelineRevised)},250,"<>"),y.timelineRevisedThin.animate({path:v.apply(null,t.timelineRevised)},250,"<>")},N=function(t,e){var i;return i=t.activeTrack,l(e,i),y.activeTimeline.animate({path:v.apply(null,t[i])},250,"<>")},_=function(t,e){var i,r,n,a;for(c(e),a=[],n=0;5>=n&&(r=t.nodes[n],i=y.nodes[n],null!=i);n+=1)i.animate({cx:s[r.position].x,cy:s[r.position].y},250,"<>"),i=y.nodeNumbers[n],a.push(i.animate({x:s[r.position].x,y:s[r.position].y+30},250,"<>"));return a},w=function(t,e){return o(e),y.activeNode.animate({cx:s[t.activeNode.position].x,cy:s[t.activeNode.position].y},250,"<>",h)},h=function(){var t;return t=e.active(),u(t.activeNode,t.activeNodeIndex())},C=function(){var t,i;return x.clear(),t=e.active(),i=e.previous(),T(t,i),N(t,i),_(t,i),w(t,i),B()},B=function(){var t;return t=e.active(),$("#vim-history-buffer code pre").html(r[t.activeNodeIndex()])},g=function(){if(!$(this).hasClass("disabled")){switch($(this).attr("class")){case"undo":i.reverseAndUpdateState("track");break;case"redo":i.advanceAndUpdateState("track");break;case"earlier":i.reverseAndUpdateState("chronological");break;case"later":i.advanceAndUpdateState("chronological")}e.advance(),C(),a()}return!1},a=function(){return $("#vim-history-buttons a").each(function(){var t;return $(this).removeClass("disabled"),t=$(this).attr("class"),i.atStart("track")&&"undo"===t&&$(this).addClass("disabled"),i.atStart("chronological")&&"earlier"===t&&$(this).addClass("disabled"),i.atFinish("track")&&"redo"===t&&$(this).addClass("disabled"),i.atFinish("chronological")&&"later"===t?$(this).addClass("disabled"):void 0})},jQuery($(function(t,e){return function(){return t.apply(e,arguments)}}(function(){return $("#vim-history-visualization").append('<div id="vim-history-buffer">\n  <code><pre></pre></code>\n</div>\n<div id="vim-history-buttons">\n  <a class="undo" href="#">undo</a>\n  <a class="redo" href="#">redo</a>\n  <a class="later" href="#">later</a>\n  <a class="earlier" href="#">earlier</a>\n</div>\n<div id="vim-history-graph"/>'),$("#vim-history-buttons a").click(g),a(),x=Raphael("vim-history-graph",640,300),f()},this))),window.graphics=y}.call(this);