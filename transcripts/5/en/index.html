<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title></title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/vimcasts.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="transcripts transcripts_5 transcripts_5_en transcripts_5_en_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name"></li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right search-form-wrapper">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>
            </ul>
          </section>
        </nav>

      </div>

      <nav class="compact-nav tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="right tab-bar-section">
          
            <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


          
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>

          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Essential Vim Skills<br/>
              <small><a href="/about/">with Drew Neil, author of Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          

  <section class="transcript">
    <div class="title-row">
      <h2 class="title">
        Indentation commands
      </h2>
      <h2 class="episode_number">
        <small>#</small>5
      </h2>
    </div>

    <div class="pubdate-row">
      <div class="transcript-context">
        This is a transcript of
        <a href="/episodes/indentation-commands/">screencast&nbsp;5</a>.
      </div>
      <time class="pubdate" pubdate="pubdate" datetime="2010-02- 8">
        <div class="hide-for-medium-up">Feb&nbsp; 8, '10</div><div class="show-for-medium-up">Feb  8, 2010</div>
      </time>
    </div>

    <div class="summary-row">
      <div class="episode_summary enlarged">
        <p>This episode covers the commands for shifting text left and right (<code>&lt;</code> and <code>&gt;</code>), and also goes over the auto indent command (<code>=</code>).</p>


      </div>
    </div>

    <div class="transcript-row">
      <div class="transcript-body">
      <p>Indentation is an effective way of structuring any document, be it code or markup. Being able to quickly increase or decrease the level of indentation is an essential feature of any text editor.</p>

<p>In Vim, this functionality is triggered using the angle bracket keys. There are a few ways that these can be used. </p>

<p>In normal mode, if you press the angle bracket key twice, it will operate on the current line.</p>
<pre class="highlight plaintext">&gt;&gt;    indent the current line
&lt;&lt;    outdent the current line
</pre>

<p>You can make the command run on multiple lines by prepending a count. So <code>5&gt;&gt;</code> (&lsquo;five-greater-than-greater-than) will indent five lines, starting with the current line.</p>

<p>If you go into visual mode, you can alter the indentation of all selected lines by pressing the angle bracket key just once.</p>

<p>Note that the indentation command causes the visual selection to be unselected. If you are coming to Vim from another editor, such as TextMate, this may seem a little bit odd. When I use the indentation command on a selection in TextMate, it leaves the selection intact, allowing me to run the command multiple times. And if I indent too far, I can just as easily run the outdent command to bring it back a level.</p>

<p>In Vim, the indentation command exits visual mode, so if you try to repeat the command, it won&rsquo;t operate on the same range of text. However, the <code>.</code> command repeats the last edit, and this allows you to quickly indent the same range of text by further step. If you go one step too far, you can reverse with the <code>u</code> command, which undoes the last edit.</p>

<p>You could easily create a mapping to make Vim behave in the same fashion as TextMate. The <code>gv</code> command reselects the last visual selection. If we map the command-square-bracket keys to Vim&rsquo;s angle bracket commands followed by <code>gv</code>, we can replicate the TextMate behaviour.</p>
<pre class="highlight plaintext">vmap &lt;D-[&gt; &lt;gv
vmap &lt;D-]&gt; &gt;gv
</pre>

<h2>Auto indent</h2>

<p>Vim also has an auto-indent command. This is applies indentation following a set of rules for the language of the file you are editing. </p>

<p>The auto-indent command is triggered with the &rsquo;=&lsquo; key. This behaves in a similar fashion to the angle bracket keys:</p>

<ul>
<li>pressing the the equals key twice will act on the current line</li>
<li>if you prepend a count, then double-pressing the equals key will act on the specified number of lines</li>
<li>in visual mode, the equals key will apply to all selected lines</li>
</ul>

<p>Indentation rules can be defined using Vimscript in an indent file for any language. You can see which indentation files come with Vim by exploring the &#39;vimruntime-slash-indent&rsquo; directory:</p>
<pre class="highlight plaintext">:edit $VIMRUNTIME/indent
</pre>

<p>If you work with a language which lacks an indent file, Vim will try and use the indentation rules from C. You can install indentation files for additional languages, or override the existing ones, by putting them in the &lsquo;dot-vim/indent&rsquo; directory, in a file named after the language:</p>
<pre class="highlight plaintext">~/.vim/indent/language_name.vim
</pre>

<p>You can also tell Vim to reformat using an external program when you use the <code>=</code> command. This is done by setting the value of <code>equalprg</code> to the name of an external program, along with any arguments it should be passed. </p>
<pre class="highlight plaintext">:setlocal equalprg=tidy\ -utf8\ -indent\ -q\ -f\ /tmp/err
</pre>

<p>Check this episode&rsquo;s shownotes for further reading on this subject.</p>

<h2>Motions</h2>

<p>All of the indentation commands can be triggered with a motion.</p>
<pre class="highlight plaintext">&gt;{motion}
&lt;{motion}
={motion}
</pre>

<p>To demonstrate this, I&rsquo;m going to begin by flattening the indentation on this file. </p>
<pre class="highlight plaintext">ggVG
&lt;....
</pre>

<p>Now, I&rsquo;ll jump to the top of the file with <code>gg</code>, then run <code>=G</code> (&lsquo;equals-shift-G). Shift-G is the motion to move to the end of a file, so this tells vim to apply the auto-format command to every line in the file. As you can see, the entire file has now been indented appropriately.</p>

<p>Some of Vim&rsquo;s motion commands are aware of the structure of your code, and can enable you to select multi-line blocks in just a couple of keystrokes. For example, in this javascript file, I can select every line inside this block with the command:</p>
<pre class="highlight plaintext">vi} "V-I-curly-brace"
</pre>

<ul>
<li>v goes into visual mode</li>
<li>&ldquo;curly-brace&rdquo; } says to use the curly braces as delimiters for the selection</li>
<li>i specifies that the Inner text should be selected (i.e. not including the braces themselves)</li>
</ul>

<p>Here, I am using visual mode just to illustrate which lines are selected by the &ldquo;I-curly-brace&rdquo; &#39;i}&rsquo; motion. But remember that all of the indentation commands can receive a motion. So to fix the indentation in this example, we could simply go:</p>
<pre class="highlight plaintext">=i}  "equals-I-curly-brace"
</pre>

<ul>
<li>the equals key runs auto-indent</li>
<li>i} is the motion specifying the text within the curly braces</li>
</ul>

<p>For more information on these smart motion commands, check the documentation: [by running]</p>
<pre class="highlight plaintext">:help text-objects
</pre>

      </div>
    </div>

  </section>

  <div class="row">
    <div class="small-12 columns">
      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>

    </div>
  </div>

  


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  

  </body>
</html>
