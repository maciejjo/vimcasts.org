
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title></title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/vimcasts.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

<!--
_____________________________________________________________________
____/\\\________/\\\___/\\\\\\\\\\\___/\\\\____________/\\\\__________
____\/\\\_______\/\\\__\/////\\\///___\/\\\\\\________/\\\\\\__________
_____\//\\\______/\\\_______\/\\\______\/\\\//\\\____/\\\//\\\__________
_______\//\\\____/\\\________\/\\\______\/\\\\///\\\/\\\/_\/\\\__________
_________\//\\\__/\\\_________\/\\\______\/\\\__\///\\\/___\/\\\__________
___________\//\\\/\\\__________\/\\\______\/\\\____\///_____\/\\\__________
_____________\//\\\\\___________\/\\\______\/\\\_____________\/\\\__________
_______________\//\\\_________/\\\\\\\\\\\__\/\\\_____________\/\\\__________
_________________\///_________\///////////___\///______________\///___________
_______________________________________________________________________________


______________________________________________________________________________________________________________
___________________/\\\\\\\\\______/\\\\\\\\\_________/\\\\\\\\\\\_____/\\\\\\\\\\\\\\\______/\\\\\\\\\\\______
_________________/\\\////////_____/\\\\\\\\\\\\\_____/\\\/////////\\\__\///////\\\/////_____/\\\/////////\\\____
________________/\\\/_____________/\\\/////////\\\___\//\\\______\///_________\/\\\_________\//\\\______\///_____                                        /\\\\\\\\
________________/\\\______________\/\\\_______\/\\\____\////\\\________________\/\\\__________\////\\\____________            /\\\\\      /\\/\\\\\\\    /\\\////\\\
________________\/\\\______________\/\\\\\\\\\\\\\\\_______\////\\\_____________\/\\\_____________\////\\\_________          /\\\///\\\   \/\\\/////\\\  \//\\\\\\\\\
_________________\//\\\_____________\/\\\/////////\\\__________\////\\\__________\/\\\________________\////\\\______         /\\\  \//\\\  \/\\\   \///    \///////\\\
___________________\///\\\___________\/\\\_______\/\\\___/\\\______\//\\\_________\/\\\_________/\\\______\//\\\_____        \//\\\  /\\\   \/\\\           /\\     \\\
______________________\////\\\\\\\\\__\/\\\_______\/\\\__\///\\\\\\\\\\\/__________\/\\\________\///\\\\\\\\\\\/______  /\\\   \///\\\\\/    \/\\\          \//\\\\\\\\
__________________________\/////////___\///________\///_____\///////////____________\///___________\///////////________ \///      \/////      \///            \////////
________________________________________________________________________________________________________________________
-->

  <body class="transcripts transcripts_4 transcripts_4_en transcripts_4_en_index" data-swiftype-index='false'>

  
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2977286-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>


  

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name"></li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right search-form-wrapper">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>
            </ul>
          </section>
        </nav>

      </div>

      <nav class="compact-nav tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="right tab-bar-section">
          
            <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


          
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>

          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="identity-row">
          <div id="logo" class="logo">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          
            
          
        </div>

          

  <section class="transcript">
    <div class="title-row">
      <h2 class="title">
        Tidying whitespace
      </h2>
      <h2 class="episode_number">
        <small>#</small>4
      </h2>
    </div>

    <div class="pubdate-row">
      <div class="transcript-context">
        This is a transcript of
        <a href="/episodes/tidying-whitespace/">screencast&nbsp;4</a>.
      </div>
      <time class="pubdate" pubdate="pubdate" datetime="2010-01-24">
        <div class="hide-for-medium-up">Jan&nbsp;24, '10</div><div class="show-for-medium-up">Jan 24, 2010</div>
      </time>
    </div>

    <div class="summary-row">
      <div class="episode_summary enlarged">
        <p>This episode demonstrates a few techniques for tidying up whitespace.  First, it looks at how to convert between tabs and spaces. Then it shows how to strip trailing whitespace, and finally, how to remove blank lines from a file.</p>


      </div>
    </div>

    <div class="transcript-row">
      <div class="transcript-body">
      <h2>Convert between tabs with spaces</h2>

<p>It is sometimes useful to be able to convert between tabs and spaces
for indentation. If you collborate on a project without agreeing on a
convention for indentation, there&rsquo;s a good chance that at some point
you&rsquo;ll see something like this.</p>

<p>It looks as though this file hasn&rsquo;t been indented correctly. If I reveal
the invisible characters, you can see that one block of text has been
indented using spaces, whereas the rest of the file uses tab
characters.</p>

<p>Now if I change the value of <code>tabstop</code> from 4 to 2, everything appears
to snap into place.</p>

<p>To avoid this kind of confusion, lets fix the indentation style to use
tab characters throughout the file.</p>

<p>First, make sure that <code>expandtab</code> is switched off, by running <code>:set
noexpandtab</code>. Then run the command:</p>
<pre class="highlight plaintext">:retab!
</pre>

<p>This inserts tab characters to replace spaces of an equivalent width
throughout the entire file.</p>

<p>Now if I enable <code>expandtab</code> and run the command again, it converts all
the tabs to back to spaces.</p>

<p>If I don&rsquo;t want to affect the entire file, I can make a visual
selection first, then run <code>:retab!</code>, and it will only affect the
selected lines.</p>

<h2>Strip trailing characters</h2>

<p>Trailing spaces at the end of a line are another of those issues that
divide programmers. While it drives some of us crazy, others just
don&rsquo;t care or even notice, perhaps.</p>

<p>In Vim, you can easily strip trailing whitespace from a file using a
substitute command:</p>
<pre class="highlight plaintext">:%s/\s\+$//e
</pre>

<p>This breaks down as follows:</p>

<ul>
<li>The colon enters command mode</li>
<li>The <code>s</code> is short for the substitute command</li>
<li>The percent sign specifies that the entire file should be affected
(not just the current line).</li>
<li>the first two forward slashes delimit the search pattern</li>
<li><code>\s</code> stands for a whitespace character, and the escaped plus sign
(+) indicates that one or more spaces should be matched, preceding a
line end (the dollar sign)</li>
<li>the last two slashes delimit the replacement string. Here, it is blank,
so it replaces trailing whitespace with nothing.</li>
<li>The <code>e</code> flag suppresses an error message if no matches are found.</li>
</ul>

<p>This is a lot to type, so you might want to try mapping it to a
shortcut. You could put the following in your .vimrc, which maps this
to the <code>F5</code> key:</p>
<pre class="highlight plaintext">:nnoremap &lt;F5&gt; :%s/\s\+$//e&lt;CR&gt;
</pre>

<p>But there are a couple of side-effects to running this command.  One
is that your cursor will be moved from its current position to the
last line where the substitution was made. Another is that the last
item in your search history is set to the pattern of whitespace at the
end of a line. If you have search highlighting enabled, then you will
see spaces highlighted momentarily as you type, which can be a little
distracting. Here is a function that gets around these problems.</p>
<pre class="highlight plaintext">function! &lt;SID&gt;StripTrailingWhitespaces()
    " Preparation: save last search, and cursor position.
    let _s=@/
    let l = line(".")
    let c = col(".")
    " Do the business:
    %s/\s\+$//e
    " Clean up: restore previous search history, and cursor position
    let @/=_s
    call cursor(l, c)
endfunction
</pre>

<p>If you include this in your .vimrc file, you can then map it to a
key like this:</p>
<pre class="highlight plaintext">nnoremap &lt;silent&gt; &lt;F5&gt; :call &lt;SID&gt;StripTrailingWhitespaces()&lt;CR&gt;
</pre>

<p>It is also possible to use an autocommand to call this function just
before saving a file. Be aware that in some filetypes, spaces at the
end of a line can have meaning, so stripping them could potentially
break the file. For example, in this snippet of vimscript, the
space at the end of the line is intentional:</p>
<pre class="highlight plaintext">set listchars=eol:¬,tab:▸\ 
</pre>

<p>If you choose to enable this autocommand, I would recommend providing
a whitelist of filetypes which you are sure won&rsquo;t be broken by
stripping trailing spaces. This example causes the autocommand to be
fired before saving python and javascript files only.</p>
<pre class="highlight plaintext">autocmd BufWritePre *.py,*.js :call &lt;SID&gt;StripTrailingWhitespaces()
</pre>

<p>Use this as a template, and add other filetypes to suit your needs.</p>

<h2>Strip blank lines</h2>

<p>Sometimes you&rsquo;ll open a file, and find that it has too many extraneous
blank lines, making it difficult to read. You can quickly strip out
all empty lines with this command:</p>
<pre class="highlight plaintext">:g/^$/d
</pre>

<p>This breaks down as follows:</p>

<ul>
<li><code>:g</code> creates a global command, that is, one that will opperate on the
entire file.</li>
<li>the forward slashes delimit a pattern to search for
in this case, the caret-dollar pattern matches a line beginning
followed immediatly by a line-end. That is: a blank line.</li>
<li>the part following the pattern is an Ex command to be executed on all
matching lines. </li>
<li>in this case, the <code>d</code> command deletes the line</li>
</ul>

      </div>
    </div>

  </section>

  <div class="row">
    <div class="small-12 columns">
      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>

    </div>
  </div>

  


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  

  </body>
</html>
