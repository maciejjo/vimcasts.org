
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title></title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/vimcasts.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="transcripts transcripts_17 transcripts_17_en transcripts_17_en_index" data-swiftype-index='false'>

  
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2977286-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>


  

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name"></li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right search-form-wrapper">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>
            </ul>
          </section>
        </nav>

      </div>

      <nav class="compact-nav tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="right tab-bar-section">
          
            <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


          
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>

          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="identity-row">
          <div id="logo" class="logo">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          
            
          
        </div>

          

  <section class="transcript">
    <div class="title-row">
      <h2 class="title">
        Hard wrapping text
      </h2>
      <h2 class="episode_number">
        <small>#</small>17
      </h2>
    </div>

    <div class="pubdate-row">
      <div class="transcript-context">
        This is a transcript of
        <a href="/episodes/hard-wrapping-text/">screencast&nbsp;17</a>.
      </div>
      <time class="pubdate" pubdate="pubdate" datetime="2010-04-26">
        <div class="hide-for-medium-up">Apr&nbsp;26, '10</div><div class="show-for-medium-up">Apr 26, 2010</div>
      </time>
    </div>

    <div class="summary-row">
      <div class="episode_summary enlarged">
        <p>It is sometimes preferable to format text with hard wrapped lines, for example when writing emails in plaintext. Vim can apply this style of formatting for you. This episode shows some of the options which allow you to customize Vim&rsquo;s text formatting.</p>


      </div>
    </div>

    <div class="transcript-row">
      <div class="transcript-body">
      <p>It is sometimes preferrable to format text with hard wrapped lines, for example when writing emails in plaintext. Vim can apply this style of formatting for you. This episode shows some of the options which allow you to customize Vim&rsquo;s text formatting.</p>

<h1>Format current paragraph</h1>

<p>The <code>gq</code> command applies formatting to a section of text. You can apply this to the current paragraph with the <code>ip</code> motion. So the command:</p>
<pre class="highlight plaintext">gqip
</pre>

<p>will reformat the current paragraph.</p>

<p>Notice that this moves the cursor to the last line of the paragraph. Alternatively, if you replace <code>gq</code> with the <code>gw</code> command, it restores the cursor position to the word it was on before the paragraph was reformatted.</p>

<h2>Controlling the line width</h2>

<p>There are two settings that can be used to control the length of a line in Vim. These are:</p>
<pre class="highlight plaintext">textwidth
wrapmargin
</pre>

<p>Textwidth can be set to a number representing the maximum allowed width of a line. When set to zero, which is the default, Vim will use the full width of the window up to a maximum of 80 characters. </p>
<pre class="highlight plaintext">:set nonumber
:set columns=40
gq
</pre>

<p>Here, I have textwidth set to 0, and I&rsquo;ve reduced the window width to 40 columns. When I reformat the paragraph, it uses the full width of the window.</p>
<pre class="highlight plaintext">:set columns=100
</pre>

<p>Now, if I set the window width to 100 and reformat the paragraph, Vim does not allow the line width to exceed 80 columns.</p>

<p>The wrapmargin setting can be used to specify the number of characters from the right window border where wrapping begins.</p>

<p>Here, if I set wrapmargin to 5, it instructs Vim to use the entire width of the window minus 5 characters.</p>
<pre class="highlight plaintext">:set wrapmargin=5
</pre>

<p>If you have line numbers switched on, they use up some of the page width, so the wrapmargin setting can be used to compensate for that.</p>

<p>When textwidth is set to anything greater than zero, the wrapmargin setting has no effect. Instead, lines will be formatted using the number of characters specified by textwidth, regardless of the width of the window.</p>
<pre class="highlight plaintext">:set textwidth=40
</pre>

<p>Here, for example, I have set textwidth to 40. When I reformat the paragraph, none of the resulting lines should exceed 40 characters.</p>

<h1>Formatting options</h1>

<p>The way that Vim formats text can be influenced with the <code>formatoptions</code> setting. The <code>:help</code> entry on <code>fo-table</code> gives details of each of the available flags. I&rsquo;m going to demonstrate what a couple of these do. In each of the following, I have textwidth set to 40.</p>

<p>To begin with, I&rsquo;m going to set formatoptions to a blank string:</p>
<pre class="highlight plaintext">:set fo=
</pre>

<p>As I enter text, it is appended to the current line, regardless of the length. If I exceed 40 characters, it just keeps on going. I can reformat the paragraph when I leave insert mode, by running the <code>gq</code> command.</p>

<p>Next, I&rsquo;m going to add the <code>t</code> flag to formatoptions:</p>
<pre class="highlight plaintext">:set fo+=t
</pre>

<p>Now, when I type text and the current line exceeds the maximum allowed line length, Vim automatically inserts a line break. </p>

<p>This automatic text wrapping is fine while composing, but it lacks when editing text. For example, if I type text at the begining of a line, it can cause the line to exceed the maximum line length. Or if I delete text, it can cause the current line to appear too short. </p>

<p>If this situation arises, it can be swiftly rectified by running the <code>gq</code> command.</p>

<p>Next, I&rsquo;m going to add the <code>a</code> flag to formatoptions:</p>
<pre class="highlight plaintext">:set fo+=a
</pre>

<p>This causes Vim to reformat the paragraph every time a line is changed. Now the paragraph is reformatted when I insert text at the beginning of a line, and also when I delete text.</p>

<h1>External program</h1>

<p>The <code>formatoptions</code> setting is used with Vim&rsquo;s internal formatting algorithm. Vim supports two methods for setting an alternative formatting engine to use. I won&rsquo;t cover either of these in this episode, but note that the <code>gq</code> command will only invoke Vim&rsquo;s internal formatter if both the <code>formatexpr</code> and <code>formatprg</code> options are blank. On the other hand, the <code>gw</code> command will always invoke Vim&rsquo;s internal formatting engine, even if one of the alternate formatters is enabled.</p>

      </div>
    </div>

  </section>

  <div class="row">
    <div class="small-12 columns">
      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>

    </div>
  </div>

  


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  

  </body>
</html>
