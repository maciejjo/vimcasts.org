
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Converting markdown to structured HTML with a macro</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_converting-markdown-to-structured-html-with-a-macro episodes_converting-markdown-to-structured-html-with-a-macro_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Converting markdown to structured HTML with a macro</h2>
        <div class="episode_number">
          <small>#</small>21
        </div>
        <time pubdate="pubdate" datetime="2010-06- 2">
          Jun  2, 2010
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P9M,25S">
            9:25
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/macros">macros</a>, <a href="/categories/showcase">showcase</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>Recording your keystrokes as a macro can be a great timesaver, but you have to be careful that you use commands in such a way that they can be reused. In this episode, I construct a fairly complex macro to build a structural HTML document from markdown.</p>


      </div>

      <video poster="http://vimcasts.org/images/posters/markdown_macro.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_21_placeholder">
        <source src="http://media.vimcasts.org/videos/21/markdown_macro.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/21/markdown_macro.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/21/markdown_macro.ogv">OGG</a>
          <span class="stats">13.9 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/21/markdown_macro.m4v">Quicktime</a>
          <span class="stats">19.1 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/21/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<p>The demonstration in this video uses a range of techniques to construct a
macro that can be replayed reliably, including text objects, the surround
plugin, using registers as a clipboard, and for storing keystrokes (macros).
These are summarized below.</p>

<p>If you would like to try building this macro for yourself, you can download
the source files:</p>

<ul>
<li><a href="http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/template.html">HTML template</a></li>
<li><a href="http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/pecha-kucha-script.md">Markdown source</a></li>
</ul>

<h3>Moving around</h3>

<p>If you need to move around whilst recording a macro, it is best to do so in
such a way that it can be replayed in another context. In this demonstration,
I move the cursor by searching for a pattern that delimits each region of the
document that I need to edit. In particular, I search for the heading using
the command:</p>
<pre class="highlight plaintext">/^#\d\d
</pre>

<p>This matches a Markdown style <code>h1</code>.</p>

<p>To return my cursor to the navigation list, I search backwards for the closing
<code>&lt;/ol&gt;</code> tag:</p>
<pre class="highlight plaintext">?\/ol
</pre>

<p>There are a couple times when I need to add an attribute to an HTML tag. In
both cases, my cursor is positioned on the opening angle-bracket, so I use the
<code>%</code> key to jump to the closing angle-bracket before entering insert mode.</p>

<h3>Making a selection with text-objects</h3>

<p>When selecting a paragraph of text, I need to use a command that will work
when the macro is replayed on different length paragraphs. I can do this using
the text object:</p>
<pre class="highlight plaintext">Vip
</pre>

<p>A similar command comes in handy later, when I need to select the text inside
an HTML tag:</p>
<pre class="highlight plaintext">vit
</pre>

<h3>Adding opening and closing tags with the surround plugin</h3>

<p>The <a href="http://www.vim.org/scripts/script.php?script_id=1697">surround.vim</a> plugin makes it really easy to wrap a selection with
opening and closing tags. When a visual selection has been made, you can
execute a command such as:</p>
<pre class="highlight plaintext">s&lt;li&gt;
</pre>

<p>Which will prepend <code>&lt;li&gt;</code> and append <code>&lt;/li&gt;</code> to the selected region. Note that
if your selection was made in visual character mode, the opening and closing
tags will be applied directly before and after the selection. Whereas if your
selection was made in visual line mode, the surrounding tags will each get a
new line of their own.</p>

<h3>Using registers</h3>

<p>In Vim, each of the letters <strong>a</strong> through <strong>z</strong> can be used as a register. In
this demonstration I use registers in two ways:</p>

<ul>
<li>as a clipboard (for copy/paste operations)</li>
<li>for capturing and replaying a sequence of commands (a macro)</li>
</ul>

<h3>Further reading</h3>

<ul>
<li><a href="http://www.vim.org/scripts/script.php?script_id=1697">The surround plugin</a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/motion.html#text-objects">:help text-objects</a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#q">:help q</a></li>
</ul>

        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>


      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    
      <li>
        <h4><a href="/episodes/creating-the-vimcasts-logo-as-ascii-art/">Creating the Vimcasts logo as ASCII art</a></h4>
        <p>Demonstrating miscellaneous tips and tricks gleaned whilst making an ASCII art version of the VimCasts.org logo. Learn how to duplicate lines, copy and paste with visual block mode, search and replace within a visual selection, and how to use macros.</p>


      </li>
    
      <li>
        <h4><a href="/episodes/converting-haml-to-erb-with-vim-macros/">Converting HAML to ERB with Vim macros</a></h4>
        <p>HAML and ERB are two commonly used ruby templating languages. You may have a strong preference for one or the other, but it&rsquo;s not always up to you which one you use. I was recently asked to convert several HAML files to ERB format. In this episode, I will demonstrate a couple of Vim macros that helped make short work of the task. </p>


      </li>
    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    
      <li>
        <h4><a href="/episodes/vimgolf-prime-numbers/">VimGolf - Prime Numbers</a></h4>
        <p>For the VimGolf challenge <a href="http://vimgolf.com/challenges/4d1c27940e3d7832db000010">&ldquo;List the first 100 prime numbers&rdquo;</a>, there&rsquo;s a solution that uses a regular expression to detect prime numbers. At 43 keystokes, it&rsquo;s not the winning solution, but I think it&rsquo;s the most interesting one. It uses a few clever Vim tricks, including macros, control-a to increment, the very magic pattern switch, and the <code>:global</code> command. There&rsquo;s a lot to learn from those 43 keystrokes, so let&rsquo;s study it!</p>


      </li>
    

  </ul>
</div>


      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

