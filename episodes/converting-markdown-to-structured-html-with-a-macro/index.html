

<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Converting markdown to structured HTML with a macro</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/vimcasts.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

<!--
_____________________________________________________________________
____/\\\________/\\\___/\\\\\\\\\\\___/\\\\____________/\\\\__________
____\/\\\_______\/\\\__\/////\\\///___\/\\\\\\________/\\\\\\__________
_____\//\\\______/\\\_______\/\\\______\/\\\//\\\____/\\\//\\\__________
_______\//\\\____/\\\________\/\\\______\/\\\\///\\\/\\\/_\/\\\__________
_________\//\\\__/\\\_________\/\\\______\/\\\__\///\\\/___\/\\\__________
___________\//\\\/\\\__________\/\\\______\/\\\____\///_____\/\\\__________
_____________\//\\\\\___________\/\\\______\/\\\_____________\/\\\__________
_______________\//\\\_________/\\\\\\\\\\\__\/\\\_____________\/\\\__________
_________________\///_________\///////////___\///______________\///___________
_______________________________________________________________________________


______________________________________________________________________________________________________________
___________________/\\\\\\\\\______/\\\\\\\\\_________/\\\\\\\\\\\_____/\\\\\\\\\\\\\\\______/\\\\\\\\\\\______
_________________/\\\////////_____/\\\\\\\\\\\\\_____/\\\/////////\\\__\///////\\\/////_____/\\\/////////\\\____
________________/\\\/_____________/\\\/////////\\\___\//\\\______\///_________\/\\\_________\//\\\______\///_____                                        /\\\\\\\\
________________/\\\______________\/\\\_______\/\\\____\////\\\________________\/\\\__________\////\\\____________            /\\\\\      /\\/\\\\\\\    /\\\////\\\
________________\/\\\______________\/\\\\\\\\\\\\\\\_______\////\\\_____________\/\\\_____________\////\\\_________          /\\\///\\\   \/\\\/////\\\  \//\\\\\\\\\
_________________\//\\\_____________\/\\\/////////\\\__________\////\\\__________\/\\\________________\////\\\______         /\\\  \//\\\  \/\\\   \///    \///////\\\
___________________\///\\\___________\/\\\_______\/\\\___/\\\______\//\\\_________\/\\\_________/\\\______\//\\\_____        \//\\\  /\\\   \/\\\           /\\     \\\
______________________\////\\\\\\\\\__\/\\\_______\/\\\__\///\\\\\\\\\\\/__________\/\\\________\///\\\\\\\\\\\/______  /\\\   \///\\\\\/    \/\\\          \//\\\\\\\\
__________________________\/////////___\///________\///_____\///////////____________\///___________\///////////________ \///      \/////      \///            \////////
________________________________________________________________________________________________________________________
-->

  <body class="episodes episodes_converting-markdown-to-structured-html-with-a-macro episodes_converting-markdown-to-structured-html-with-a-macro_index" data-swiftype-index='false'>

  
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2977286-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script>


  

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name"></li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right search-form-wrapper">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="open"><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>
            </ul>
          </section>
        </nav>

      </div>

      <nav class="compact-nav tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="right tab-bar-section">
          
            <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


          
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="open"><a href="/episodes">Screencasts</a></li><li><a href="/blog">Articles</a></li><li><a href="/categories">Categories</a></li><li><a href="/training">Training</a></li><li><a href="/publications">Publications</a></li>
<li><a href="/subscribe">Subscribe</a></li>

          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="identity-row">
          <div id="logo" class="logo">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          
            
          
        </div>

          <div class="row">
    <div class="small-12 columns">
      
    </div>
  </div>

  <section class="screencast">
    <div class="title-row">
      <h2 class="title">
        Converting markdown to structured HTML with a macro
      </h2>
      <h2 class="episode_number">
        <small>#</small>21
      </h2>
    </div>

    <div class="pubdate-row">

  <div class="video-run-time">
    
    Run time: <time datetime="P9M,25S">
      9:25
    </time>
  </div>

  <time class="pubdate" pubdate="pubdate" datetime="2010-06- 2">
    <div class="hide-for-medium-up">Jun&nbsp; 2, '10</div><div class="show-for-medium-up">Jun  2, 2010</div>
  </time>

</div>


    <div class="summary-row">
      <div class="episode_summary enlarged" data-swiftype-index="true">
        <p>Recording your keystrokes as a macro can be a great timesaver, but you have to be careful that you use commands in such a way that they can be reused. In this episode, I construct a fairly complex macro to build a structural HTML document from markdown.</p>


      </div>
    </div>

    <div class="video-row">

      <div class="video-column">
        <div class="video_wrapper">
          <video poster="http://vimcasts.org/images/posters/markdown_macro.png"
            controls="controls" preload="none" class="placeholder"
            id="episode_21_placeholder">
            <source src="http://media.vimcasts.org/videos/21/markdown_macro.ogv" type="video/ogg" />
            <source src="http://media.vimcasts.org/videos/21/markdown_macro.m4v" type="video/x-m4v" />
          </video>
        </div>
      </div>

      <aside class="downloads">

        <div class="download-videos">
          <h4>Download</h4>
          <ul class="downloads-list">
            <li class="ogg">
              <a href="http://media.vimcasts.org/videos/21/markdown_macro.ogv">OGG</a>
              <span class="stats">13.9 MB</span>
            </li>
            <li class="quicktime">
              <a href="http://media.vimcasts.org/videos/21/markdown_macro.m4v">Quicktime</a>
              <span class="stats">19.1 MB</span>
            </li>
          </ul>
        </div>

        <div class="video-metadata">
          <p class="video-duration">
            
            Run time:
            <time datetime="P9M,25S">
              9:25
            </time>
          </p>

          <p>
            <a href="/transcripts/21/en/">Read transcript</a>
          </p>
        </div>

      </aside>

    </div>

    <div class="content-row">
      <dl class="accordion" data-accordion>
        <dd>
          <a href="#shownotes">Shownotes<span class="disclosure"></span></a>
          <div id="shownotes" class="content" data-swiftype-index="true">
            

<p>The demonstration in this video uses a range of techniques to construct a
macro that can be replayed reliably, including text objects, the surround
plugin, using registers as a clipboard, and for storing keystrokes (macros).
These are summarized below.</p>

<p>If you would like to try building this macro for yourself, you can download
the source files:</p>

<ul>
<li><a href="http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/template.html">HTML template</a></li>
<li><a href="http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/pecha-kucha-script.md">Markdown source</a></li>
</ul>

<h3>Moving around</h3>

<p>If you need to move around whilst recording a macro, it is best to do so in
such a way that it can be replayed in another context. In this demonstration,
I move the cursor by searching for a pattern that delimits each region of the
document that I need to edit. In particular, I search for the heading using
the command:</p>
<pre class="highlight plaintext">/^#\d\d
</pre>

<p>This matches a Markdown style <code>h1</code>.</p>

<p>To return my cursor to the navigation list, I search backwards for the closing
<code>&lt;/ol&gt;</code> tag:</p>
<pre class="highlight plaintext">?\/ol
</pre>

<p>There are a couple times when I need to add an attribute to an HTML tag. In
both cases, my cursor is positioned on the opening angle-bracket, so I use the
<code>%</code> key to jump to the closing angle-bracket before entering insert mode.</p>

<h3>Making a selection with text-objects</h3>

<p>When selecting a paragraph of text, I need to use a command that will work
when the macro is replayed on different length paragraphs. I can do this using
the text object:</p>
<pre class="highlight plaintext">Vip
</pre>

<p>A similar command comes in handy later, when I need to select the text inside
an HTML tag:</p>
<pre class="highlight plaintext">vit
</pre>

<h3>Adding opening and closing tags with the surround plugin</h3>

<p>The <a href="http://www.vim.org/scripts/script.php?script_id=1697">surround.vim</a> plugin makes it really easy to wrap a selection with
opening and closing tags. When a visual selection has been made, you can
execute a command such as:</p>
<pre class="highlight plaintext">s&lt;li&gt;
</pre>

<p>Which will prepend <code>&lt;li&gt;</code> and append <code>&lt;/li&gt;</code> to the selected region. Note that
if your selection was made in visual character mode, the opening and closing
tags will be applied directly before and after the selection. Whereas if your
selection was made in visual line mode, the surrounding tags will each get a
new line of their own.</p>

<h3>Using registers</h3>

<p>In Vim, each of the letters <strong>a</strong> through <strong>z</strong> can be used as a register. In
this demonstration I use registers in two ways:</p>

<ul>
<li>as a clipboard (for copy/paste operations)</li>
<li>for capturing and replaying a sequence of commands (a macro)</li>
</ul>

<h3>Further reading</h3>

<ul>
<li><a href="http://www.vim.org/scripts/script.php?script_id=1697">The surround plugin</a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/motion.html#text-objects">:help text-objects</a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#q">:help q</a></li>
</ul>

          </div>
        </dd>
        <dd>
          <a href="#comments" class="show-comments">Comments<span class="disclosure"></span></a>
          <div id="comments" class="content">
            <div id="disqus_thread"></div>

          </div>
        </dd>
      </dl>
    </div>

  </section>

  
<div class="share-container">
  <p class="call-to-action">Like this video? Spread the word!</p>

  <!-- buttons start here -->
  <div class="buttons">
    <ul class="rrssb-buttons">

      <li class="twitter">
        <a href="http://twitter.com/home?status=Converting%20markdown%20to%20structured%20HTML%20with%20a%20macro http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/" class="popup">
          <span class="icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
              <path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32
              c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155
              C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965
              C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683
              c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851
              C26.275,7.229,25.39,8.196,24.253,8.756z"/>
            </svg>
          </span>
          <span class="text">twitter</span>
        </a>
      </li>

      <li class="googleplus">
        <a href="https://plus.google.com/share?url=Converting%20markdown%20to%20structured%20HTML%20with%20a%20macro http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/" class="popup">
          <span class="icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
              <g>
              <g>
              <path d="M14.703,15.854l-1.219-0.948c-0.372-0.308-0.88-0.715-0.88-1.459c0-0.748,0.508-1.223,0.95-1.663
              c1.42-1.119,2.839-2.309,2.839-4.817c0-2.58-1.621-3.937-2.399-4.581h2.097l2.202-1.383h-6.67c-1.83,0-4.467,0.433-6.398,2.027
              C3.768,4.287,3.059,6.018,3.059,7.576c0,2.634,2.022,5.328,5.604,5.328c0.339,0,0.71-0.033,1.083-0.068
              c-0.167,0.408-0.336,0.748-0.336,1.324c0,1.04,0.551,1.685,1.011,2.297c-1.524,0.104-4.37,0.273-6.467,1.562
              c-1.998,1.188-2.605,2.916-2.605,4.137c0,2.512,2.358,4.84,7.289,4.84c5.822,0,8.904-3.223,8.904-6.41
              c0.008-2.327-1.359-3.489-2.829-4.731H14.703z M10.269,11.951c-2.912,0-4.231-3.765-4.231-6.037c0-0.884,0.168-1.797,0.744-2.511
              c0.543-0.679,1.489-1.12,2.372-1.12c2.807,0,4.256,3.798,4.256,6.242c0,0.612-0.067,1.694-0.845,2.478
              c-0.537,0.55-1.438,0.948-2.295,0.951V11.951z M10.302,25.609c-3.621,0-5.957-1.732-5.957-4.142c0-2.408,2.165-3.223,2.911-3.492
              c1.421-0.479,3.25-0.545,3.555-0.545c0.338,0,0.52,0,0.766,0.034c2.574,1.838,3.706,2.757,3.706,4.479
              c-0.002,2.073-1.736,3.665-4.982,3.649L10.302,25.609z"/>
              <polygon points="23.254,11.89 23.254,8.521 21.569,8.521 21.569,11.89 18.202,11.89 18.202,13.604 21.569,13.604 21.569,17.004
              23.254,17.004 23.254,13.604 26.653,13.604 26.653,11.89      "/>
              </g>
              </g>
            </svg>
          </span>
          <span class="text">google+</span>
        </a>
      </li>

      <li class="facebook">
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://vimcasts.org/episodes/converting-markdown-to-structured-html-with-a-macro/" class="popup">
          <span class="icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
              <path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434
              c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726
              c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z"/>
            </svg>
          </span>
          <span class="text">facebook</span>
        </a>
      </li>

      <li class="email">
        <a href="mailto:?subject=Converting%20markdown%20to%20structured%20HTML%20with%20a%20macro&amp;body=http%3A%2F%2Fvimcasts.org%2Fepisodes%2Fconverting-markdown-to-structured-html-with-a-macro%2F">
          <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><path d="M20.111 26.147c-2.336 1.051-4.361 1.401-7.125 1.401c-6.462 0-12.146-4.633-12.146-12.265 c0-7.94 5.762-14.833 14.561-14.833c6.853 0 11.8 4.7 11.8 11.252c0 5.684-3.194 9.265-7.399 9.3 c-1.829 0-3.153-0.934-3.347-2.997h-0.077c-1.208 1.986-2.96 2.997-5.023 2.997c-2.532 0-4.361-1.868-4.361-5.062 c0-4.749 3.504-9.071 9.111-9.071c1.713 0 3.7 0.4 4.6 0.973l-1.169 7.203c-0.388 2.298-0.116 3.3 1 3.4 c1.673 0 3.773-2.102 3.773-6.58c0-5.061-3.27-8.994-9.303-8.994c-5.957 0-11.175 4.673-11.175 12.1 c0 6.5 4.2 10.2 10 10.201c1.986 0 4.089-0.43 5.646-1.245L20.111 26.147z M16.646 10.1 c-0.311-0.078-0.701-0.155-1.207-0.155c-2.571 0-4.595 2.53-4.595 5.529c0 1.5 0.7 2.4 1.9 2.4 c1.441 0 2.959-1.828 3.311-4.087L16.646 10.068z"/></g></svg>
          </span>
          <span class="text">email</span>
        </a>
      </li>

    </ul>
  </div>
</div>


  <div class="row">
  <div class="small-12 large-10 large-offset-2 columns">

    <nav class="pagination-links">

      
        
          <a class="previous" title="Running Vim within IRB" href="/episodes/running-vim-within-irb/">&laquo; Previous</a>
        
      
        
          <a class="next" title="Selecting columns with visual block mode" href="/episodes/selecting-columns-with-visual-block-mode/">Next &raquo;</a>
        
      

    </nav>

  </div>
</div>



  <div class="row">
  <hr/>
  <div class="small-12 columns">

  
  
    <div class="metaheader">
      <h3>Browse similar content</h3>
    </div>
    <ul class="category-list">
  
    
    <li>
    <a href="/categories/editing-text">
      <h4>Editing text</h4>
      <p>
      15&nbsp;screencasts
      </p>
    </a>
    </li>
  
    
    <li>
    <a href="/categories/registers">
      <h4>registers</h4>
      <p>
      10&nbsp;screencasts, 3&nbsp;articles
      </p>
    </a>
    </li>
  
    
    <li>
    <a href="/categories/repetition">
      <h4>Repetition</h4>
      <p>
      6&nbsp;screencasts
      </p>
    </a>
    </li>
  
    
    <li>
    <a href="/categories/text-objects">
      <h4>Text objects</h4>
      <p>
      1&nbsp;screencast, 2&nbsp;articles
      </p>
    </a>
    </li>
  
</ul>

  


  </div>
</div>

<div class="pro-content">
  <hr/>
  <div class="level-up">
    <div class="metaheader">
      <h2>Level-up your Vim</h2>
    </div>
  </div>

  <h3>Training</h3>
  <div class="training">
    <p class="pitch">
      Boost your productivity with a <a href="/training">Vim training class</a>.
      Join a public class,
      or book a private session for your team.
    </p>
    <blockquote>
      <p>Drew hosted a private Vim session for the shopify team that was one of the best workshops I have ever attended.</p>
      <p>John Duff, Director of Engineering at Shopify</p>
    </blockquote>
  </div>

</div>

<div class="pro-content">
  <h3>Publications</h3>
  <div class="publications">
    <p class="pitch">
      Make yourself a faster and more efficient developer with the help of <a href="/publications">these publications</a>, including Practical Vim (Pragmatic Bookshelf 2012), which has over 50 five-star reviews on Amazon.
    </p>
    <blockquote>
      <p>After reading it, I've switched to vim as my default editor on a daily basis with no regrets. &#9733;&#9733;&#9733;&#9733;&#9733;</p>
      <p>Javier Collado</p>
    </blockquote>
  </div>
  <div class="publications-image practical-vim">
    <img src="/images/practical-vim/practical-vim-cover-550.jpg"/>
  </div>
</div>

<div class="pro-content">
  <h3>Learn to use Vim efficiently in your Ruby projects</h3>
  <div class="pro-screencasts">
    <p class="pitch">
      In association with Thoughtbot, one of the most well respected Rails consultancies in the world, I've produced a series of screencasts on how to make navigating your Ruby projects with Vim ultra-efficient.
      Along the way, you’ll also learn how to make Ruby blocks a first-class text object in Vim.
      This lets you edit Ruby code at a higher level of abstraction.
      <a href="https://learn.thoughtbot.com/products/21-navigating-ruby-files-with-vim">Available to buy from Thoughtbot.</a>.
    </p>
  </div>
  <div class="pro-screencasts-image">
    <img src="/images/thoughtbot-robot-logo.png"/>
  </div>
</div>


  <div class="row">
    <div class="small-12 columns">
      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/announcements">Announcements</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>

    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  

  </body>
</html>

