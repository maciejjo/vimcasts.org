
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Using Vim's paste mode with the system paste command</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/vimcasts.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_using-vims-paste-mode-with-the-system-paste-command episodes_using-vims-paste-mode-with-the-system-paste-command_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-medium-up" data-topbar>
          <ul class="title-area">
            <li class="name"></li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right search-form-wrapper">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="compact-nav tab-bar hide-for-medium-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="right tab-bar-section">
          
            <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


          
        </section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">
      
    </div>
  </div>

  <section class="screencast">
    <div class="title-row">
      <h2 class="title">
        Using Vim's paste mode with the system paste command
      </h2>
      <h2 class="episode_number">
        <small>#</small>59
      </h2>
    </div>

    <div class="pubdate-row">
      <div class="video-tags">
        
          Tagged with:
          <a href="/categories/registers">registers</a>, <a href="/categories/copy-and-paste">copy-and-paste</a>
        
      </div>
      <time class="pubdate" pubdate="pubdate" datetime="2013-11-15">
        <div class="hide-for-medium-up">Nov&nbsp;15, '13</div><div class="show-for-medium-up">Nov 15, 2013</div>
      </time>
    </div>

    <div class="summary-row">
      <div class="episode_summary enlarged" data-swiftype-index="true">
        <p>When Vim is compiled without the <code>+clipboard</code> feature, we can still insert text from the clipboard using the system paste command (<code>ctrl-v</code> or <code>cmd-v</code>). This can produce strange effects, but we can avoid them by toggling the <code>paste</code> option each time we use the system paste command.</p>


      </div>
    </div>

    <div class="video-row">

      <div class="video-column">
        <div class="video_wrapper">
          <video poster="http://vimcasts.org/images/posters/paste-option-toggle.png"
            controls="controls" preload="none" class="placeholder"
            id="episode_59_placeholder">
            <source src="http://media.vimcasts.org/videos/59/paste-option-toggle.ogv" type="video/ogg" />
            <source src="http://media.vimcasts.org/videos/59/paste-option-toggle.m4v" type="video/x-m4v" />
          </video>
        </div>
      </div>

      <aside class="downloads">

        <div class="download-videos">
          <h4>Download</h4>
          <ul class="downloads-list">
            <li class="ogg">
              <a href="http://media.vimcasts.org/videos/59/paste-option-toggle.ogv">OGG</a>
              <span class="stats">5.2 MB</span>
            </li>
            <li class="quicktime">
              <a href="http://media.vimcasts.org/videos/59/paste-option-toggle.m4v">Quicktime</a>
              <span class="stats">9.4 MB</span>
            </li>
          </ul>
        </div>

        <div class="video-metadata">
          <p class="video-duration">
            
            Run time:
            <time datetime="P4M,25S">
              4:25
            </time>
          </p>

          <p>
            <a href="/transcripts/59/en/">Read transcript</a>
          </p>
        </div>

      </aside>

    </div>

    <div class="content-row">
      <dl class="accordion" data-accordion>
        <dd>
          <a href="#shownotes">Shownotes<span class="disclosure"></span></a>
          <div id="shownotes" class="content" data-swiftype-index="true">
            

<p>If you <a href="https://gist.github.com/nelstrom/7416573">copy this snippet of JavaScript</a>, then use the system paste command (<code>ctrl-v</code>, or <code>cmd-v</code> for mac users) to paste it into a Vim session running in the terminal, you might end up with something that looks like this:</p>
<pre class="highlight plaintext">for (var i = 1; i &lt;= 100; i++) {
      if (i % 15 == 0) {
              console.log("FizzBuzz");
                } else if (i % 3 == 0) {
                        console.log("Fizz");
                          } else if (i % 5 == 0) {
                                  console.log("Buzz");
                                    } else {
                                            console.log(i);
                                              }
}
</pre>

<p>The problem is that when Vim runs inside a terminal, it can&rsquo;t distinguish between characters that are typed manually and those that are pasted. In this case, each time Vim creates a new line, it&rsquo;s autoindented. Add on top of that the indentation that was already present the source code, and we end up with each line drifting farther and farther to the right.</p>

<p>We can avoid this by enabling the <code>paste</code> option, which temporarily disables several settings that can interfere when pasting text.</p>
<pre class="highlight plaintext">:set paste
</pre>

<p>With that option enabled, the system paste command should work in Insert mode just fine.</p>

<h3>Why not keep &lsquo;paste&rsquo; enabled at all times?</h3>

<p>You might be thinking: Why not keep the <code>paste</code> option enabled at all times? Here&rsquo;s the gotcha: when the paste option is enabled, any abbreviations or mappings defined for Insert mode will be disabled. For example, suppose that you have this mapping set up, to swich from Insert to Normal mode by typing <code>kj</code>:</p>
<pre class="highlight plaintext">:inoremap kj &lt;Esc&gt;
</pre>

<p>If the <code>paste</code> option is enabled, then typing <code>kj</code> will insert those characters into the document. But with the <code>paste</code> option disabled, typing <code>kj</code> will behave just as though you pressed <code>&lt;Esc&gt;</code>.</p>

<p>So remember: with the <code>paste</code> option enabled, you&rsquo;re safe to use the system paste command, but any user-defined Insert mode mappings will fail. For that reason, it&rsquo;s a good idea to turn off the <code>paste</code> option as soon as you&rsquo;re finished using it.</p>

<p>If you&rsquo;re thinking of creating a mapping to make it easier to toggle the paste option, don&rsquo;t forget that your mapping won&rsquo;t work in Insert mode! Read Vim&rsquo;s documentation on <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#&amp;#x27;pastetoggle&amp;#x27;"><code>&#39;pastetoggle&#39;</code></a> to learn about a workaround.</p>

<h3>The unimpaired workflow</h3>

<p>I like the approach that&rsquo;s enabled by Tim Pope&rsquo;s <a href="https://github.com/tpope/vim-unimpaired">unimpaired plugin</a>. In <a href="https://github.com/tpope/vim-unimpaired/blob/a029dc28ebc1ba5953cd5b0ef9a50bd0ffba3aa4/doc/unimpaired.txt#L88-L94">the documentation</a>, he notes that:</p>

<blockquote>
<p>you toggle twice, but you only paste once (<a href="https://github.com/tpope/vim-unimpaired/blob/a029dc28ebc1ba5953cd5b0ef9a50bd0ffba3aa4/doc/unimpaired.txt#L88-L94">YOPO</a>).</p>
</blockquote>

<p>Unimpaired provides a <code>yo</code> mapping. Just like the regular <code>o</code> command, it opens a new line and switches to Insert mode, but the <code>yo</code> variant also enables the <code>paste</code> option making it safe to use the system paste command. It uses an autocommand to disable the <code>paste</code> option when you return to Normal mode. That&rsquo;s a much neater workflow than having to toggle the <code>paste</code> option on and off again manually.</p>

<h3>Further reading</h3>

<ul>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/options.html#&amp;#x27;paste&amp;#x27;">:h &lsquo;paste&rsquo;</a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/options.html#&amp;#x27;pastetoggle&amp;#x27;">:h &lsquo;pastetoggle&rsquo;</a></li>
<li><a href="https://github.com/tpope/vim-unimpaired">vim-unimpaired</a> provides a smoother workflow - <a href="https://github.com/tpope/vim-unimpaired/blob/a029dc28ebc1ba5953cd5b0ef9a50bd0ffba3aa4/doc/unimpaired.txt#L88-L94">&ldquo;you only paste once&rdquo;</a></li>
</ul>

          </div>
        </dd>
        <dd>
          <a href="#comments" class="show-comments">Comments<span class="disclosure"></span></a>
          <div id="comments" class="content">
            <div id="disqus_thread"></div>

          </div>
        </dd>
      </dl>
    </div>

  </section>

  
<div class="share-container">
  <p class="call-to-action">Like this video? Spread the word!</p>

  <!-- buttons start here -->
  <div class="buttons">
    <ul class="rrssb-buttons">

      <li class="twitter">
        <a href="http://twitter.com/home?status=Using%20Vim's%20paste%20mode%20with%20the%20system%20paste%20command http://proof.vimcasts.org/episodes/using-vims-paste-mode-with-the-system-paste-command/" class="popup">
          <span class="icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
              <path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32
              c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155
              C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965
              C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683
              c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851
              C26.275,7.229,25.39,8.196,24.253,8.756z"/>
            </svg>
          </span>
          <span class="text">twitter</span>
        </a>
      </li>

      <li class="googleplus">
        <a href="https://plus.google.com/share?url=Using%20Vim's%20paste%20mode%20with%20the%20system%20paste%20command http://proof.vimcasts.org/episodes/using-vims-paste-mode-with-the-system-paste-command/" class="popup">
          <span class="icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
              <g>
              <g>
              <path d="M14.703,15.854l-1.219-0.948c-0.372-0.308-0.88-0.715-0.88-1.459c0-0.748,0.508-1.223,0.95-1.663
              c1.42-1.119,2.839-2.309,2.839-4.817c0-2.58-1.621-3.937-2.399-4.581h2.097l2.202-1.383h-6.67c-1.83,0-4.467,0.433-6.398,2.027
              C3.768,4.287,3.059,6.018,3.059,7.576c0,2.634,2.022,5.328,5.604,5.328c0.339,0,0.71-0.033,1.083-0.068
              c-0.167,0.408-0.336,0.748-0.336,1.324c0,1.04,0.551,1.685,1.011,2.297c-1.524,0.104-4.37,0.273-6.467,1.562
              c-1.998,1.188-2.605,2.916-2.605,4.137c0,2.512,2.358,4.84,7.289,4.84c5.822,0,8.904-3.223,8.904-6.41
              c0.008-2.327-1.359-3.489-2.829-4.731H14.703z M10.269,11.951c-2.912,0-4.231-3.765-4.231-6.037c0-0.884,0.168-1.797,0.744-2.511
              c0.543-0.679,1.489-1.12,2.372-1.12c2.807,0,4.256,3.798,4.256,6.242c0,0.612-0.067,1.694-0.845,2.478
              c-0.537,0.55-1.438,0.948-2.295,0.951V11.951z M10.302,25.609c-3.621,0-5.957-1.732-5.957-4.142c0-2.408,2.165-3.223,2.911-3.492
              c1.421-0.479,3.25-0.545,3.555-0.545c0.338,0,0.52,0,0.766,0.034c2.574,1.838,3.706,2.757,3.706,4.479
              c-0.002,2.073-1.736,3.665-4.982,3.649L10.302,25.609z"/>
              <polygon points="23.254,11.89 23.254,8.521 21.569,8.521 21.569,11.89 18.202,11.89 18.202,13.604 21.569,13.604 21.569,17.004
              23.254,17.004 23.254,13.604 26.653,13.604 26.653,11.89      "/>
              </g>
              </g>
            </svg>
          </span>
          <span class="text">google+</span>
        </a>
      </li>

      <li class="facebook">
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://proof.vimcasts.org/episodes/using-vims-paste-mode-with-the-system-paste-command/" class="popup">
          <span class="icon">
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve">
              <path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434
              c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726
              c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z"/>
            </svg>
          </span>
          <span class="text">facebook</span>
        </a>
      </li>

      <li class="email">
        <a href="mailto:?subject=Using%20Vim's%20paste%20mode%20with%20the%20system%20paste%20command&amp;body=http%3A%2F%2Fproof.vimcasts.org%2Fepisodes%2Fusing-vims-paste-mode-with-the-system-paste-command%2F">
          <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" xml:space="preserve"><g><path d="M20.111 26.147c-2.336 1.051-4.361 1.401-7.125 1.401c-6.462 0-12.146-4.633-12.146-12.265 c0-7.94 5.762-14.833 14.561-14.833c6.853 0 11.8 4.7 11.8 11.252c0 5.684-3.194 9.265-7.399 9.3 c-1.829 0-3.153-0.934-3.347-2.997h-0.077c-1.208 1.986-2.96 2.997-5.023 2.997c-2.532 0-4.361-1.868-4.361-5.062 c0-4.749 3.504-9.071 9.111-9.071c1.713 0 3.7 0.4 4.6 0.973l-1.169 7.203c-0.388 2.298-0.116 3.3 1 3.4 c1.673 0 3.773-2.102 3.773-6.58c0-5.061-3.27-8.994-9.303-8.994c-5.957 0-11.175 4.673-11.175 12.1 c0 6.5 4.2 10.2 10 10.201c1.986 0 4.089-0.43 5.646-1.245L20.111 26.147z M16.646 10.1 c-0.311-0.078-0.701-0.155-1.207-0.155c-2.571 0-4.595 2.53-4.595 5.529c0 1.5 0.7 2.4 1.9 2.4 c1.441 0 2.959-1.828 3.311-4.087L16.646 10.068z"/></g></svg>
          </span>
          <span class="text">email</span>
        </a>
      </li>

    </ul>
  </div>
</div>


  <div class="row">
    <div class="small-12 columns">
      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/blog/2013/11/registers-the-good-the-bad-and-the-ugly-parts/">Registers: the Good, the Bad, and the Ugly Parts</a></h4>
        <p>To the newcomer, Vim&rsquo;s way of doing things may seem strange, but with familiarity it becomes natural. Many of Vim&rsquo;s features seemed odd to me at first, but when I got used to them I recognised that they had their own particular elegance. However, there&rsquo;s one feature of Vim that still feels awkward to me: using registers for copy and paste. The deeper my understanding of registers becomes, the more they frustrate me!</p>


      </li>
    
      <li>
        <h4><a href="/blog/2013/11/the-copypaste-series-a-retrospective/">The copy/paste series - a retrospective</a></h4>
        <p>Episodes <a href="/e/51">51</a>, <a href="/e/52">52</a>, <a href="/e/53">53</a>, <a href="/e/54">54</a>, <a href="/e/55">55</a>, <a href="/e/58">58</a>, and <a href="/e/59">59</a> are all on the topic of copy and paste in Vim. I think that this is one area where Vim is especially confusing, partly because of <a href="http://vimcasts.org/episodes/meet-the-yank-register#vim-jargon">Vim&rsquo;s non-standard jargon for cut, copy and paste operations</a>. It&rsquo;s not the most intuitive copy/paste system, but it&rsquo;s usable when you get the hang of certain concepts and techniques.</p>


      </li>
    
      <li>
        <h4><a href="/blog/2013/11/getting-vim-with-clipboard-support/">Getting Vim with `+clipboard` support</a></h4>
        <p>Many systems ship with a version of Vim that was compiled with the <code>-clipboard</code> feature disabled, which is a damned nuisance! Being able to <a href="http://vimcasts.org/e/58">access the system clipboard from Vim</a> is an essential feature. Let&rsquo;s look at a few ways of getting the <code>+clipboard</code> feature on OS X and Ubuntu.</p>


      </li>
    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    

  </ul>
</div>

      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>

    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  

  </body>
</html>

