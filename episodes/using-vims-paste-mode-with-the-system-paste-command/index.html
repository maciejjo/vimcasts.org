
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Using Vim's paste mode with the system paste command</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_using-vims-paste-mode-with-the-system-paste-command episodes_using-vims-paste-mode-with-the-system-paste-command_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Using Vim's paste mode with the system paste command</h2>
        <div class="episode_number">
          <small>#</small>59
        </div>
        <time pubdate="pubdate" datetime="2013-11-15">
          Nov 15, 2013
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P4M,25S">
            4:25
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/registers">registers</a>, <a href="/categories/copy-and-paste">copy-and-paste</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>When Vim is compiled without the <code>+clipboard</code> feature, we can still insert text from the clipboard using the system paste command (<code>ctrl-v</code> or <code>cmd-v</code>). This can produce strange effects, but we can avoid them by toggling the <code>paste</code> option each time we use the system paste command.</p>


      </div>

      <video poster="http://vimcasts.org/images/posters/paste-option-toggle.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_59_placeholder">
        <source src="http://media.vimcasts.org/videos/59/paste-option-toggle.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/59/paste-option-toggle.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/59/paste-option-toggle.ogv">OGG</a>
          <span class="stats">5.2 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/59/paste-option-toggle.m4v">Quicktime</a>
          <span class="stats">9.4 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/59/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<p>If you <a href="https://gist.github.com/nelstrom/7416573">copy this snippet of JavaScript</a>, then use the system paste command (<code>ctrl-v</code>, or <code>cmd-v</code> for mac users) to paste it into a Vim session running in the terminal, you might end up with something that looks like this:</p>

<pre><code>for (var i = 1; i &lt;= 100; i++) {
      if (i % 15 == 0) {
              console.log("FizzBuzz");
                } else if (i % 3 == 0) {
                        console.log("Fizz");
                          } else if (i % 5 == 0) {
                                  console.log("Buzz");
                                    } else {
                                            console.log(i);
                                              }
}
</code></pre>

<p>The problem is that when Vim runs inside a terminal, it can't distinguish between characters that are typed manually and those that are pasted. In this case, each time Vim creates a new line, it's autoindented. Add on top of that the indentation that was already present the source code, and we end up with each line drifting farther and farther to the right.</p>

<p>We can avoid this by enabling the <code>paste</code> option, which temporarily disables several settings that can interfere when pasting text.</p>

<pre><code>:set paste
</code></pre>

<p>With that option enabled, the system paste command should work in Insert mode just fine.</p>

<h3 id="why-not-keep-paste-enabled-at-all-times">Why not keep 'paste' enabled at all times?</h3>

<p>You might be thinking: Why not keep the <code>paste</code> option enabled at all times? Here's the gotcha: when the paste option is enabled, any abbreviations or mappings defined for Insert mode will be disabled. For example, suppose that you have this mapping set up, to swich from Insert to Normal mode by typing <code>kj</code>:</p>

<pre><code>:inoremap kj &lt;Esc&gt;
</code></pre>

<p>If the <code>paste</code> option is enabled, then typing <code>kj</code> will insert those characters into the document. But with the <code>paste</code> option disabled, typing <code>kj</code> will behave just as though you pressed <code>&lt;Esc&gt;</code>.</p>

<p>So remember: with the <code>paste</code> option enabled, you're safe to use the system paste command, but any user-defined Insert mode mappings will fail. For that reason, it's a good idea to turn off the <code>paste</code> option as soon as you're finished using it.</p>

<p>If you're thinking of creating a mapping to make it easier to toggle the paste option, don't forget that your mapping won't work in Insert mode! Read Vim's documentation on <a title="pastetoggle" href="http://vimdoc.sourceforge.net/htmldoc/options.html#"><code>'pastetoggle'</code></a> to learn about a workaround.</p>

<h3 id="the-unimpaired-workflow">The unimpaired workflow</h3>

<p>I like the approach that's enabled by Tim Pope's <a href="https://github.com/tpope/vim-unimpaired">unimpaired plugin</a>. In <a href="https://github.com/tpope/vim-unimpaired/blob/a029dc28ebc1ba5953cd5b0ef9a50bd0ffba3aa4/doc/unimpaired.txt#L88-L94">the documentation</a>, he notes that:</p>

<blockquote>
  <p>you toggle twice, but you only paste once (<a href="https://github.com/tpope/vim-unimpaired/blob/a029dc28ebc1ba5953cd5b0ef9a50bd0ffba3aa4/doc/unimpaired.txt#L88-L94">YOPO</a>).</p>
</blockquote>

<p>Unimpaired provides a <code>yo</code> mapping. Just like the regular <code>o</code> command, it opens a new line and switches to Insert mode, but the <code>yo</code> variant also enables the <code>paste</code> option making it safe to use the system paste command. It uses an autocommand to disable the <code>paste</code> option when you return to Normal mode. That's a much neater workflow than having to toggle the <code>paste</code> option on and off again manually.</p>

<h3 id="further-reading">Further reading</h3>

<ul>
  <li><a title="paste" href="http://vimdoc.sourceforge.net/htmldoc/options.html#">:h 'paste'</a></li>
  <li><a title="pastetoggle" href="http://vimdoc.sourceforge.net/htmldoc/options.html#">:h 'pastetoggle'</a></li>
  <li><a href="https://github.com/tpope/vim-unimpaired">vim-unimpaired</a> provides a smoother workflow - <a href="https://github.com/tpope/vim-unimpaired/blob/a029dc28ebc1ba5953cd5b0ef9a50bd0ffba3aa4/doc/unimpaired.txt#L88-L94">"you only paste once"</a></li>
</ul>


        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>


      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/blog/2013/11/registers-the-good-the-bad-and-the-ugly-parts/">Registers: the Good, the Bad, and the Ugly Parts</a></h4>
        <p>To the newcomer, Vim's way of doing things may seem strange, but with familiarity it becomes natural. Many of Vim's features seemed odd to me at first, but when I got used to them I recognised that they had their own particular elegance. However, there's one feature of Vim that still feels awkward to me: using registers for copy and paste. The deeper my understanding of registers becomes, the more they frustrate me!</p>


      </li>
    
      <li>
        <h4><a href="/blog/2013/11/getting-vim-with-clipboard-support/">Getting Vim with `+clipboard` support</a></h4>
        <p>Many systems ship with a version of Vim that was compiled with the <code>-clipboard</code> feature disabled, which is a damned nuisance! Being able to <a href="http://vimcasts.org/e/58">access the system clipboard from Vim</a> is an essential feature. Let's look at a few ways of getting the <code>+clipboard</code> feature on OS X and Ubuntu.</p>


      </li>
    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    
      <li>
        <h4><a href="/blog/2013/11/the-copypaste-series-a-retrospective/">The copy/paste series - a retrospective</a></h4>
        <p>Episodes <a href="/e/51">51</a>, <a href="/e/52">52</a>, <a href="/e/53">53</a>, <a href="/e/54">54</a>, <a href="/e/55">55</a>, <a href="/e/58">58</a>, and <a href="/e/59">59</a> are all on the topic of copy and paste in Vim. I think that this is one area where Vim is especially confusing, partly because of <a href="http://vimcasts.org/episodes/meet-the-yank-register#vim-jargon">Vim's non-standard jargon for cut, copy and paste operations</a>. It's not the most intuitive copy/paste system, but it's usable when you get the hang of certain concepts and techniques.</p>


      </li>
    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    

  </ul>
</div>


      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

