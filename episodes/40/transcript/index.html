<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title></title>

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_40 episodes_40_transcript episodes_40_transcript_index">

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay">hey</div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
            <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">
            <!-- Right Nav Section -->
            <ul class="right">
              <li class="has-form">
              <div class="row collapse">
                <div class="large-8 small-9 columns">
                  <input type="text" placeholder="Explore archives">
                </div>
                <div class="large-4 small-3 columns">
                  <a href="#" class="alert button expand">Search</a>
                </div>
              </div>
              </li>
            </ul>

            <!-- Left Nav Section -->
            <ul class="left">
              <li><a href="/categories">Episodes</a></li>
              <li><a href="/blog">Blog</a></li>
              <li><a href="/training">Training</a></li>
              <li><a href="/publications">Publications</a></li>
            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li><a href="/">Home</a></li>
          <li><a href="/episodes">Episodes</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/training">Training</a></li>
          <li><a href="/publications">Publications</a></li>
          <li>
          <form>
            <label text="search">Search: <input type="search" disabled/></label>
          </form>
          </li>
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="show-for-small-only text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil</small>
            </h4>
            <h4 class="show-for-medium-up text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a></small>
            </h4>
            
          </div>
        </div>

        <p>[prep: :set nonumber foldcolumn=1]</p>

<p>Here's the brief: we'll copy this line (#9), and place a duplicate of it here. It's a simple task, but we'll see that there are severeal different ways of getting the job done.</p>

<h2 id="linewise-move-yank-linewise-move-put">Linewise move, yank, linewise move, put</h2>

<p>Let's start with a na√Øve attempt. We'll move our cursor linewise to the bit we want to copy, then yank that line:</p>

<pre><code>kkkkkkk
yy
</code></pre>

<p>Then we'll reverse back to where we started, and paste the line that we yanked:</p>

<pre><code>jjjjjjj
p
</code></pre>

<p>If you care about using Vim well, this should make you wince.</p>

<p>Let's look at those keystrokes. It should be immediately striking that most of these keystrokes are simply moving the cursor, one line at a time. We can do better than this.</p>

<h2 id="line-jump-yank-snapback-put">Line jump, yank, snapback, put</h2>

<p>Let's undo that change, and start again. I'm going to turn on line numbers, by running:</p>

<pre><code>:set number
</code></pre>

<p>Now we can see the number of the line that we want to copy: it's line 9. We can get there in a single move: by pressing 9G (nine-shift-gee), to <em>go to the specified line</em>. As before, we'll yank the current line:</p>

<pre><code>9G
yy
</code></pre>

<p>Now we could get back to where we came from by pressing 16G (sixteen-shift-gee), but there's a better way. You see, the goto line motion creates a record in Vim's jumplist. That means that we can snap back to where we came from using the <code>ctrl-o</code> command. </p>

<pre><code>&lt;C-o&gt;
p
</code></pre>

<p>Now that our cursor is in the correct position, we can paste the line that we yanked. Job done!</p>

<p>Comparing the last two solutions, we can see that jumping to a linenumber can save a lot of keystrokes compared to moving the cursor one line at a time. Also, using the jumplist to snapback to where we came from means that we only have to look up one line number, instead of two. That's not a great saving in terms of keystrokes, but it is a saving in terms of brain-cycles.</p>

<h2 id="remote-yank-put">Remote yank, put</h2>

<p>Vim has another command for jumping to a specified line number. Instead of pressing nine-shift-gee, we could press colon-nine-enter:</p>

<pre><code>:9
</code></pre>

<p>This is an Ex command, so the specified number is treated as an address. The result in this case is that the cursor is moved to the specified line number.</p>

<p>But watch this. I'll just move my cursor back to where it started, then I'll run (colon-nine-yank):</p>

<pre><code>:9yank
</code></pre>

<p>This yanks the specified line, and the cool thing about this command is that it doesn't move the cursor. We've got it right where we want it, so now we can paste the line using the Normal mode <code>p</code> command.</p>

<p>Altogether, that sequence of commands can be reduced to:</p>

<pre><code>:9y
p
</code></pre>

<p>Our cursor never moves, so this technique allows us to cut the number of steps in half.</p>

<p>Pretty neat! But we can still do better.</p>

<h2 id="copy">Copy</h2>

<p>Vim has another Ex command which combines the yank and put steps into one. It's called :copy:</p>

<pre><code>:help :copy
</code></pre>

<p>It accepts a range, and an address. The range is the line (or lines) that you want to copy. The address is the destination where you want the duplicated line to appear.</p>

<p>In our example, we want to copy line 9, and paste the duplicate below line 16. That translates to:</p>

<pre><code>:9copy16
</code></pre>

<p>Bang! Job done, in one move.</p>

<p>But this is the long-hand form. We can shave off a few more keystrokes. First of all, the copy command has a one-letter alias (colon-tee):</p>

<pre><code>:help :t
</code></pre>

<p>As a mnemonic, I think of it as <em>copy TO</em>. Using that, we can cut this down to:</p>

<pre><code>:9t16
</code></pre>

<p>There's some redundant information in this command: can you spot it?</p>

<p>[pause]</p>

<p>Our cursor is positioned on line 16, so why should we have to look up that address and type the number into our command line? In Ex commands, where an address is expected, you can always use the dot symbol as a shorthand for the current line. So we can reduce this to:</p>

<pre><code>:9t.
</code></pre>

<p>That reads as: take line 9, copy to, below the current line. That's a lot of information packed into three characters! And it's about as far as we can compress this. </p>

<h2 id="set-relativenumber">:set relativenumber</h2>

<p>You might be thinking: 'how can I use this with relativenumber?' Well, let's see. I'll enable the relativenumber setting:</p>

<pre><code>:set relativenumber
</code></pre>

<p>With this enabled, Vim shows line numbers relative to the cursor position. </p>

<p>The line that we want to duplicate is now labelled seven, which means it's seven lines above the current cursor position.</p>

<p>If we prefix our address with a minus or plus sign, then Vim will calculate the line number as an offset against the current line. So we can simply say:</p>

<pre><code>:-7t.
</code></pre>

<p>And that does the job. So you can use the <code>:t</code> command whether you use absolute or relative line numbering.</p>

      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>


    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
