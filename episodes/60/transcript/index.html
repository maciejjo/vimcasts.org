<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title></title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_60 episodes_60_transcript episodes_60_transcript_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

        <p>Here I have a draft of the shownotes for a previous Vimcasts episode. Since publishing this episode, I&rsquo;ve made a couple of changes in the Vimcasts CMS. Now I&rsquo;d like to compare my local draft with the latest revision.</p>

<p>You may already know about the <code>vimdiff</code> command:</p>
<pre class="highlight plaintext">man vimdiff
</pre>

<p>We can call this from the command line giving it two or more filenames. vimdiff launches Vim, creates a window for each specified file, and highlights the differences between them.</p>

<p>We have a slight problem here though: one of the text files we want to compare is contained in a text area on a webpage. Before we can use <code>vimdiff</code>, we&rsquo;ll have to put that text into a file. I&rsquo;ll do so by copying the contents of the text area to my clipboard, then saving it to a file:</p>
<pre class="highlight plaintext">pbpaste &gt; 45-shownotes-latest.md
</pre>

<p>I&rsquo;m using the <code>pbpaste</code> command here, which is specific to os x.</p>

<p>Now we can run vimdiff:</p>
<pre class="highlight plaintext">vimdiff 45-shownotes-draft.md 45-shownotes.md
</pre>

<p>That opens each of the specified files in its own split window, and highlights the bits that are different. I can jump forward and back between changes using the &ldquo;square-bracket C&rdquo; commands.</p>

<p>If I wanted to resolve these differences, I could use the <code>:diffput</code> and <code>:diffget</code> commands. Check out episodes 32 and 33 for a demonstration of how they work.</p>

<p>Well that&rsquo;s one way of comparing these two drafts, but I&rsquo;m not too keen on this workflow. I have no further use for this temporary file, so I&rsquo;ll have to clean up afterwards by removing it.</p>
<pre class="highlight plaintext">rm 45-shownotes.md 
</pre>

<p>Also, I usually have an instance of Vim open already, and I&rsquo;d prefer a workflow that didn&rsquo;t require me to open a fresh instance of Vim.</p>

<p>Let&rsquo;s see if we can come up with a better workflow. I&rsquo;ll launch Vim as usual, and set up a couple of split windows. Suppose that I&rsquo;m working on this local copy, and I decide that I want to compare it with the latest revision. I want to keep this workspace as it is, so I&rsquo;ll open a new tabpage with the current buffer:</p>
<pre class="highlight plaintext">:tabedit %
</pre>

<p>Next, I&rsquo;ll open a new empty buffer in a vertical split:</p>
<pre class="highlight plaintext">:vnew
</pre>

<p>I&rsquo;d like to keep my draft on the left, so I&rsquo;ll swap the position of these two split windows.</p>

<p>Then I&rsquo;ll copy the text from the textarea on the webpage, and paste the clipboard contents into my empty buffer:</p>
<pre class="highlight plaintext">:0put+
</pre>

<p>Vim lets us start diff mode with the contents of our existing windows, by running the command:</p>
<pre class="highlight plaintext">:windo diffthis
</pre>

<p>Boom! We can see the changes between these two versions.</p>

<p>The nice thing about this technique is that we can use an unnamed buffer - there&rsquo;s no need to write the text to a temporary file. In this case, the buffer on the left corresponds to a file on my local filesystem, while the buffer on the right has no associated file. This technique would work just as well if neither buffer had been saved to disk, which makes it pretty flexible.</p>

<p>We can turn diffmode off again just as easily, by running:</p>
<pre class="highlight plaintext">:windo diffoff
</pre>

<p>Because we set up a fresh tabpage for these two windows, we can easily switch back to the other tabpage containing our previous workspace, which is just as we left it.</p>


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>
