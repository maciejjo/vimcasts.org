
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Running Vim within IRB</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_running-vim-within-irb episodes_running-vim-within-irb_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Running Vim within IRB</h2>
        <div class="episode_number">
          <small>#</small>20
        </div>
        <time pubdate="pubdate" datetime="2010-05-16">
          May 16, 2010
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P4M,35S">
            4:35
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/ruby">ruby</a>, <a href="/categories/interactive">interactive</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>If you work with ruby you will know that the interactive ruby shell, or 'IRB' for short, is a useful sketchpad for coding. But the command line interface of IRB can feel quite limiting in comparison with the power of your text editor. In this episode, I'm going to demonstrate how you can get the best of both worlds, by loading Vim from inside IRB.</p>


      </div>

      <video poster="http://vimcasts.org/images/posters/irb_and_vim.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_20_placeholder">
        <source src="http://media.vimcasts.org/videos/20/irb_and_vim.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/20/irb_and_vim.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/20/irb_and_vim.ogv">OGG</a>
          <span class="stats">5.8 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/20/irb_and_vim.m4v">Quicktime</a>
          <span class="stats">8.6 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/20/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<p>IRB is great for trying out one liners, but if you need to sketch longer
blocks of ruby, it soon falls down. </p>

<p>In his <a href="http://utilitybelt.rubyforge.org/">Utility Belt gem</a>, <a href="http://gilesbowkett.blogspot.com/2008/11/vi-in-irb-screencasting-fail.html">Giles Bowkett</a> has
collected a grab-bag of tricks and techniques for IRB, the highlight of
which is the ability to <a href="http://gilesbowkett.blogspot.com/2007/10/use-vi-or-any-text-editor-from-within.html">interactively edit code in your text
editor</a>. The Utility Belt gem hasn't been updated in a little
while, but the interactive editor has continued to evolve, thanks to
<a href="http://zegoggl.es/2009/04/integrating-vim-and-irb.html">Jan Berkel</a> and with help from <a href="http://blog.headius.com/">Charles Nutter</a>.</p>

<h2 id="installation">Installation</h2>

<p>Install the <a href="http://github.com/jberkel/interactive_editor">interactive editor gem</a> by running this at the
command line:</p>

<pre><code>gem install interactive_editor
</code></pre>

<p>Create an <code>~/.irbrc</code> file if you don't already have one, then paste the
following into it:</p>

<pre class="brush: ruby">
require 'rubygems'
require 'interactive_editor'
</pre>

<p>Note that the utility belt gem also includes an interactive editor, but
it is currently out of date. If you require both <code>interactive_editor</code>
and <code>utility_belt</code> gems in your .irbrc file, there may be some conflict
between them.</p>

<h2 id="vim-restore-cursor-position-and-highlight-syntax">Vim: restore cursor position and highlight syntax</h2>

<p>To get the most from this technique, you will want to ensure that you
have enabled filetype detection and syntax highlighting in Vim.
Additionally, it is helpful to have Vim <a href="http://vimdoc.sourceforge.net/htmldoc/usr_05.html#restore-cursor">restore the cursor
position</a> to where you left it. The following snippet of
Vimscript takes care of these.</p>

<pre class="brush: vimscript">
if has(&quot;autocmd&quot;)
  &quot; Enable filetype detection
  filetype plugin indent on

  &quot; Restore cursor position
  autocmd BufReadPost *
    \ if line(&quot;'\&quot;&quot;) &gt; 1 &amp;&amp; line(&quot;'\&quot;&quot;) &lt;= line(&quot;$&quot;) |
    \   exe &quot;normal! g`\&quot;&quot; |
    \ endif
endif
if &amp;t_Co &gt; 2 || has(&quot;gui_running&quot;)
  &quot; Enable syntax highlighting
  syntax on
endif
</pre>

<p>Note that the <a href="http://vim.cybermirror.org/runtime/vimrc_example.vim">example vimrc file</a> that comes with Vim
includes all of the above, so don't paste this into your vimrc without
first checking if you already have this functionality.</p>


        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>


      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
      <li>
      <h4><a href="/blog/2013/09/navigating-ruby-files-with-vim/">Navigating Ruby Files with Vim</a></h4>
      </li>
      
    
      <li>
      <h4><a href="/blog/2010/12/a-text-object-for-ruby-blocks/">A text-object for ruby blocks</a></h4>
      </li>
      
    
      <li>
      <h4><a href="/blog/2014/02/vimcasts-redesign-a-work-in-progress/">Vimcasts redesign: a work in progress</a></h4>
      </li>
      
    

    <li>
    <h4><a href="/training">Vim Training</a></h4>
    <p>Boost your productivity with a <a href="/training">Vim training class</a>. Join a public class, or <a href="/training/private">book a private session</a> for your team.</p>
    </li>
    <li>
    <h4><a href="/publications">Publications</a></h4>
    <p>
    Make yourself a faster and more efficient developer with the help of <a href="/publications">these publications</a>.
    </p>
    </li>
    <li>
    <h4><a href="/categories">Find by category</a></h4>
    <p>
    Vimcasts contains
    65 free screencasts and
    45 articles.
    <a href="/categories">Browse all content by category</a>.
    </p>
    </li>
  </ul>
</div>


      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

