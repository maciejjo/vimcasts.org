<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Running Vim within IRB</title>

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_running-vim-within-irb episodes_running-vim-within-irb_index">

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay">hey</div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">
            <!-- Right Nav Section -->
            <ul class="right">
              <li class="has-form">
              <div class="row collapse">
                <div class="large-8 small-9 columns">
                  <input type="text" placeholder="Explore archives">
                </div>
                <div class="large-4 small-3 columns">
                  <a href="#" class="alert button expand">Search</a>
                </div>
              </div>
              </li>
            </ul>

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


          <li>
          <form>
            <label text="search">Search: <input type="search" disabled/></label>
          </form>
          </li>
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="show-for-small-only text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil</small>
            </h4>
            <h4 class="show-for-medium-up text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a></small>
            </h4>
            
          </div>
        </div>

        <p>If you work with ruby you will know that the interactive ruby shell, or 'IRB' for short, is a useful sketchpad for coding. But the command line interface of IRB can feel quite limiting in comparison with the power of your text editor. In this episode, I'm going to demonstrate how you can get the best of both worlds, by loading Vim from inside IRB.</p>

<p></p>

<p>IRB is great for trying out one liners, but if you need to sketch longer
blocks of ruby, it soon falls down. </p>

<p>In his <a href="http://utilitybelt.rubyforge.org/">Utility Belt gem</a>, <a href="http://gilesbowkett.blogspot.com/2008/11/vi-in-irb-screencasting-fail.html">Giles Bowkett</a> has
collected a grab-bag of tricks and techniques for IRB, the highlight of
which is the ability to <a href="http://gilesbowkett.blogspot.com/2007/10/use-vi-or-any-text-editor-from-within.html">interactively edit code in your text
editor</a>. The Utility Belt gem hasn't been updated in a little
while, but the interactive editor has continued to evolve, thanks to
<a href="http://zegoggl.es/2009/04/integrating-vim-and-irb.html">Jan Berkel</a> and with help from <a href="http://blog.headius.com/">Charles Nutter</a>.</p>

<h2 id="installation">Installation</h2>

<p>Install the <a href="http://github.com/jberkel/interactive_editor">interactive editor gem</a> by running this at the
command line:</p>

<pre><code>gem install interactive_editor
</code></pre>

<p>Create an <code>~/.irbrc</code> file if you don't already have one, then paste the
following into it:</p>

<pre class="brush: ruby">
require 'rubygems'
require 'interactive_editor'
</pre>

<p>Note that the utility belt gem also includes an interactive editor, but
it is currently out of date. If you require both <code>interactive_editor</code>
and <code>utility_belt</code> gems in your .irbrc file, there may be some conflict
between them.</p>

<h2 id="vim-restore-cursor-position-and-highlight-syntax">Vim: restore cursor position and highlight syntax</h2>

<p>To get the most from this technique, you will want to ensure that you
have enabled filetype detection and syntax highlighting in Vim.
Additionally, it is helpful to have Vim <a href="http://vimdoc.sourceforge.net/htmldoc/usr_05.html#restore-cursor">restore the cursor
position</a> to where you left it. The following snippet of
Vimscript takes care of these.</p>

<pre class="brush: vimscript">
if has(&quot;autocmd&quot;)
  &quot; Enable filetype detection
  filetype plugin indent on

  &quot; Restore cursor position
  autocmd BufReadPost *
    \ if line(&quot;'\&quot;&quot;) &gt; 1 &amp;&amp; line(&quot;'\&quot;&quot;) &lt;= line(&quot;$&quot;) |
    \   exe &quot;normal! g`\&quot;&quot; |
    \ endif
endif
if &amp;t_Co &gt; 2 || has(&quot;gui_running&quot;)
  &quot; Enable syntax highlighting
  syntax on
endif
</pre>

<p>Note that the <a href="http://vim.cybermirror.org/runtime/vimrc_example.vim">example vimrc file</a> that comes with Vim
includes all of the above, so don't paste this into your vimrc without
first checking if you already have this functionality.</p>


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>


    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
