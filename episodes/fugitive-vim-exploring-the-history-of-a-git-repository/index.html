
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Fugitive.vim - exploring the history of a git repository</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_fugitive-vim-exploring-the-history-of-a-git-repository episodes_fugitive-vim-exploring-the-history-of-a-git-repository_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Fugitive.vim - exploring the history of a git repository</h2>
        <div class="episode_number">
          <small>#</small>35
        </div>
        <time pubdate="pubdate" datetime="2011-05-18">
          May 18, 2011
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P10M,04S">
            10:04
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/plugins">plugins</a>, <a href="/categories/fugitive">fugitive</a>, <a href="/categories/git">git</a>, <a href="/categories/workflow">workflow</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>Git provides tools for searching the contents of files, commit messages, and even whether text was added or removed by a commit. In this episode, we&rsquo;ll see how fugitive&rsquo;s <code>Ggrep</code> and <code>Glog</code> commands wrap this functionality up so that we can search the contents and history of a git repo from right inside of Vim.</p>

<p><em>This is the last of our five part series on fugitive.vim.</em></p>


      </div>

      <video poster="http://vimcasts.org/images/posters/fugitive_5.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_35_placeholder">
        <source src="http://media.vimcasts.org/videos/35/fugitive_5.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/35/fugitive_5.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/35/fugitive_5.ogv">OGG</a>
          <span class="stats">25.5 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/35/fugitive_5.m4v">Quicktime</a>
          <span class="stats">30.9 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/35/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<h3>Browsing past revisions of a file</h3>

<p>The <code>Glog</code> command makes it easy to examine all previous revisions of a file. It does this by loading each revision into its own buffer, and queuing them in the quickfix list in chronological order.</p>

<p>You can filter the results </p>

<table class="fullwidth">
  <tr>
    <th class="command">command</th>
    <th>action</th>
  </tr>
  <tr>
    <td>
      <code>:Glog</code>
    </td>
    <td>load all previous revisions of the current file into the quickfix list</td>
  </tr>
  <tr>
    <td>
      <code>:Glog -10</code>
    </td>
    <td>load the last ten previous revisions of the current file into the quickfix list</td>
  </tr>
  <tr>
    <td>
      <code>:Glog -10 --reverse</code>
    </td>
    <td>load the first ten revisions of the current file into the quickfix list (in reverse chronological order)</td>
  </tr>
  <tr>
    <td>
      <code>:Glog -1 --until=yesterday</code>
    </td>
    <td>load the last version of the current file that was checked in before midnight last night</td>
  </tr>
</table>

<h3>Browsing past commits</h3>

<p>You can also use the <code>:Glog</code> command to review past commit objects, by appending a trailing <code>--</code> argument. By default, this will load all ancestral commit objects into the quickfix list. If you supply a filepath after the <code>--</code> argument, then the list will be filtered to only include commit objects that touched the specified file.</p>

<table class="fullwidth">
  <tr>
    <th class="command">command</th>
    <th>action</th>
  </tr>
  <tr>
    <td>
      <code>:Glog&nbsp;--</code>
    </td>
    <td>load all ancestral commit objects into the quickfix list</td>
  </tr>
  <tr>
    <td>
      <code>:Glog&nbsp;-- %</code>
    </td>
    <td>load all ancestral commit objects that touched the current file into the quickfix list</td>
  </tr>
</table>

<p>Note that when fugitive loads a commit object into a buffer, it is interactive in a number of ways. See <a href="/e/34">episode 34</a> for more details.</p>

<h3>Working with the quickfix list</h3>

<p>I recommend installing <a href="http://www.vim.org/scripts/script.php?script_id=1590">unimpaired.vim</a>, another plugin by Tim Pope. This provides lots of useful pairs of mappings, including a handful that make working with the quickfix list much easier:</p>

<table class="fullwidth">
  <tr>
    <th>unimpaired</th>
    <th>Vim</th>
    <th>action</th>
  </tr>
  <tr>
    <td><code>[q</code></td>
    <td><code>:cprev</code></td>
    <td>jump to previous quickfix item</td>
  </tr>
  <tr>
    <td><code>]q</code></td>
    <td><code>:cnext</code></td>
    <td>jump to next quickfix item</td>
  </tr>
  <tr>
    <td><code>[Q</code></td>
    <td><code>:cfirst</code></td>
    <td>jump to first quickfix item</td>
  </tr>
  <tr>
    <td><code>]Q</code></td>
    <td><code>:clast</code></td>
    <td>jump to last quickfix item</td>
  </tr>
</table>

<h3>Searching the working tree with <code>Ggrep</code></h3>

<p>The <code>Ggrep</code> command is a wrapper for <code>git grep</code>. It uses the results to populate the quickfix list, so you can easily navigate the result list from inside Vim.</p>

<p>If you want to search your working tree for the text &lsquo;find me&rsquo;, simply run:</p>
<pre class="highlight plaintext">:Ggrep 'find me'
</pre>

<p>The <code>git grep</code> command only looks inside files that are tracked by the git repository. The fact that it only looks inside tracked files means that it skips over any files or directories listed in the <code>.gitignore</code> file.</p>

<h3>Searching branches, tags and commits with <code>Ggrep</code></h3>

<p><code>git grep</code> is not just limited to reading files on the filesystem. It can look inside any git object. So using <code>git grep</code>, you can search all files in any of your git branches without first having to switch to the branch.</p>

<table class="fullwidth">
  <tr>
    <th class="command">command</th>
    <th>action</th>
  </tr>
  <tr>
    <td>
      <code>:Ggrep&nbsp;findme</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in working copy files (excluding untracked files)</td>
  </tr>
  <tr>
    <td>
      <code>:Ggrep&nbsp;--cached&nbsp;findme</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in the index</td>
  </tr>
  <tr>
    <td>
      <code>:Ggrep&nbsp;findme&nbsp;branchname</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in branch &lsquo;branchname&rsquo;</td>
  </tr>
  <tr>
    <td>
      <code>:Ggrep&nbsp;findme&nbsp;tagname</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in tag &lsquo;tagname&rsquo;</td>
  </tr>
  <tr>
    <td>
      <code>:Ggrep&nbsp;findme&nbsp;SHA</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in the commit/tag identified by SHA</td>
  </tr>
</table>

<p>When you open a file that belongs on another branch, fugitive will automatically create a <em>read only</em> buffer for it.</p>

<h3>Searching for text in a commit message</h3>

<p>If you want to search the text of commit messages, you can do so by passing the <code>--grep</code> option to the <code>git log</code> command. For example, if you wanted to find commit messages containing the text &lsquo;findme&rsquo;, you could run:</p>
<pre class="highlight plaintext">git log --grep=findme
</pre>

<p>You can also do this from inside of Vim using the <code>:Glog</code> wrapper. This table summarizes a couple of ways you might use this:</p>

<table class="fullwidth">
  <tr>
    <th class="command">command</th>
    <th>action</th>
  </tr>
  <tr>
    <td>
      <code>:Glog&nbsp;--grep=findme&nbsp;--</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in all ancestral commit messages</td>
  </tr>
  <tr>
    <td>
      <code>:Glog&nbsp;--grep=findme&nbsp;--&nbsp;%</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in all ancestral commit messages that touch the currently active file</td>
  </tr>
</table>

<h3>Searching for text added or removed by a commit</h3>

<p>Git also makes it possible to <a href="http://www.kernel.org/pub/software/scm/git/docs/gitdiffcore.html#_diffcore_pickaxe_for_detecting_addition_deletion_of_specified_string">search for text that was added or removed by a commit using the pickaxe option</a>. This is activated with the <code>-S</code> switch as follows:</p>
<pre class="highlight plaintext">git log -Sfindme
</pre>

<p>This tells git to go through every commit, comparing the before and after state of <em>each file</em> that was changed by that commit. If the specified string is present in the file before, but absent from the file after the commit, then it counts as a match. The converse is also true, so if the specified string was either added or removed by the commit, then it will appear the git log results.</p>

<p>Here are a couple of examples demonstrating how the pickaxe option can be used with <code>:Glog</code>:</p>

<table class="fullwidth">
  <tr>
    <th class="command">command</th>
    <th>action</th>
  </tr>
  <tr>
    <td>
      <code>:Glog&nbsp;-Sfindme&nbsp;--</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in the diff for each ancestral commit</td>
  </tr>
  <tr>
    <td>
      <code>:Glog&nbsp;-Sfindme&nbsp;--&nbsp;%</code>
    </td>
    <td>search for &lsquo;findme&rsquo; in the diff for each ancestral commit that touches the currently active file</td>
  </tr>
</table>

<h3>Further reading</h3>

<ul>
<li><code>:help :Glog</code></li>
<li><code>:help :Ggrep</code></li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/git-grep.html"><code>man git-grep</code></a> (also, <code>git help grep</code>)</li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/git-log.html"><code>man git-log</code></a> (also, <code>git help log</code>)</li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/gitdiffcore.html"><code>man gitdiffcore</code></a></li>
<li><a href="http://www.kernel.org/pub/software/scm/git/docs/gitdiffcore.html#_diffcore_pickaxe_for_detecting_addition_deletion_of_specified_string">the git <em>pickaxe</em></a></li>
<li><a href="http://mshared.tumblr.com/post/3215710879/browsing-commits-in-vim-with-an-unimpaired-fugitive">Browsing Commits in Vim with an Unimpaired Fugitive</a></li>
<li><a href="http://gitster.livejournal.com/27674.html">Fun with &ldquo;git grep&rdquo;</a></li>
<li><a href="http://gitster.livejournal.com/30195.html">Fun with &ldquo;git log &ndash;grep&rdquo;</a></li>
<li><a href="http://gitster.livejournal.com/35628.html">Linus&rsquo;s ultimate content tracking tool</a></li>
</ul>

        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>


      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/blog/2012/08/on-sharpening-the-saw/">On sharpening the saw</a></h4>
        <p>Vim users sit somewhere on a spectrum, based on how much they customize their editor. At one end of the spectrum, there are those who use Vim with no customizations whatsoever. At the other end are those who customize Vim to the point where it barely resembles the stock install.</p>

<p><a href="https://www.destroyallsoftware.com/screencasts">Gary Bernhardt</a> advocates using stock Vim, with very few customizations.</p>

<blockquote>
<p>Vim is a chainsaw, and the last thing you want on a chainsaw is controls that are not the controls you&rsquo;re used to, because then you will cut your hand off.<br>
Gary Bernhardt on <a href="http://rubyrogues.com/040-rr-text-editors-and-ides/">Ruby Rogues episode 40</a> (17:35)</p>
</blockquote>

<p>Gary&rsquo;s chainsaw metaphor warns against the practice of over-customizing Vim. But I would also warn against using Vim without any customizations. Vim is highly configurable, and some of the default settings are suboptimal. If you don&rsquo;t have a basic vimrc, then you&rsquo;re putting up with inconveniences that were fixed decades ago.</p>


      </li>
    
      <li>
        <h4><a href="/blog/2011/05/the-fugitive-series/">The Fugitive Series - a retrospective</a></h4>
        <p><em>Fugitive.vim: a git wrapper so awesome, it should be illegal.</em> That&rsquo;s how Tim Pope describes his git plugin for Vim. I&rsquo;ve had <a href="http://www.vim.org/scripts/script.php?script_id=2975">fugitive.vim</a> installed since it was released, but until recently I never took the time to figure out what was <em>so awesome</em> that could make it illegal.</p>


      </li>
    
      <li>
        <h4><a href="/episodes/fugitive-vim-browsing-the-git-object-database/">Fugitive.vim - browsing the git object database</a></h4>
        <p>With the fugitive plugin, you&rsquo;re not limited to just working with files in your working tree. The <code>:Gedit</code> command allows you to open files in other branches, and to browse any <a href="http://book.git-scm.com/1_the_git_object_model.html">git object</a>, including tags, commits and trees. Plus, if your repository is hosted on github, you can easily bring up the webpage for any git object using the <code>:Gbrowse</code> command.</p>

<p><em>This is the penultimate of a five part series on fugitive.vim.</em></p>


      </li>
    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    

  </ul>
</div>


      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

