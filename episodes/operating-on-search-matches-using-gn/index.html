
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Operating on search matches using gn</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_operating-on-search-matches-using-gn episodes_operating-on-search-matches-using-gn_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Operating on search matches using gn</h2>
        <div class="episode_number">
          <small>#</small>63
        </div>
        <time pubdate="pubdate" datetime="2014-02-11">
          Feb 11, 2014
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P4M,35S">
            4:35
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/visual-mode">visual-mode</a>, <a href="/categories/search">search</a>, <a href="/categories/repeat">repeat</a>, <a href="/categories/regex">regex</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>The <code>gn</code> command (introduced in Vim 7.4) makes it easy to operate on regions of text that match the current search pattern. It&rsquo;s especially useful when used with a regex that matches text regions of variable length.</p>


      </div>

      <video poster="http://vimcasts.org/images/posters/gn-command.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_63_placeholder">
        <source src="http://media.vimcasts.org/videos/63/gn-command.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/63/gn-command.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/63/gn-command.ogv">OGG</a>
          <span class="stats">6.5 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/63/gn-command.m4v">Quicktime</a>
          <span class="stats">9.6 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/63/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<p>Here&rsquo;s what Vim&rsquo;s documentation has to say about the <code>gn</code> command (<a href="http://vimhelp.appspot.com/visual.txt.html#gn"><code>:help gn</code></a>):</p>

<blockquote>
<p>Search forward for the last used search pattern, like with <code>n</code>, and start
Visual mode to select the match. If the cursor is on the match, visually
selects it. If an operator is pending, operates on the match.</p>
</blockquote>

<p>You know how pressing <code>n</code> tells Vim to jump to the start of the next match?
Well, <code>gn</code> tells Vim to start visual mode and <em>select the next match</em>.
When used in this fashion, the <code>gn</code> command makes Vim&rsquo;s search behave like most graphical text editors, where the search command selects the current match.
As you might expect, the <code>gN</code> command lets you visually select the previous match.</p>

<p>I find the <code>gn</code> command especially useful in <a href="http://vimdoc.sourceforge.net/htmldoc/intro.html#Operator-pending-mode">Operator-pending mode</a>. For example, <code>dgn</code> will delete the next match, <code>cgn</code> will do the same then switch to Insert mode, <code>gUgn</code> will convert the next match to uppercase characters.
Look up <a href="http://vimhelp.appspot.com/motion.txt.html#operator"><code>:h operator</code></a> for more ideas.</p>

<h3>Using <code>gn</code> with the dot command</h3>

<p>Suppose that we have a document containing several occurrences of the word &lsquo;Normal&rsquo; and we&rsquo;d like to change each occurrence to &lsquo;Visual&rsquo;.
We can run <code>/Normal</code> to search for the word &lsquo;Normal&rsquo;, then type <code>cgnVisual&lt;Esc&gt;</code> to change the next match to the word &lsquo;Visual&rsquo;.
You&rsquo;re probably familiar with the technique of pressing <code>n.</code> to repeat the change for each subsequent match. In <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a>, I call this pattern of usage <em>The Dot Formula</em>.
It lets us use two keystrokes per change.</p>

<p>In this context, we can do better.
The dot command repeats the last change, which is equivalent to typing <code>cgnVisual&lt;Esc&gt;</code>.
We could translate that into plain English as: &ldquo;change the next match&rdquo;.
We don&rsquo;t have to press <code>n.</code> because <code>.</code> does the job by itself.
That makes it just one keystroke per change!</p>

<h3>You need Vim 7.4.110 to use <code>gn</code></h3>

<p>You can use the <code>gn</code> command if you are running Vim 7.4 at <a href="http://ftp.vim.org/pub/vim/patches/7.4/7.4.110">patch level 110</a> or greater.</p>

<p>The <code>gn</code> feature was first introduced by Christian Brabandt in Vim 7.3 with patch <a href="http://ftp.vim.org/pub/vim/patches/7.3/7.3.610">610</a>, then the functionality was refined with patches <a href="http://ftp.vim.org/pub/vim/patches/7.3/7.3.625">625</a>, <a href="http://ftp.vim.org/pub/vim/patches/7.3/7.3.636">636</a>, <a href="http://ftp.vim.org/pub/vim/patches/7.3/7.3.645">645</a>, <a href="http://ftp.vim.org/pub/vim/patches/7.3/7.3.647">647</a>, and <a href="http://ftp.vim.org/pub/vim/patches/7.3/7.3.1275">1275</a>. The feature was made widely available in Vim 7.4, but if you are running a version less than patch level 110 then the <code>gUgn</code> command demonstrated in this video won&rsquo;t work.</p>

<h3>Practical Vim - tip 84</h3>

<p>In the 1st edition of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a>, tip 84 goes over a different approach for making this same kind of change, which is nowhere near as tidy! When I wrote this edition, the <code>gn</code> feature hadn&rsquo;t yet been added to Vim. I&rsquo;ll have to revise this tip when the time comes to write a new edition of Practical Vim.</p>

<p>If you&rsquo;re stuck on an older version of Vim, note that you can get similar functionality by installing the <a href="https://github.com/kana/vim-textobj-lastpat">textobj-lastpat</a> plugin by Kana Natsuno.
I used to consider this to be an essential plugin, but don&rsquo;t now that the <code>gn</code> command is built-in to Vim.</p>

<h3>Further reading</h3>

<ul>
<li><a href="http://vimhelp.appspot.com/visual.txt.html#gn"><code>:help gn</code></a></li>
<li><a href="http://vimhelp.appspot.com/motion.txt.html#operator"><code>:help operator</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#."><code>:help .</code></a></li>
<li><a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a>, tip 84: Operate on a complete search match</li>
</ul>

        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>


      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/episodes/modal-editing-undo-redo-and-repeat/">Modal editing: undo, redo and repeat</a></h4>
        <p>Vim&rsquo;s modal editing paradigm - the newbie killer - brings tremendous efficiency if only you can learn to work with it, rather than against it. This episode demonstrates how the undo and repeat commands can benefit from spending short bursts of time in insert mode. </p>


      </li>
    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/episodes/swapping-two-regions-of-text-with-exchange-vim/">Swapping two regions of text with exchange.vim</a></h4>
        <p>Swapping two regions of text is a common task, which normally requires that we make two separate changes to the document.
Tom McDonald&rsquo;s <a href="https://github.com/tommcdo/vim-exchange">exchange plugin</a> offers an elegant alternative, by providing an operator that swaps two regions of text in one go.</p>


      </li>
    
      <li>
        <h4><a href="/episodes/creating-repeatable-mappings-with-repeat-vim/">Creating repeatable mappings with repeat.vim</a></h4>
        <p>The dot command is my all-time favorite Vim trick: it tells Vim to repeat the last change. But the dot command tends not to work well with user-defined mappings. In this episode, we&rsquo;ll use repeat.vim to set up a simple mapping so that it can be repeated using the dot command.</p>


      </li>
    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    

  </ul>
</div>


      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

