
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Comparing buffers with vimdiff</title>

    
      <meta name="st:robots" content="follow, index">
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_comparing-buffers-with-vimdiff episodes_comparing-buffers-with-vimdiff_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form"><input type="search" placeholder="Search the archives"/></form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form"><input type="search" placeholder="Search the archives"/></form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
I'll be teaching my Core Vim Class Online on March 5th.
</p>

      <a href="https://ti.to/studio-nelstrom/core-vim-class-online-4" class="button expand">Book now</a>

    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
I'll be teaching my Core Vim Class Online on March 5th.
</p>

    </div>

    <div class="small-4 column">
      <a href="https://ti.to/studio-nelstrom/core-vim-class-online-4" class="button expand">Book now</a>

    </div>
  </div>

</div>



      <header>
        <h2>Comparing buffers with vimdiff</h2>
        <div class="episode_number">
          <small>#</small>60
        </div>
        <time pubdate="pubdate" datetime="2014-01-15">
          Jan 15, 2014
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P4M,16S">
            4:16
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/vimdiff">vimdiff</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>Vim's diff mode allows us to easily compare the contents of two (or more) buffers. We can start Vim in diff mode using the <code>vimdiff</code> command, or if Vim is already running we can switch to diff mode using the <code>:diffthis</code> command. The beauty of the <code>:diffthis</code> command is that it works with unnamed buffers, whereas <code>vimdiff</code> can only work with files.</p>


      </div>

      <video poster="http://vimcasts.org/images/posters/vimdiff-buffers.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_60_placeholder">
        <source src="http://media.vimcasts.org/videos/60/vimdiff.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/60/vimdiff.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/60/vimdiff.ogv">OGG</a>
          <span class="stats">9.2 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/60/vimdiff.m4v">Quicktime</a>
          <span class="stats">12.6 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/60/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<h3 id="using-vimdiff-to-compare-two-files">Using vimdiff to compare two files</h3>

<p>We can call <code>vimdiff</code> from the command line giving it two or more filenames. vimdiff launches Vim, creates a window for each specified file, and highlights the differences between them.</p>

<p>In the video demonstration, one of the files that I wanted to compare was on my local filesystem, while the other file was in a textarea on a webpage. Before I could use <code>vimdiff</code>, I had to copy the text from that textarea into a local file. I did so using my system clipboard, then running the command:</p>

<pre><code>pbpaste &gt; 45-shownotes-latest.md
</code></pre>

<p>The <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pbpaste.1.html"><code>pbpaste</code></a> command is specific to os x, but similar commands are available on other systems.</p>

<p>We can now compare the two drafts by running:</p>

<pre><code>vimdiff 45-shownotes-draft.md 45-shownotes-latest.md
</code></pre>

<p>I'm not keen on this workflow for a couple of reasons. I have no further use for the temporary file, so I'd have to clean up afterwards by removing it. Also, I usually have an instance of Vim open already, and I'd prefer a workflow that didn't require me to open a fresh instance of Vim.</p>

<h3 id="using-diffthis-to-compare-two-buffers">Using <code>:diffthis</code> to compare two buffers</h3>

<p>The <a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#:diffthis"><code>:diffthis</code></a> command allows us to compare two (or more) buffers that are open in an existing Vim session. If we have two split windows containing buffers that we want to compare, then we can diff them by running:</p>

<pre><code>:windo diffthis
</code></pre>

<p>We can turn diff mode off just as easily, by running:</p>

<pre><code>:windo diffoff
</code></pre>

<p>The nice thing about this technique is that we can use an unnamed buffer. There's no need to write the text to a temporary file. In the video demonstration, the buffer on the left corresponds to a file on my local filesystem, while the buffer on the right has no associated file. This technique would work just as well if neither buffer had been saved to disk, which makes it pretty flexible.</p>

<h3 id="getting-around-in-diff-mode">Getting around in diff mode</h3>

<p>In diff mode, Vim provides two handy motions for getting around: <code>[c</code> and <code>]c</code> jump back and forward between changes. If you want to resolve the differences between files, you can do so using the <code>:diffget</code> and <code>:diffput</code> commands. Check out episodes <a href="/e/32">32</a> and <a href="/e/33">33</a> for a detailed demonstration of how to use these commands.</p>

<h3 id="further-reading">Further reading</h3>

<ul>
  <li><a href="http://linux.die.net/man/1/vimdiff"><code>man vimdiff</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#vimdiff"><code>:h vimdiff</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#:diffthis"><code>:h :diffthis</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#:diffoff"><code>:h :diffoff</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#:windo"><code>:h :windo</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#:vnew"><code>:h :vnew</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/usr_08.html#08.7"><code>:help 08.7</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#:put"><code>:h :put</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/gui_x11.html#quoteplus"><code>:h quoteplus</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#CTRL-W_S"><code>:h ctrl-w_s</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#CTRL-W_v"><code>:h ctrl-w_v</code></a></li>
  <li><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pbpaste.1.html">pbpaste</a></li>
  <li><a href="http://usevim.com/2012/03/21/git-and-vimdiff/">Git and vimdiff</a></li>
  <li>Episode 32 - <a href="/e/32">Fugitive.vim - working with the git index</a></li>
  <li>Episode 33 - <a href="/e/33">Fugitive.vim - resolving merge conflicts with vimdiff</a></li>
</ul>


        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>

      <div>
        <hr/>
        <h3>Related content</h3>
        <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">
          <li>
          <h4><a href="/episodes/refining-search-patterns-with-the-command-line-window/">Refining search patterns with the command-line window</a></h4>
          <p>
          When you need to build a complex command, or devise a non-trivial search pattern, Vim’s command-line mode can be rather limiting. In this episode, I will introduce the command-line window, which allows you to use the full power of Vim when editing search queries and commands.
          </p>
          </li>
          <li>
          <h4><a href="/episodes/fugitive-vim-working-with-the-git-index/">Fugitive.vim - working with the git index</a></h4>
          <p>
          The fugitive plugin provides an interactive status window, where you can easily stage and review your changes for the next commit. The :Gdiff command visualizes the changes made to a file, by comparing the working copy with the index. In this episode, we’ll learn how to stage hunks of changes to the index without using the git add --patch command.
          </p>
          </li>
          <li>
          <h4><a href="/blog/2013/02/habit-breaking-habit-making/">Habit making, habit breaking</a></h4>
          <p>
          Moving your Vim cursor around using the arrow keys is a bad habit, and like many bad habits it’s a difficult one to break!
          </p>
          </li>
          <li>
          <h4><a href="/training">Vim Training</a></h4>
          <p>Boost your productivity with a <a href="/training">Vim training class</a>. Join a public class, or <a href="/training/private">book a private session</a> for your team.</p>
          </li>
          <li>
          <h4><a href="/publications">Publications</a></h4>
          <p>
          Make yourself a faster and more efficient developer with the help of <a href="/publications">these publications</a>.
          </p>
          </li>
          <li>
          <h4><a href="/categories">Find by category</a></h4>
          <p>
          Vimcasts contains
          65 free screencasts and
          45 articles.
          <a href="/categories">Browse all content by category</a>.
          </p>
          </li>
        </ul>
      </div>

      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

    <script type="text/javascript">
var Swiftype = window.Swiftype || {};
  (function() {
    Swiftype.key = 'Wdx4LxrBJv86q28yDA8A';
    Swiftype.renderStyle = 'new_page';
    Swiftype.resultPageURL = '/results/index.html';

    /** DO NOT EDIT BELOW THIS LINE **/
    var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
    script.src = "//s.swiftypecdn.com/embed.js";
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
  }());
</script>

    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>

