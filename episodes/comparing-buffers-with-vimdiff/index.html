
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Comparing buffers with vimdiff</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg.rss" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime.rss" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/vimcasts.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_comparing-buffers-with-vimdiff episodes_comparing-buffers-with-vimdiff_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">
      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>


    </div>
  </div>

  <div class="row title-row">
    <h2 class="episode_number small-2 small-push-10 large-2 large-reset-order columns">
      <small>#</small>60
    </h2>
    <h2 class="small-10 small-pull-2 large-10 large-reset-order columns">
      Comparing buffers with vimdiff
    </h2>
  </div>

  <div class="row pubdate-row">
    <div class="video-tags small-9 large-10 large-push-2 columns">
      
        Tagged with:
        <a href="/categories/vimdiff">vimdiff</a>
      
    </div>
    <time class="pubdate small-3 large-2 large-pull-10 columns" pubdate="pubdate" datetime="2014-01-15">
      <div class="hide-for-medium-up">Jan 15, '14</div><div class="show-for-medium-up">Jan 15, 2014</div>
    </time>
  </div>

  <div class="row">
    <div class="episode_summary small-12 large-10 large-offset-2 columns" data-swiftype-index="true">
      <p>Vim&rsquo;s diff mode allows us to easily compare the contents of two (or more) buffers. We can start Vim in diff mode using the <code>vimdiff</code> command, or if Vim is already running we can switch to diff mode using the <code>:diffthis</code> command. The beauty of the <code>:diffthis</code> command is that it works with unnamed buffers, whereas <code>vimdiff</code> can only work with files.</p>


    </div>
  </div>

  <div class="row">

    <div class="small-12 large-10 large-push-2 columns">
      <div class="video_wrapper">
        <video poster="http://vimcasts.org/images/posters/vimdiff-buffers.png"
          controls="controls" preload="none" class="placeholder"
          id="episode_60_placeholder">
          <source src="http://media.vimcasts.org/videos/60/vimdiff.ogv" type="video/ogg" />
          <source src="http://media.vimcasts.org/videos/60/vimdiff.m4v" type="video/x-m4v" />
        </video>
      </div>
    </div>

    <aside class="downloads small-12 large-2 large-pull-10 columns">

      <ul class="inline-list hide-for-large-up">
        <li>
  <strong class="video-duration">
    
    Run time:
    <time datetime="P4M,16S">
      4:16
    </time>
  </strong>
</li>

<li class="divider"></li>

<li class="ogg">
  <a href="http://media.vimcasts.org/videos/60/vimdiff.ogv">OGG</a>
  <span class="stats">9.2 MB</span>
</li>

<li class="quicktime">
  <a href="http://media.vimcasts.org/videos/60/vimdiff.m4v">Quicktime</a>
  <span class="stats">12.6 MB</span>
</li>

<li class="divider"></li>

<li>
  <a href="/transcripts/60/en/">Read transcript</a>
</li>

      </ul>

      <ul class="side-nav show-for-large-up">
        <li>
  <strong class="video-duration">
    
    Run time:
    <time datetime="P4M,16S">
      4:16
    </time>
  </strong>
</li>

<li class="divider"></li>

<li class="ogg">
  <a href="http://media.vimcasts.org/videos/60/vimdiff.ogv">OGG</a>
  <span class="stats">9.2 MB</span>
</li>

<li class="quicktime">
  <a href="http://media.vimcasts.org/videos/60/vimdiff.m4v">Quicktime</a>
  <span class="stats">12.6 MB</span>
</li>

<li class="divider"></li>

<li>
  <a href="/transcripts/60/en/">Read transcript</a>
</li>

      </ul>

    </aside>
  </div>

  <div class="row">
    <div class="small-12 large-10 large-offset-2 columns">
      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<h3>Using vimdiff to compare two files</h3>

<p>We can call <code>vimdiff</code> from the command line giving it two or more filenames. vimdiff launches Vim, creates a window for each specified file, and highlights the differences between them.</p>

<p>In the video demonstration, one of the files that I wanted to compare was on my local filesystem, while the other file was in a textarea on a webpage. Before I could use <code>vimdiff</code>, I had to copy the text from that textarea into a local file. I did so using my system clipboard, then running the command:</p>
<pre class="highlight plaintext">pbpaste &gt; 45-shownotes-latest.md
</pre>

<p>The <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pbpaste.1.html"><code>pbpaste</code></a> command is specific to os x, but similar commands are available on other systems.</p>

<p>We can now compare the two drafts by running:</p>
<pre class="highlight plaintext">vimdiff 45-shownotes-draft.md 45-shownotes-latest.md
</pre>

<p>I&rsquo;m not keen on this workflow for a couple of reasons. I have no further use for the temporary file, so I&rsquo;d have to clean up afterwards by removing it. Also, I usually have an instance of Vim open already, and I&rsquo;d prefer a workflow that didn&rsquo;t require me to open a fresh instance of Vim.</p>

<h3>Using <code>:diffthis</code> to compare two buffers</h3>

<p>The <a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#:diffthis"><code>:diffthis</code></a> command allows us to compare two (or more) buffers that are open in an existing Vim session. If we have two split windows containing buffers that we want to compare, then we can diff them by running:</p>
<pre class="highlight plaintext">:windo diffthis
</pre>

<p>We can turn diff mode off just as easily, by running:</p>
<pre class="highlight plaintext">:windo diffoff
</pre>

<p>The nice thing about this technique is that we can use an unnamed buffer. There&rsquo;s no need to write the text to a temporary file. In the video demonstration, the buffer on the left corresponds to a file on my local filesystem, while the buffer on the right has no associated file. This technique would work just as well if neither buffer had been saved to disk, which makes it pretty flexible.</p>

<h3>Getting around in diff mode</h3>

<p>In diff mode, Vim provides two handy motions for getting around: <code>[c</code> and <code>]c</code> jump back and forward between changes. If you want to resolve the differences between files, you can do so using the <code>:diffget</code> and <code>:diffput</code> commands. Check out episodes <a href="/e/32">32</a> and <a href="/e/33">33</a> for a detailed demonstration of how to use these commands.</p>

<h3>Further reading</h3>

<ul>
<li><a href="http://linux.die.net/man/1/vimdiff"><code>man vimdiff</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#vimdiff"><code>:h vimdiff</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#:diffthis"><code>:h :diffthis</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/diff.html#:diffoff"><code>:h :diffoff</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#:windo"><code>:h :windo</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#:vnew"><code>:h :vnew</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/usr_08.html#08.7"><code>:help 08.7</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#:put"><code>:h :put</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/gui_x11.html#quoteplus"><code>:h quoteplus</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#CTRL-W_S"><code>:h ctrl-w_s</code></a></li>
<li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#CTRL-W_v"><code>:h ctrl-w_v</code></a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man1/pbpaste.1.html">pbpaste</a></li>
<li><a href="http://usevim.com/2012/03/21/git-and-vimdiff/">Git and vimdiff</a></li>
<li>Episode 32 - <a href="/e/32">Fugitive.vim - working with the git index</a></li>
<li>Episode 33 - <a href="/e/33">Fugitive.vim - resolving merge conflicts with vimdiff</a></li>
</ul>

        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>
    </div>
  </div>

  <div class="row">
    <div class="small-12 large-10 large-offset-2 columns">
      <div>
        
      </div>
    </div>
  </div>

  <div class="row">
    <div class="small-12 columns">
      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/blog/2014/02/vimcasts-redesign-a-work-in-progress/">Vimcasts redesign: a work in progress</a></h4>
        <p>In the not-too-distant future, you can expect to see a revised design for Vimcasts.org. The most significant enhancements will be the addition of tags, site search, and a responsive design for smaller screens. Hannah Adcock, from <a href="http://contentedstrategy.com">contentedstrategy.com</a>, has been helping me out by analysing user feedback, as well as data from Google Analytics.</p>


      </li>
    
      <li>
        <h4><a href="/episodes/fugitive-vim-working-with-the-git-index/">Fugitive.vim - working with the git index</a></h4>
        <p>The fugitive plugin provides an interactive status window, where you can easily stage and review your changes for the next commit. The <code>:Gdiff</code> command visualizes the changes made to a file, by comparing the working copy with the index. In this episode, we&rsquo;ll learn how to stage hunks of changes to the index without using the <code>git add --patch</code> command.</p>

<p><em>This is the second of a five part series on fugitive.vim. In the next episode, we&rsquo;ll learn how to resolve a git merge conflict by performing a 3-way vimdiff.</em></p>


      </li>
    
      <li>
        <h4><a href="/episodes/fugitive-vim-resolving-merge-conflicts-with-vimdiff/">Fugitive.vim - resolving merge conflicts with vimdiff</a></h4>
        <p>When git branches are merged, there is always the chance of a conflict arising if a file was modified in both the target and merge branches. You can resolve merge conflicts using a combination of fugitive&rsquo;s <code>:Gdiff</code> command, and Vim&rsquo;s built in <code>diffget</code> and <code>diffput</code>. In this episode, we&rsquo;ll find out how.</p>

<p><em>This is the third in a five part series on fugitive.vim.</em></p>


      </li>
    

  </ul>
</div>

      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>

    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  

  </body>
</html>

