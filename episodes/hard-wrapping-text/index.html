<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Hard wrapping text</title>

    <link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
  </head>

  <body>
    <div id="logo">
      <h1><a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a></h1>
    </div>
    <p>It is sometimes preferable to format text with hard wrapped lines, for example when writing emails in plaintext. Vim can apply this style of formatting for you. This episode shows some of the options which allow you to customize Vim's text formatting.</p>

<p></p>

<p>The <code>gq{motion}</code> command will format a section of text. The <code>ip</code> motion selects the current paragraph, so <code>gqip</code> applies formatting to the current paragraph.</p>

<p>Running the <code>gq</code> command moves the cursor to the end of the paragraph. If you want to keep the cursor on the same word, you can instead run the command <code>gw</code>.</p>

<p>The <code>textwidth</code> setting is a number representing the maximum allowed width of a line. When set to zero, which is the default, Vim will use the full width of the window up to a maximum of 80 characters. When set to a value above zero, Vim will format lines of text so as not to exceed the value of <code>textwidth</code>.</p>

<p>The <code>wrapmargin</code> setting can be used to specify the number of characters from the right window border where wrapping begins. This can be useful if you have <code>number</code> or <code>foldcolumn</code> enabled, as both of these use up some of the width of the window. The <code>textwidth</code> setting takes precedence over <code>wrapmargin</code>.</p>

<p>You can influence how Vim applies formatting with the <code>formatoptions</code> setting. This is a string, which may contain any of the flags defined in <a href="http://vimdoc.sourceforge.net/htmldoc/change.html#fo-table"><code>fo-table</code></a>. You can set the <code>formatoptions</code> to a string by direct assignment:</p>

<pre><code>:set formatoptions=tcq
</code></pre>

<p>You can also add and remove flags from the list, with the following invocations:</p>

<pre><code>:set fo+=a
:set fo-=n
</code></pre>

<p>In the video, I demonstrate how Vim behaves when inserting, editing and deleting text with a blank <code>formatoptions</code> string, then with <code>fo=t</code>, and finally with <code>fo=ta</code>.</p>

<p>Note that the <code>gq</code> command will only invoke Vim's internal formatter if both the <code>formatexpr</code> and <code>formatprg</code> options are blank. On the other hand, the <code>gw</code> command will always invoke Vim's internal formatting engine, even if one of the alternate formatters is enabled.</p>

<h3 id="further-reading">Further reading</h3>

<ul>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/usr_25.html"><code>:help usr_25</code> - Editing formatted text</a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#gq"><code>:help gq</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#gw"><code>:help gw</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#fo-table"><code>:help fo-table</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/options.html#add-option-flags"><code>:help add-option-flags</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#auto-format"><code>:help auto-format</code></a></li>
  <li><a title="formatprg" href="http://vimdoc.sourceforge.net/htmldoc/options.html#"><code>:help formatprg</code></a></li>
  <li><a title="formatexpr" href="http://vimdoc.sourceforge.net/htmldoc/options.html#"><code>:help formatexpr</code></a></li>
</ul>


  </body>

</html>
