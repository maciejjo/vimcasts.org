
<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Using :argdo to change multiple files</title>

    
      <meta name="st:robots" content="follow, index">
    

    
      <link href="/feeds/ogg" title="Vimcasts OGG Feed" rel="alternate" type="application/rss+xml" />
    
      <link href="/feeds/quicktime" title="Vimcasts Quicktime Feed" rel="alternate" type="application/rss+xml" />
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="episodes episodes_using-argdo-to-change-multiple-files episodes_using-argdo-to-change-multiple-files_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Using :argdo to change multiple files</h2>
        <div class="episode_number">
          <small>#</small>43
        </div>
        <time pubdate="pubdate" datetime="2013-02-25">
          Feb 25, 2013
        </time>
        <div class="video-duration">
          
          Run time: <time datetime="P5M,40S">
            5:40
          </time>
        </div>
        
          <div class="video-tags">
            Tagged with:
            <a href="/categories/arglist">arglist</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>The <code>:argdo</code> command allows us to execute an Ex command across all buffers in the arglist.  To demonstrate, we'll use the example of running the <code>:substitute</code> command across multiple files, then we'll see how to revert or save the changes.  We'll also compare the <code>:argdo</code> and <code>:bufdo</code> commands, and consider when it's appropriate to use each one.</p>


      </div>

      <video poster="http://vimcasts.org/images/posters/argdo.png"
        controls="controls" preload="none" class="placeholder"
        id="episode_43_placeholder">
        <source src="http://media.vimcasts.org/videos/43/argdo.ogv" type="video/ogg" />
        <source src="http://media.vimcasts.org/videos/43/argdo.m4v" type="video/x-m4v" />
      </video>

      <aside class="downloads">
        <ul class="inline-list">
          <li>Download: </li>

          <li class="ogg">
          <a href="http://media.vimcasts.org/videos/43/argdo.ogv">OGG</a>
          <span class="stats">7.4 MB</span>
          </li>

          <li class="quicktime">
          <a href="http://media.vimcasts.org/videos/43/argdo.m4v">Quicktime</a>
          <span class="stats">12 MB</span>
          </li>

      </ul>

        <p>
          View a <a href="/transcripts/43/en/">transcript of the video</a>.
        </p>
      </aside>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#shownotes">Shownotes</a>
        <div id="shownotes" class="content" data-swiftype-index="true">
          

<p>The <code>argdo</code> command works like this:</p>

<pre><code>:argdo {cmd}
</code></pre>

<p>Where <code>{cmd}</code> could be any Ex command, such as <code>:substitute</code>, <code>:global</code>, or <code>:normal</code> for example. This is just like running:</p>

<pre><code>:first
:{cmd}
:next
:{cmd}
etc...
</code></pre>

<p>The <code>argdo</code> command works best when the <a title="hidden" href="http://vimdoc.sourceforge.net/htmldoc/options.html#"><code>'hidden'</code></a> setting is enabled. For more information, see Vimcast <a href="/e/6">episode 6 - Working with buffers</a>.</p>

<h3 id="using-argdo-with-substitute">Using <code>argdo</code> with <code>substitute</code></h3>

<p>The video demonstrates how to use <code>argdo</code> with the <code>substitute</code> comamnd. We start off simple:</p>

<pre><code>:argdo %s/\a/*/g
</code></pre>

<p>There's a problem with this command: if any of the buffers in the argument list do not contain a match for the pattern specified by the substitute command (in this case <code>\a</code>), then the substitue command will raise an error: <code>E486 pattern not found</code>. We can suppress this error by modifying the substitute command with the <code>e</code> flag (see <a href="http://vimdoc.sourceforge.net/htmldoc/change.html#:s_flags"><code>:help :s_flags</code></a>):</p>

<pre><code>:argdo %s/\a/*/ge
</code></pre>

<p>That cuts down some of the noise, but the substitute command still reports details of about the effect it has on each file in the argument list. We can suppress that output by prefixing the whole thing with <a href="http://vimdoc.sourceforge.net/htmldoc/various.html#:silent"><code>silent</code></a>:</p>

<pre><code>:silent argdo %s/\a/*/ge
</code></pre>

<p>Alternatively, we could use <code>:silent!</code>, which would suppress all output <em>including error messages</em>. That way, we could leave out the <code>e</code> flag:</p>

<pre><code>:silent! argdo %s/\a/*/g
</code></pre>

<h3 id="pasting-the-last-ex-command-into-the-command-line">Pasting the last Ex command into the command line</h3>

<p>On the command line, you can paste the contents of a register by pressing <a href="http://vimdoc.sourceforge.net/htmldoc/cmdline.html#c_CTRL-R"><code>&lt;C-r&gt;{register}</code></a>. In this context, the <a href="http://vimdoc.sourceforge.net/htmldoc/change.html#quote:"><code>quote:</code></a> register comes in handy: it contains the last executed Ex command. For example, if we start out by running a simple substitute command:</p>

<pre><code>:%s/\a/*/g
</code></pre>

<p>To prefix this with argdo, simply type <code>:argdo</code>, then a space, then <code>&lt;C-r&gt;:</code> which will produce:</p>

<pre><code>:argdo %s/\a/*/g
</code></pre>

<p>After executing this command, the <code>:</code> register will contain <code>argdo %s/\a/*/g</code>. We could prefix this with <code>silent</code> by typing <code>:silent</code>, space, then <code>&lt;C-r&gt;:</code> to produce:</p>

<pre><code>:silent argdo %s/\a/*/g
</code></pre>

<p>You get the idea?</p>

<h3 id="argdo-vs-bufdo">:argdo Vs :bufdo</h3>

<p>Just as we can use <code>:argdo</code> to execute a command on each of the files in the arglist, we can use <code>:bufdo</code> to execute a command on each of the files in the buffer list. In some circumstances, the buffer list and arglist may refer to the same set of files. In this case, it would make no difference whether you used <code>:bufdo</code> or <code>:argdo</code>.</p>

<p>It's easy to add files to the buffer list (perhaps unintentionally), so if you use <code>:bufdo</code> there's always a risk that it might end up touching a file that you didn't mean to change. Whereas the arglist only changes when you tell it to. For that reason, I prefer to use <code>:argdo</code> instead of <code>:bufdo</code>.</p>

<h3 id="further-reading">Further reading</h3>

<ul>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/editing.html#:argdo"><code>:help :argdo</code></a></li>
  <li><a title="hidden" href="http://vimdoc.sourceforge.net/htmldoc/options.html#"><code>:help 'hidden'</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#:s_flags"><code>:help :s_flags</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/various.html#:silent"><code>:help :silent</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/editing.html#:edit!"><code>:help :edit!</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/editing.html#:update"><code>:help :update</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/windows.html#:bufdo"><code>:help :bufdo</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/cmdline.html#c_CTRL-R"><code>:help c_CTRL-R</code></a></li>
  <li><a href="http://vimdoc.sourceforge.net/htmldoc/change.html#quote:"><code>:help quote:</code></a></li>
  <li><a href="/e/6">Working with buffers</a></li>
</ul>


        </div>
        </dd>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this video? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>


      <div>
  <hr/>
  <h3>Related content</h3>
  <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">

    
    

    
      <li>
        <h4><a href="/categories">Find by category</a></h4>
        <p>Vimcasts contains 65 free screencasts and 45 articles. <a href='/categories'>Browse all content by category</a>.</p>
      </li>
    
      <li>
        <h4><a href="/episodes/populating-the-arglist/">Populating the arglist</a></h4>
        <p>The arglist wouldn't be much use if we had to quit and relaunch Vim every time we wanted to change its contents. In this episode, we'll learn how to set the contents of the arglist using the <code>:args</code> command, which can receive filepaths, globs, or even backtick expressions.</p>


      </li>
    
      <li>
        <h4><a href="/episodes/search-multiple-files-with-vimgrep/">Search multiple files with :vimgrep</a></h4>
        <p><code>vimgrep</code> is Vim's built-in command for searching across multiple files. It's not so fast as external tools like ack and git-grep, but it has its uses. <code>vimgrep</code> uses Vim's built-in regex engine, so you can reuse the patterns that work with Vim's standard search command. </p>


      </li>
    
      <li>
        <h4><a href="/training">Vim Training</a></h4>
        <p>Boost your productivity with a <a href='/training'>Vim training class</a>. Join a public class, or <a href='/training/private'>book a private session</a> for your team.</p>
      </li>
    
      <li>
        <h4><a href="/blog/2013/03/combining-vimgrep-with-ack--f/">Combining :vimgrep with ack -f</a></h4>
        <p>I love the way that ack let's me specify the files to search inside. For starters, ack does the right thing by ignoring the contents of VCS directories, backup files, core dumps etc., which gives a good signal to noise ratio. On top of that, ack provides a convenient syntax for specifying filetypes to include or exclude from the set (see <code>ack --help-types</code>). I can target ruby files only with the <code>--ruby</code> option, or everything but ruby files with <code>--noruby</code>.</p>

<p>I also love using <code>:vimgrep</code>, because it lets me use Vim's native regular expressions. For me, the ideal project-wide search would combine Vim's regex with ack's method of specifying the set of files to search through. I recently learned about ack's <code>-f</code> flag, which makes this combination possible.</p>


      </li>
    
      <li>
        <h4><a href="/publications">Publications</a></h4>
        <p>Make yourself a faster and more efficient developer with the help of <a href='/publications'>these publications</a>.</p>
      </li>
    

  </ul>
</div>


      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

