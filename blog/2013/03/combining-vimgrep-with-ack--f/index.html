<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Combining :vimgrep with ack -f</title>

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="blog blog_2013 blog_2013_03 blog_2013_03_combining-vimgrep-with-ack--f blog_2013_03_combining-vimgrep-with-ack--f_index">

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
            <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">
            <!-- Right Nav Section -->
            <ul class="right">
              <li class="has-form">
              <div class="row collapse">
                <div class="large-8 small-9 columns">
                  <input type="text" placeholder="Explore archives">
                </div>
                <div class="large-4 small-3 columns">
                  <a href="#" class="alert button expand">Search</a>
                </div>
              </div>
              </li>
            </ul>

            <!-- Left Nav Section -->
            <ul class="left">
              <li><a href="/categories">Episodes</a></li>
              <li><a href="/blog">Blog</a></li>
              <li><a href="/training">Training</a></li>
              <li><a href="/publications">Publications</a></li>
            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li><a href="/">Home</a></li>
          <li><a href="/episodes">Episodes</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/training">Training</a></li>
          <li><a href="/publications">Publications</a></li>
          <li>
          <form>
            <label text="search">Search: <input type="search" disabled/></label>
          </form>
          </li>
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="show-for-small-only text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil</small>
            </h4>
            <h4 class="show-for-medium-up text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a></small>
            </h4>
            
          </div>
        </div>

        <p>I love the way that ack let's me specify the files to search inside. For starters, ack does the right thing by ignoring the contents of VCS directories, backup files, core dumps etc., which gives a good signal to noise ratio. On top of that, ack provides a convenient syntax for specifying filetypes to include or exclude from the set (see <code>ack --help-types</code>). I can target ruby files only with the <code>--ruby</code> option, or everything but ruby files with <code>--noruby</code>.</p>

<p>I also love using <code>:vimgrep</code>, because it lets me use Vim's native regular expressions. For me, the ideal project-wide search would combine Vim's regex with ack's method of specifying the set of files to search through. I recently learned about ack's <code>-f</code> flag, which makes this combination possible.</p>

<p></p>

<r:snippet name="announcement" />

<p><a href="http://betterthangrep.com/documentation/">Ack's documentation</a> describes the <code>-f</code> flag as follows:</p>

<pre><code>-f     Only print the files found, without searching.
       The PATTERN must not be specified.
</code></pre>

<p>That means we can easily get a list of all of the source code files in a project by running:</p>

<pre><code>ack -f
</code></pre>

<p>We could load all of those files into Vim's arglist by launching Vim with a backtick expression containing that command:</p>

<pre><code>vim `ack -f`
</code></pre>

<p>Or if Vim was already running, we could populate the arglist with the same set of files by running:</p>

<pre><code>:args `ack -f`
</code></pre>

<p><a href="/e/42">Episode #42</a> of Vimcasts goes into more detail on <a href="/e/42">populating the arglist</a>.</p>

<p>On Vim's command line, the special symbol <a href="http://vimdoc.sourceforge.net/htmldoc/cmdline.html#:_##">##</a> is expanded to represent the filepath of each buffer in the arglist. If we wanted to search for a pattern inside all of those files, we could do so by running:</p>

<pre><code>:vimgrep /{pattern}/g ##
</code></pre>

<p>This gives the best of both worlds. We get to use <code>ack</code> to specify the set of files to look inside, and <code>:vimgrep</code> to harness Vim's built-in regex engine. </p>

<p>This works too:</p>

<pre><code>:vimgrep /{pattern}/g `ack -f`
</code></pre>

<p>I prefer to specify the set of files in one command (<code>:args ack -f</code>) and the pattern in a second command (<code>:vim /{pattern}/g ##</code>), but that's just my personal preference. <a href="/e/44">Episode #44</a> of Vimcasts goes into more detail on how to <a href="/e/44">search multiple files with :vimgrep</a>.</p>


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>


    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
