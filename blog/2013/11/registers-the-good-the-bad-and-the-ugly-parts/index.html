<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Registers: the Good, the Bad, and the Ugly Parts</title>

    
      <meta name="st:robots" content="follow, index">
    

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/autocomplete.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="blog blog_2013 blog_2013_11 blog_2013_11_registers-the-good-the-bad-and-the-ugly-parts blog_2013_11_registers-the-good-the-bad-and-the-ugly-parts_index" data-swiftype-index='false'>

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">

            
              <!-- Right Nav Section -->
              <ul class="right">
                <li class="has-form">
                <div class="row collapse">
                  <div class="large-12 columns">
                    <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


                  </div>
                </div>
                </li>
              </ul>
            

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>



          
            <li>
              <form class="swiftype-search-form">
  <input type="search" class="swiftype-search-input" placeholder="Search the archives"/>
</form>


            </li>
          
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="text-right">
              Level-up your Vim<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical&nbsp;Vim</a></small>
            </h4>
            
          </div>
        </div>

          <div class="row">
    <div class="small-12 columns">

      

<div class="row announcement-banner">
  <div class="small-12 column show-for-small-only">
    <div class="panel">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

      
    </div>
  </div>

  <div class="panel show-for-medium-up clearfix">
    <div class="small-8 column">
      <p>
            No Core Vim Classes are currently scheduled. <a href="#">Sign up to the mailing list</a> to hear of upcoming classes.
</p>

    </div>

    <div class="small-4 column">
      
    </div>
  </div>

</div>



      <header>
        <h2>Registers: the Good, the Bad, and the Ugly Parts</h2>
        <time pubdate="pubdate" datetime="2013-11-25">
          Nov 25, 2013
        </time>
        
          <div class="article-tags">
            Tagged with:
            <a href="/categories/registers">registers</a>, <a href="/categories/articles">articles</a>, <a href="/categories/copy-and-paste">copy-and-paste</a>
          </div>
        
      </header>

      <div data-swiftype-index="true">
        <p>To the newcomer, Vim's way of doing things may seem strange, but with familiarity it becomes natural. Many of Vim's features seemed odd to me at first, but when I got used to them I recognised that they had their own particular elegance. However, there's one feature of Vim that still feels awkward to me: using registers for copy and paste. The deeper my understanding of registers becomes, the more they frustrate me!</p>



<h3 id="the-good-parts">The Good Parts</h3>

<p>There's plenty to like about Vim's registers. I've produced <a href="http://vimcasts.org/blog/2013/11/the-copypaste-series-a-retrospective/">a series of 7 screencasts</a> that go into depth about how registers can be used for copy and paste. As far as I'm concerned, that's all good stuff. But registers aren't only useful for copy and paste. We can also create and execute macros, by recording our keystrokes into a register then playing back those keystrokes later.</p>

<p>The fact that registers are multi-purpose means that after recording a macro we can easily make changes to it. For example, we could record our keystrokes into a register, then paste that register into the document, edit the keystrokes in place, then yank the modified version back into a register. (See <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a>, tip 71: <em>Edit the contents of a macro</em> for a demonstration.) I like that flexibility.</p>

<p>I also like how Vim exposes useful information through the <a href="http://vimdoc.sourceforge.net/htmldoc/change.html#quote_/">search</a> and <a href="http://vimdoc.sourceforge.net/htmldoc/change.html#quote_.">read-only registers</a>: <code>@/</code> contains the current search pattern, <code>@:</code> contains the last Ex command, <code>@.</code> contains the last inserted text, and <code>@%</code> contains the filename of the current buffer.</p>

<h3 id="the-bad-parts">The Bad Parts</h3>

<p>The registers numbered <code>"1</code> through <code>"9</code> are a source of frustration for me. If you skim-read <a href="http://vimdoc.sourceforge.net/htmldoc/change.html#quote1">the documentation for Vim's numbered registers</a> they sound promising:</p>

<blockquote>
  <p>Vim shifts the previous contents of register 1 into register 2, 2 into 3, and so forth, losing the previous contents of register 9.</p>
</blockquote>

<p>It seems as though the registers numbered <code>"1</code> - <code>"9</code> provide something like a clipboard history, which sounds handy. This would be further enhanced by a little-known feature of the <code>.</code> command: when used to repeat <code>"1p</code>, the dot command increments the register number (see <a href="http://vimdoc.sourceforge.net/htmldoc/undo.html#redo-register">:help redo-register</a>):</p>

<blockquote>
  <p>you can use a special feature of the repeat command <code>.</code>. It will increase the number of the register used. So if you first do <code>"1P</code>, the following <code>.</code> will result in a <code>"2P</code>. Repeating this will result in all numbered registers being inserted.</p>
</blockquote>

<p>Not only does Vim maintain a sort of clipboard history, but it also provides a convenient method for iterating through the clipboard history. That sounds like a good thing, so why have I filed this under 'The Bad Parts'?</p>

<p>There's a catch: Vim never writes yank operations to register <code>"1</code>. Instead, yanked text is written to register <code>"0</code>, which is isolated from the mechanism that propagates values through <code>"1</code> to <code>"9</code>. That means that the clipboard history is incomplete. Registers <code>"1</code> - <code>"9</code> only record deletions, not yanks.</p>

<p>And when I say that registers <code>"1</code> - <code>"9</code> only record deletions, I have to add a further caveat: if the range of text being deleted spans less than one line, it will be written to <code>"-</code>, the <em>small delete register</em>. That is, unless you prefix the delete operation with a named register. In that case, the text will be written to the named register and to register <code>"1</code>, but not to <code>"-</code>.</p>

<p>I've compiled a table showing which registers are populated by various combinations of yank/delete operations, over a characterwise/linewise range, with or without a named register (see <a href="https://gist.github.com/nelstrom/7615833">this gist</a> for details of how I compiled this information):</p>

<table>
  <tr>
    <th>operation</th>
    <th><code>""</code> (default)</th>
    <th><code>"0</code> (yank)</th>
    <th><code>"1</code> (numbered)</th>
    <th><code>"a</code> (named)</th>
    <th><code>"-</code> (small&nbsp;delete)</th>
  </tr>

  <tr>
    <td><code>yw</code></td>
    <td>X</td>
    <td>X</td>
    <td>-</td>
    <td>-</td>
    <td>-</td>
  </tr>

  <tr>
    <td><code>yy</code></td>
    <td>X</td>
    <td>X</td>
    <td>-</td>
    <td>-</td>
    <td>-</td>
  </tr>

  <tr>
    <td><code>"ayw</code></td>
    <td>X</td>
    <td>-</td>
    <td>-</td>
    <td>X</td>
    <td>-</td>
  </tr>

  <tr>
    <td><code>"ayy</code></td>
    <td>X</td>
    <td>-</td>
    <td>-</td>
    <td>X</td>
    <td>-</td>
  </tr>

  <tr>
    <td><code>dw</code></td>
    <td>X</td>
    <td>-</td>
    <td>-</td>
    <td>-</td>
    <td>X</td>
  </tr>

  <tr>
    <td><code>dd</code></td>
    <td>X</td>
    <td>-</td>
    <td>X</td>
    <td>-</td>
    <td>-</td>
  </tr>

  <tr>
    <td><code>"adw</code></td>
    <td>X</td>
    <td>-</td>
    <td>X</td>
    <td>X</td>
    <td>-</td>
  </tr>

  <tr>
    <td><code>"add</code></td>
    <td>X</td>
    <td>-</td>
    <td>X</td>
    <td>X</td>
    <td>-</td>
  </tr>
</table>

<p>There are so many idiosyncrasies in this table that it's hard to decide what's a rule and what's an exception! It's needlessly complicated. If you're considering committing this chart to memory, I would urge you not to bother.</p>

<h3 id="the-ugly-parts">The Ugly Parts</h3>

<p>Vim uses non-standard terminology to describe cut, copy, and paste operations. As I've <a href="http://vimcasts.org/episodes/meet-the-yank-register#vim-jargon">noted before</a>: 'put' and 'paste' are easily interchangeable, and the word 'yank' becomes synonymous with 'copy' when you get used to it, but Vim's use of the word ‘delete’ is problematic. </p>

<p>In most text editing contexts the word delete means <em>remove</em>. But Vim's delete operation copies the text into a register, then removes it from the document. In other words, Vim's delete operation behaves like the standard cut command. I find Vim's terminology to be unhelpful, so I try to make a point of describing the <code>d{motion}</code> command as “cut the specified text” (rather than “delete the specified text”). Likewise for <code>x</code>, <code>c</code>, <code>s</code>, and so on.</p>

<p>The fact that <code>x</code>, <code>s</code>, <code>d</code>, and <code>c</code> all <em>cut by default</em> makes it awkward to perform a true deletion. To really delete text (without writing to a register), we have to prefix each of these commands with <code>"_</code>, the blackhole register. That's bizarre! More often than not, when I use Vim's delete operation, I only want to remove the text from the document. I don't want to write it to a register and I consider that to be an unfortunate side-effect.</p>

<p>On the other hand, I definitely want to write the text to a register when I use the yank command (after all, that's the only thing it does!). It's frustrating that the yank command writes to <code>"0</code>, overwriting my previous yank. Whereas the delete command writes text that I may not even want to keep to <code>"1</code>, preserving the previous eight deletions in registers <code>"2</code> - <code>"9</code>.</p>

<h3 id="so-what">So what?</h3>

<p><em>Cut</em> is not a sensible default behaviour for a command named 'delete'. The terminology is misleading, but the behaviour itself is also unfortunate. Vimcasts episode #52, <a href="/e/52">Meet the yank register</a>, shows an example workflow where this behaviour acts as an impediment. It would be better if Vim provided two distinct commands: the delete operation would only remove text from the document, while the cut operation would remove text from the document and write it to a register. That Vim's <code>x</code>, <code>s</code>, <code>d</code>, and <code>c</code> "delete operations" write text to a register is ugly.</p>

<p>I can't find any redeeming features in the behaviour of Vim's numbered registers, which makes me think they're just plain bad. They get almost half-way to behaving as a proper clipboard history, but that's not good enough. A half-cooked feature is a feature wasted.</p>

<p>I've learned to live with the good parts of Vim's copy/paste feature set.
The good parts are good enough to get by with, but they're not as good as they could be.
That frustrates me.</p>

<p>I have written my thoughts on how to fix Vim's registers in the form of a <a href="https://github.com/nelstrom/vim-cutlass">README for cutlass.vim</a> - a plugin that doesn't yet exist. I'd also like to give a shout out to Steve Vermeulen, who has already implemented some of the same features that I sketched (and many more features besides) in his <a href="https://github.com/svermeulen/vim-easyclip">vim-easyclip</a> plugin, which you can install and use today.</p>


      </div>

      <dl class="accordion" data-accordion>
        <dd>
        <a href="#comments">Comments</a>
        <div id="comments" class="content">
          <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'vimcasts'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        </dd>
      </dl>

      <div>
        <p>
        Like this article? Spread the word!
        TODO: add social sharing buttons here.
        </p>
      </div>

      <div>
        <hr/>
        <h3>Related content</h3>
        <ul class="small-block-grid-1 medium-block-grid-2 large-block-grid-3">
          <li>
          <h4><a href="/episodes/refining-search-patterns-with-the-command-line-window/">Refining search patterns with the command-line window</a></h4>
          <p>
          When you need to build a complex command, or devise a non-trivial search pattern, Vim’s command-line mode can be rather limiting. In this episode, I will introduce the command-line window, which allows you to use the full power of Vim when editing search queries and commands.
          </p>
          </li>
          <li>
          <h4><a href="/episodes/fugitive-vim-working-with-the-git-index/">Fugitive.vim - working with the git index</a></h4>
          <p>
          The fugitive plugin provides an interactive status window, where you can easily stage and review your changes for the next commit. The :Gdiff command visualizes the changes made to a file, by comparing the working copy with the index. In this episode, we’ll learn how to stage hunks of changes to the index without using the git add --patch command.
          </p>
          </li>
          <li>
          <h4><a href="/blog/2013/02/habit-breaking-habit-making/">Habit making, habit breaking</a></h4>
          <p>
          Moving your Vim cursor around using the arrow keys is a bad habit, and like many bad habits it’s a difficult one to break!
          </p>
          </li>
          <li>
          <h4><a href="/training">Vim Training</a></h4>
          <p>Boost your productivity with a <a href="/training">Vim training class</a>. Join a public class, or <a href="/training/private">book a private session</a> for your team.</p>
          </li>
          <li>
          <h4><a href="/publications">Publications</a></h4>
          <p>
          Make yourself a faster and more efficient developer with the help of <a href="/publications">these publications</a>.
          </p>
          </li>
          <li>
          <h4><a href="/categories">Find by category</a></h4>
          <p>
          Vimcasts contains
          65 free screencasts and
          45 articles.
          <a href="/categories">Browse all content by category</a>.
          </p>
          </li>
        </ul>
      </div>

      <div class="row footer">

  <hr/>

  <div class="small-6 columns">
    <ul class="inline-list">
      <li><a href="/about">About</a></li>
      <li><a href="/subscribe">Subscribe</a></li>
      <li><a href="/tipjar">Leave a tip</a></li>
    </ul>
  </div>

  <div class="small-6 columns">
    <p class="text-right">
    Vimcasts.org established MMX
    </p>
  </div>

</div>


    </div>
  </div>




      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>

  <script src="/javascripts/all.js" type="text/javascript"></script>

  </body>
</html>

