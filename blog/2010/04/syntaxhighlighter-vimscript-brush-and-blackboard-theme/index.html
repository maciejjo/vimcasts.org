<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>SyntaxHighlighter Vimscript brush and Blackboard theme</title>

    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
  </head>

  <body class="blog blog_2010 blog_2010_04 blog_2010_04_syntaxhighlighter-vimscript-brush-and-blackboard-theme blog_2010_04_syntaxhighlighter-vimscript-brush-and-blackboard-theme_index">

  <div class="off-canvas-wrap">
    <div class="inner-wrap">

      <div class="top-bar-underlay"></div>

      <div class="row">
        <nav class="top-bar show-for-large-up" data-topbar>
          <ul class="title-area">
            <li class="name">
              <h1><a href="/">Vimcasts</a></h1>
            </li>
            <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
          </ul>

          <section class="top-bar-section">
            <!-- Right Nav Section -->
            <ul class="right">
              <li class="has-form">
              <div class="row collapse">
                <div class="large-8 small-9 columns">
                  <input type="text" placeholder="Explore archives">
                </div>
                <div class="large-4 small-3 columns">
                  <a href="#" class="alert button expand">Search</a>
                </div>
              </div>
              </li>
            </ul>

            <!-- Left Nav Section -->
            <ul class="left">
              <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


            </ul>
          </section>
        </nav>
      </div>

      <nav class="tab-bar hide-for-large-up">
        <section class="left-small">
          <a class="left-off-canvas-toggle menu-icon" ><span></span></a>
        </section>

        <section class="middle tab-bar-section"></section>
      </nav>

      <aside class="left-off-canvas-menu">
        <ul class="off-canvas-list">
          <li><label>Vimcasts</label></li>
          <li class="has-dropdown">
  <a href="/categories">Browse Vimcasts</a>
  <ul class="dropdown">
    <li><a href="/episodes">Latest episodes</a></li>
    <li><a href="/blog">Latest articles</a></li>
  </ul>
</li>
<li><a href="/training">Training</a></li>
<li><a href="/publications">Publications</a></li>


          <li>
          <form>
            <label text="search">Search: <input type="search" disabled/></label>
          </form>
          </li>
        </ul>
      </aside>

      <section class="main-section">

        <div class="row identity-row">
          <div id="logo" class="small-4 columns">
            <h1>
              
                <a href="/" title="Go to Vimcasts.org homepage">VimCasts.org</a>
              
            </h1>
          </div>
          <div class="small-7 small-offset-1 columns">
            
            <h4 class="show-for-small-only text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil</small>
            </h4>
            <h4 class="show-for-medium-up text-right">
              Free Vim screencasts<br/>
              <small>with Drew Neil, author of <a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a></small>
            </h4>
            
          </div>
        </div>

        <p>Here on Vimcasts.org, I use Alex Gorbatchev's <a href="http://alexgorbatchev.com/wiki/SyntaxHighlighter">SyntaxHighlighter</a> to colorize the code excerpts. I couldn't find a syntax 'brush' for Vimscript, so I wrote my own. I also created a color theme based on the Blackboard scheme that I use in Vim (and TextMate). </p>

<p></p>

<p>I have published the Vimscript brush and Blackboard theme on github. You can find them here:</p>

<ul>
  <li><a href="http://github.com/nelstrom/SyntaxHighlighter/blob/master/styles/shThemeBlackboard.css">Blackboard theme</a></li>
  <li><a href="http://github.com/nelstrom/SyntaxHighlighter/blob/master/scripts/shBrushVimscript.js">Vimscript syntax</a></li>
</ul>

<p>I created these two files, but everything else in the project is by Alex Gorbatchev and the SyntaxHighligher community. The project is not hosted on github, otherwise I would have forked it.</p>

<h3 id="vimscript-keywords">Vimscript keywords</h3>

<p>The Vimscript brush includes a large list of keywords. I copied this list from Vim's own syntax file, which you can open up in Vim by running <code>:edit $VIMRUNTIME/syntax/vim.vim</code>. When defining syntax files for Vim, you can use a form of shorthand, e.g. <code>e[dit]</code>, which is equivalent to including both <code>e</code> and <code>edit</code>. The SyntaxHighligher doesn't understand this convention, so I had to expand all of these abbreviations into longhand. I wrote a <a href="http://github.com/nelstrom/SyntaxHighlighter/blob/master/expander.rb">little ruby script</a> that does this for me. Here's the gist of it:</p>

<pre class="brush: ruby">
list = ['abc[lear]', 'argu[ment]', 'bel[owright]']
pattern = /(\w+)(\[(\w+)\])?/
output = []
list.each do |token|
  if token =~ pattern
    output &lt;&lt; $1 if $1.length &gt; 1
    if $3
      output &lt;&lt; $1 + $3
    end
  end
end
puts output.join(' ')
</pre>

<p>Since I first created the Vimscript brush, I have occasionally pruned the list of keywords. Although it might be handy that you can type <code>:e</code> instead of spelling out <code>:edit</code> in full, I don't really want the letter <code>e</code> to be considered a <em>keyword</em>. </p>

<p>This is a matter of taste, but I have come accross other situations where the shorthand actually caused problems. For example, if I want to include an angle bracket character (common in Vimscript when creating keymappings), I have to encode the <code>&lt;</code> character to it's HTML entity <code>&amp;lt;</code>. I found that the syntax highlighter would identify <code>lt</code> as a keyword (being shorthand for <code>ltag</code>), breaking the HTML entity up into something like <code>&amp;&lt;code class="keyword"&gt;lt&lt;/code&gt;;</code>. As a result, the angle bracket would instead appear spelled out as an HTML entity, with <code>lt</code> highlighted as a keyword!</p>

<p>This makes a good case for removing <code>lt</code> from the list of keywords. It is quite possible that there are other keywords in the list which could cause similar problems, as yet unencountered. If you try out the Vimscript brush and discover any of these problems, please let me know. Or better still, fork the project, fix it, and send me a pull request on Github.</p>


      </section>

      <a class="exit-off-canvas"></a>

    </div>
  </div>


    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
